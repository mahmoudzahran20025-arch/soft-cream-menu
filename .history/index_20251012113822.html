<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title> ÿ≥ŸàŸÅÿ™ ŸÉÿ±ŸäŸÖ - ÿ£ÿ∑Ÿäÿ® ÿ¢Ÿäÿ≥ ŸÉÿ±ŸäŸÖ ŸÅŸä ÿßŸÑŸÖÿØŸäŸÜÿ©</title>
  <meta name="description" content="ÿßÿ≥ÿ™ŸÖÿ™ÿπ ÿ®ÿ£ŸÑÿ∞ ÿ£ŸÜŸàÿßÿπ ÿßŸÑÿ¢Ÿäÿ≥ ŸÉÿ±ŸäŸÖ ŸàÿßŸÑÿ≥ŸàŸÅÿ™ ŸÉÿ±ŸäŸÖ. ŸÖŸÜŸäŸà ÿ±ŸÇŸÖŸä ÿ™ŸÅÿßÿπŸÑŸä ŸÖÿπ ÿ™ŸàÿµŸäŸÑ ÿ≥ÿ±Ÿäÿπ">
  
  <!-- Cairo Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
  
  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest"></script>
  
  <!-- Fuse.js for fuzzy search -->
  <script src="https://cdn.jsdelivr.net/npm/fuse.js@7.0.0"></script>

  <!-- Animate.css -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">

  <style>
    /* ================================================================
   üé® PREMIUM SOFT CREAM MENU - ENHANCED CSS ONLY
   ================================================================ */

/* ================================================================
   üé® PREMIUM SOFT CREAM MENU - ENHANCED CSS ONLY
   ================================================================ */

/* ========================================
   Design System Variables
======================================== */
:root {
  /* Colors - Premium Palette */
  --bg-primary: #FFF9F5;
  --bg-secondary: #FFFFFF;
  --bg-tertiary: #FFF5EE;
  --text-primary: #2D1810;
  --text-secondary: #6B5D52;
  --text-muted: #9A8B7D;
  --border-color: rgba(255, 107, 157, 0.12);
  
  /* Brand Colors */
  --color-primary: #FF6B9D;
  --color-primary-dark: #E85589;
  --color-secondary: #C9A0DC;
  --color-accent: #A8E6CF;
  --color-warning: #FFB84D;
  --color-success: #4CAF50;
  --color-destructive: #FF6B6B;
  
  /* Gradients */
  --gradient-primary: linear-gradient(135deg, #FF6B9D 0%, #FF8FB3 50%, #C9A0DC 100%);
  --gradient-secondary: linear-gradient(135deg, #A8E6CF 0%, #8FD4B8 100%);
  --gradient-accent: linear-gradient(135deg, #FFB84D 0%, #FF9F4D 100%);
  --gradient-hero: linear-gradient(135deg, #FF6B9D 0%, #C9A0DC 50%, #A8E6CF 100%);
  --gradient-shine: linear-gradient(135deg, rgba(255,255,255,0.4) 0%, rgba(255,255,255,0) 100%);
  --gradient-overlay: linear-gradient(180deg, rgba(255, 249, 245, 0) 0%, rgba(255, 249, 245, 0.98) 100%);
  
  /* Shadows - Enhanced */
  --shadow-xs: 0 1px 3px rgba(255, 107, 157, 0.06);
  --shadow-sm: 0 2px 8px rgba(255, 107, 157, 0.12);
  --shadow-md: 0 4px 20px rgba(255, 107, 157, 0.18);
  --shadow-lg: 0 10px 40px rgba(255, 107, 157, 0.24);
  --shadow-xl: 0 20px 60px rgba(255, 107, 157, 0.3);
  --shadow-glow: 0 0 40px rgba(255, 107, 157, 0.5);
  --shadow-inner: inset 0 2px 8px rgba(0, 0, 0, 0.05);
  
  /* Radius */
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 16px;
  --radius-xl: 24px;
  --radius-2xl: 32px;
  --radius-full: 999px;
  
  /* Spacing */
  --header-height: 100px;
  --bottom-nav-height: 70px;
  --nav-width: 300px;
  
  /* Transitions */
  --transition-fast: 0.15s cubic-bezier(0.4, 0, 0.2, 1);
  --transition-base: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  --transition-slow: 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}

body.dark {
  --bg-primary: #1A1625;
  --bg-secondary: #251E33;
  --bg-tertiary: #2D2438;
  --text-primary: #F5EDE4;
  --text-secondary: #C4B5A8;
  --text-muted: #948778;
  --border-color: rgba(255, 107, 157, 0.15);
  --gradient-overlay: linear-gradient(180deg, rgba(26, 22, 37, 0) 0%, rgba(26, 22, 37, 0.98) 100%);
  --shadow-xs: 0 1px 3px rgba(0, 0, 0, 0.2);
  --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.3);
  --shadow-md: 0 4px 20px rgba(0, 0, 0, 0.4);
  --shadow-lg: 0 10px 40px rgba(0, 0, 0, 0.5);
  --shadow-xl: 0 20px 60px rgba(0, 0, 0, 0.6);
  --shadow-glow: 0 0 40px rgba(255, 107, 157, 0.6);
}

/* ========================================
   Reset & Base
======================================== */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  -webkit-tap-highlight-color: transparent;
}

html {
  scroll-behavior: smooth;
  overflow-x: hidden;
}

body {
  font-family: 'Cairo', sans-serif;
  background: var(--bg-primary);
  color: var(--text-primary);
  transition: all var(--transition-base);
  overflow-x: hidden;
  line-height: 1.6;
  position: relative;
}

/* ========================================
   Animated Background
======================================== */
.animated-background {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 0;
  overflow: hidden;
  pointer-events: none;
  background: url('https://images.unsplash.com/photo-1757917725825-9d6fd4af2d32?w=600&auto=format&fit=crop&q=60') center/cover no-repeat;
  opacity: 0.08;
}

.animated-background::before {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--gradient-overlay);
  z-index: 1;
}

.floating-shape {
  position: absolute;
  border-radius: 50%;
  filter: blur(80px);
  opacity: 0.2;
  animation: floatShape 25s infinite ease-in-out;
}

.shape-1 {
  width: 500px;
  height: 500px;
  background: radial-gradient(circle, #FF6B9D, transparent);
  top: -10%;
  right: -10%;
  animation-delay: 0s;
}

.shape-2 {
  width: 450px;
  height: 450px;
  background: radial-gradient(circle, #C9A0DC, transparent);
  bottom: -15%;
  left: -10%;
  animation-delay: 8s;
}

.shape-3 {
  width: 400px;
  height: 400px;
  background: radial-gradient(circle, #A8E6CF, transparent);
  top: 40%;
  left: 40%;
  animation-delay: 16s;
}

@keyframes floatShape {
  0%, 100% { transform: translate(0, 0) scale(1) rotate(0deg); }
  25% { transform: translate(40px, -40px) scale(1.1) rotate(90deg); }
  50% { transform: translate(-30px, 30px) scale(0.9) rotate(180deg); }
  75% { transform: translate(50px, 40px) scale(1.05) rotate(270deg); }
}
.snowflake {
    position: absolute;
    color: #fff;
    text-shadow: 0 0 8px rgba(0,0,0,0.4);
    user-select: none;
    pointer-events: none;
    animation: snowfall linear infinite;
    font-size: 1rem;
  }

  @keyframes snowfall {
  0% {
    transform: translateY(-100px) translateX(0) rotate(0deg);
    opacity: 1;
  }
  100% {
    transform: translateY(100vh) translateX(var(--x-shift)) rotate(360deg);
    opacity: 0.2;
  }
}

body.dark .floating-shape {
  opacity: 0.08;
  filter: blur(70px);
}

body.dark .animated-background {
  opacity: 0.03;
}

.page-content {
  position: relative;
  z-index: 1;
}


/* ========================================
   Header - Enhanced
======================================== */
.header {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 100;
  backdrop-filter: blur(24px) saturate(180%);
  background: rgba(255, 249, 245, 0.92);
  border-bottom: 1px solid var(--border-color);
  box-shadow: var(--shadow-md);
  transition: all var(--transition-base);
  height: var(--header-height);
}

body.dark .header {
  background: rgba(26, 22, 37, 0.92);
}

.header.scrolled {
  height: 72px;
  box-shadow: var(--shadow-lg);
}

.header-content {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1.25rem 1.5rem;
  max-width: 1600px;
  margin: 0 auto;
  height: 100%;
  transition: padding var(--transition-base);
}

.header.scrolled .header-content {
  padding: 0.75rem 1.5rem;
}

.header-logo {
  display: flex;
  align-items: center;
  gap: 1rem;
  cursor: pointer;
  transition: transform var(--transition-base);
}

.header-logo:hover {
  transform: scale(1.02);
}

.logo-icon {
  background: var(--gradient-primary);
  padding: 0rem;
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-md);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--transition-base);
  position: relative;
  overflow: hidden;
  padding: 0;           /* ÿ•ÿ≤ÿßŸÑÿ© ÿ£Ÿä ÿ®ÿßÿØŸäŸÜÿ¨ */
  background: none;     /* ÿ®ÿØŸàŸÜ ÿÆŸÑŸÅŸäÿ© */
  box-shadow: none;     /* ÿ®ÿØŸàŸÜ ÿ∏ŸÑ */
}

.logo-icon::before {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--gradient-shine);
  opacity: 0;
  transition: opacity var(--transition-base);
}

.header-logo:hover .logo-icon {
  box-shadow: var(--shadow-glow);
  transform: rotate(-5deg) scale(1.05);
}

.header-logo:hover .logo-icon::before {
  opacity: 1;
  animation: shine 0.6s ease;
}

@keyframes shine {
  from { transform: translateX(-100%) skewX(-20deg); }
  to { transform: translateX(100%) skewX(-20deg); }
}

.logo-icon svg {
  width: 40px;
  height: 40px;
  color: white;
  z-index: 1;
  transition: transform var(--transition-base);
}

.header-logo:hover .logo-icon svg {
  transform: rotate(10deg);
}

.logo-text h1 {
  font-size: 2rem;
  font-weight: 900;
  background: var(--gradient-hero);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  line-height: 1.2;
  letter-spacing: -0.5px;
  margin-bottom: 2px;
}

.logo-text p {
  font-size: 0.9rem;
  color: var(--text-secondary);
  font-weight: 600;
}

.header-actions {
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

.lang-toggle, .theme-toggle {
  width: 52px;
  height: 52px;
  border-radius: var(--radius-full);
  border: 2px solid var(--border-color);
  background: var(--bg-secondary);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--transition-base);
  font-weight: 700;
  font-size: 0.95rem;
  color: var(--text-primary);
  position: relative;
  overflow: hidden;
}

.lang-toggle::before, .theme-toggle::before {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--gradient-primary);
  opacity: 0;
  transition: opacity var(--transition-base);
  z-index: 0;
}

.lang-toggle:hover, .theme-toggle:hover {
  border-color: var(--color-primary);
  box-shadow: var(--shadow-md);
  transform: translateY(-2px) scale(1.05);
}

.lang-toggle:hover::before, .theme-toggle:hover::before {
  opacity: 0.15;
}

.lang-toggle:active, .theme-toggle:active {
  transform: scale(0.95);
}

.theme-toggle svg {
  z-index: 1;
}

/* ========================================
   Side Navigation (Desktop)
======================================== */
.bottom-nav {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 100;
  backdrop-filter: blur(24px) saturate(180%);
  background: rgba(255, 249, 245, 0.95);
  border-top: 1px solid var(--border-color);
  box-shadow: 0 -4px 20px rgba(255, 107, 157, 0.15);
  height: var(--bottom-nav-height);
  padding: 0.5rem 0;
}

body.dark .bottom-nav {
  background: rgba(26, 22, 37, 0.95);
}

.bottom-nav-content {
  display: flex;
  justify-content: space-around;
  align-items: center;
  max-width: 600px;
  margin: 0 auto;
  height: 100%;
}

.nav-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 0.35rem;
  cursor: pointer;
  padding: 0.6rem 1.25rem;
  border-radius: var(--radius-lg);
  transition: all var(--transition-base);
  color: var(--text-secondary);
  position: relative;
  min-width: 70px;
}

.nav-item::before {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--gradient-primary);
  opacity: 0;
  border-radius: var(--radius-lg);
  transition: opacity var(--transition-base);
  z-index: 0;
}

.nav-item:hover {
  transform: translateY(-4px);
}

.nav-item:hover::before {
  opacity: 0.1;
}

.nav-item.active {
  color: white;
  background: var(--gradient-primary);
  box-shadow: var(--shadow-md);
}

.nav-item.active::before {
  opacity: 0;
}

.nav-item svg {
  width: 26px;
  height: 26px;
  z-index: 1;
  transition: transform var(--transition-base);
}

.nav-item:hover svg {
  transform: scale(1.15);
}

.nav-item.active svg {
  animation: bounceIcon 0.5s ease;
}

@keyframes bounceIcon {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.25); }
}

.nav-item span {
  font-size: 0.8rem;
  font-weight: 700;
  z-index: 1;
}

.nav-badge {
  position: absolute;
  top: 0.35rem;
  right: 0.75rem;
  background: var(--color-destructive);
  color: white;
  font-size: 0.7rem;
  font-weight: 800;
  padding: 0.25rem 0.55rem;
  border-radius: var(--radius-full);
  min-width: 22px;
  text-align: center;
  box-shadow: var(--shadow-sm);
  z-index: 2;
  animation: pulse 2s infinite;
}

/* Desktop Side Navigation */
@media (min-width: 1024px) {
  body {
    padding-left: calc(var(--nav-width) + 3rem);
  }

  .bottom-nav {
    position: fixed;
    top: calc(var(--header-height) + 1.5rem);
    left: 1.5rem;
    right: auto;
    bottom: auto;
    width: var(--nav-width);
    height: auto;
    border-top: none;
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-lg);
    padding: 1.5rem 1rem;
    border: 1px solid var(--border-color);
  }

  .bottom-nav-content {
    flex-direction: column;
    max-width: 100%;
    gap: 0.75rem;
    align-items: stretch;
  }

  .nav-item {
    flex-direction: row;
    justify-content: flex-start;
    padding: 1.25rem 1.5rem;
    min-width: auto;
    gap: 1.25rem;
  }

  .nav-item svg {
    width: 24px;
    height: 24px;
  }

  .nav-item span {
    font-size: 1.05rem;
  }

  .nav-item:hover {
    transform: translateX(8px);
    background: rgba(255, 107, 157, 0.08);
  }

  .nav-item.active {
    transform: translateX(0);
  }

  .nav-badge {
    position: absolute;
    top: 50%;
    right: 1.25rem;
    transform: translateY(-50%);
    font-size: 0.8rem;
    padding: 0.35rem 0.7rem;
  }
}

/* ========================================
   Main Content Area
======================================== */
/* ========================================
   Main Content Area
======================================== */
/* Main Content Area */
.main-wrapper {
  padding-top: calc(var(--header-height) + 1.5rem);
  padding-bottom: calc(var(--bottom-nav-height) + 1rem);
  min-height: 100vh;
  position: relative;
}
@media (min-width: 1024px) {
  .main-wrapper {
    padding-bottom: 2rem;
  }
}

.tab-content {
  display: none;
  animation: fadeInUp 0.4s ease;
}

.tab-content.active {
  display: block;
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ========================================
   Hero Section
======================================== */
.hero-section {
  text-align: center;
  padding: 2rem 1rem 3rem;
  position: relative;
}

.hero-badge {
  display: inline-flex;
  align-items: center;
  gap: 0.6rem;
  background: var(--gradient-primary);
  color: white;
  padding: 0.7rem 1.5rem;
  border-radius: var(--radius-full);
  font-size: 0.9rem;
  font-weight: 700;
  margin-bottom: 1.5rem;
  box-shadow: var(--shadow-md);
  animation: pulse 2.5s infinite;
  position: relative;
  overflow: hidden;
}

.hero-badge::before {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--gradient-shine);
  animation: shine 3s infinite;
}

.hero-badge svg {
  z-index: 1;
}

.hero-badge span {
  z-index: 1;
}

.hero-title {
  font-size: clamp(2rem, 6vw, 3.5rem);
  font-weight: 900;
  margin-bottom: 1rem;
  background: var(--gradient-hero);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  line-height: 1.2;
  letter-spacing: -1px;
}

.hero-description {
  font-size: clamp(1rem, 2vw, 1.15rem);
  color: var(--text-secondary);
  max-width: 600px;
  margin: 0 auto 2rem;
  line-height: 1.7;
}

.hero-stats {
  display: flex;
  justify-content: center;
  gap: 2.5rem;
  flex-wrap: wrap;
}

.stat-item {
  text-align: center;
  transition: transform var(--transition-base);
}

.stat-item:hover {
  transform: translateY(-5px);
}

.stat-value {
  font-size: 2.25rem;
  font-weight: 900;
  color: var(--color-primary);
  display: block;
  line-height: 1;
}

.stat-label {
  font-size: 0.9rem;
  color: var(--text-secondary);
  margin-top: 0.5rem;
  font-weight: 600;
}

/* ========================================
   Search Bar
======================================== */
.search-section {
  padding: 0 1rem;
  margin-bottom: 2rem;
}

.search-container {
  position: relative;
  max-width: 700px;
  margin: 0 auto;
}

.search-input {
  width: 100%;
  height: 60px;
  padding: 0 4rem 0 1.5rem;
  font-size: 1.05rem;
  font-family: 'Cairo', sans-serif;
  border: 2px solid var(--border-color);
  border-radius: var(--radius-full);
  background: var(--bg-secondary);
  color: var(--text-primary);
  transition: all var(--transition-base);
  box-shadow: var(--shadow-sm);
}

.search-input:focus {
  outline: none;
  border-color: var(--color-primary);
  box-shadow: var(--shadow-glow);
  transform: translateY(-3px);
}

.search-input::placeholder {
  color: var(--text-muted);
}

.search-icon {
  position: absolute;
  right: 1.75rem;
  top: 50%;
  transform: translateY(-50%);
  color: var(--text-secondary);
  pointer-events: none;
  width: 22px;
  height: 22px;
}

.clear-search {
  position: absolute;
  left: 1.25rem;
  top: 50%;
  transform: translateY(-50%);
  width: 38px;
  height: 38px;
  border-radius: var(--radius-full);
  border: none;
  background: rgba(255, 107, 157, 0.12);
  color: var(--color-primary);
  cursor: pointer;
  display: none;
  align-items: center;
  justify-content: center;
  transition: all var(--transition-base);
}

.clear-search.show {
  display: flex;
}

.clear-search:hover {
  background: rgba(255, 107, 157, 0.2);
  transform: translateY(-50%) scale(1.1);
}

.clear-search:active {
  transform: translateY(-50%) scale(0.95);
}

/* ========================================
   Categories - Sticky Tabs
======================================== */
/* ========================================
   Categories - Sticky Tabs (FIXED)
======================================== */
.categories-section {
  position: fixed;
  top: 100px;
  left: 0;
  right: 0;
  z-index: 80;
  backdrop-filter: blur(24px) saturate(180%);
  background: rgba(255, 249, 245, 0.95);
  padding: 1rem 0;
  border-bottom: 1px solid var(--border-color);
  box-shadow: var(--shadow-md);
  transition: top 0.3s ease;
  opacity: 0;
  pointer-events: none;
}

.categories-section.visible {
  opacity: 1;
  pointer-events: auto;
}

body.scrolled .categories-section {
  top: 72px;
}

body.dark .categories-section {
  background: rgba(26, 22, 37, 0.95);
}




.categories-scroll {
  display: flex;
  gap: 0.75rem;
  overflow-x: auto;
  padding: 0 1rem 0.5rem;
  scrollbar-width: none;
  -ms-overflow-style: none;
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch;
}

.categories-scroll::-webkit-scrollbar {
  display: none;
}

.category-tab {
  padding: 0.85rem 1.5rem;
  border-radius: var(--radius-full);
  border: 2px solid var(--border-color);
  background: var(--bg-secondary);
  color: var(--text-primary);
  font-family: 'Cairo', sans-serif;
  font-weight: 700;
  font-size: 0.95rem;
  cursor: pointer;
  white-space: nowrap;
  transition: all var(--transition-base);
  display: flex;
  align-items: center;
  gap: 0.6rem;
  flex-shrink: 0;
  position: relative;
  overflow: hidden;
}

.category-tab::before {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--gradient-primary);
  opacity: 0;
  transition: opacity var(--transition-base);
  z-index: 0;
}

.category-tab:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-sm);
}

.category-tab:hover::before {
  opacity: 0.1;
}

.category-tab.active {
  background: var(--gradient-primary);
  color: white;
  border-color: transparent;
  box-shadow: var(--shadow-md);
  transform: scale(1.05);
}

.category-tab.active::before {
  opacity: 0;
}

.category-tab svg {
  width: 20px;
  height: 20px;
  z-index: 1;
}

.category-tab span {
  z-index: 1;
}

/* Responsive */
@media (max-width: 768px) {
  .categories-section {
    padding: 0.75rem 0;
  }
  
  .categories-scroll {
    padding: 0 0.5rem 0.5rem;
    gap: 0.5rem;
  }
  
  .category-tab {
    padding: 0.7rem 1.2rem;
    font-size: 0.875rem;
    gap: 0.5rem;
  }
  
  .category-tab svg {
    width: 18px;
    height: 18px;
  }
}

@media (max-width: 480px) {
  .category-tab {
    padding: 0.6rem 1rem;
    font-size: 0.85rem;
  }
  
  .category-tab svg {
    width: 16px;
    height: 16px;
  }
}
/* ========================================
   Products Grid - Premium Cards
======================================== */
.products-container {
  padding: 0 1rem 2rem;
}

.category-group {
  margin-bottom: 3rem;
  scroll-margin-top: calc(var(--header-height) + 80px);
}

.category-header {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 1.5rem;
  padding-bottom: 1rem;
  border-bottom: 2px solid var(--border-color);
  position: relative;
}

.category-header::after {
  content: '';
  position: absolute;
  bottom: -2px;
  left: 0;
  width: 80px;
  height: 2px;
  background: var(--gradient-primary);
  border-radius: 2px;
}

.category-icon {
  width: 44px;
  height: 44px;
  background: var(--gradient-primary);
  border-radius: var(--radius-lg);
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  box-shadow: var(--shadow-sm);
  animation: float 3s ease-in-out infinite;
}

.category-name {
  font-size: 1.5rem;
  font-weight: 900;
  color: var(--text-primary);
}

.products-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
  gap: 1.25rem;
}

@media (max-width: 480px) {
  .products-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 0.85rem;
  }
  
  .category-header {
    margin-bottom: 1rem;
  }
  
  .category-icon {
    width: 36px;
    height: 36px;
  }
  
  .category-name {
    font-size: 1.2rem;
  }
}

@media (min-width: 640px) {
  .products-grid {
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 1.5rem;
  }
}

@media (min-width: 1024px) {
  .products-grid {
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 1.75rem;
  }
}

@media (min-width: 1440px) {
  .products-grid {
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 2rem;
  }
}

.product-card {
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-xl);
  overflow: hidden;
  cursor: pointer;
  transition: all var(--transition-base);
  display: flex;
  flex-direction: column;
  position: relative;
}

.product-card::before {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--gradient-shine);
  opacity: 0;
  transition: opacity var(--transition-base);
  z-index: 1;
  pointer-events: none;
}

/* Mobile Touch Feedback */
@media (max-width: 1023px) {
  .product-card:active {
    transform: scale(0.97);
    box-shadow: var(--shadow-md);
  }
}

/* Desktop Hover Effects */
@media (hover: hover) and (min-width: 1024px) {
  .product-card:hover {
    transform: translateY(-10px);
    box-shadow: var(--shadow-xl);
    border-color: var(--color-primary);
  }

  .product-card:hover::before {
    opacity: 1;
    animation: shine 0.8s ease;
  }
}

.product-image-container {
  position: relative;
  width: 100%;
  aspect-ratio: 1;
  overflow: hidden;
  background: linear-gradient(135deg, var(--bg-tertiary) 0%, var(--bg-secondary) 100%);
}

.product-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform var(--transition-slow);
}

@media (hover: hover) and (min-width: 1024px) {
  .product-card:hover .product-image {
    transform: scale(1.15) rotate(3deg);
  }
}

.product-badge {
  position: absolute;
  top: 0.65rem;
  right: 0.65rem;
  background: var(--gradient-primary);
  color: white;
  padding: 0.35rem 0.75rem;
  border-radius: var(--radius-full);
  font-size: 0.7rem;
  font-weight: 700;
  box-shadow: var(--shadow-md);
  z-index: 2;
  animation: pulse 2s infinite;
}

@media (min-width: 640px) {
  .product-badge {
    top: 0.85rem;
    right: 0.85rem;
    padding: 0.45rem 0.9rem;
    font-size: 0.75rem;
  }
}

.product-content {
  padding: 1rem;
  flex: 1;
  display: flex;
  flex-direction: column;
  position: relative;
  z-index: 2;
}

@media (min-width: 640px) {
  .product-content {
    padding: 1.25rem;
  }
}

.product-name {
  font-size: 0.95rem;
  font-weight: 700;
  color: var(--text-primary);
  margin-bottom: 0.4rem;
  display: -webkit-box;
  -webkit-line-clamp: 1;
  -webkit-box-orient: vertical;
  overflow: hidden;
  line-height: 1.3;
}

@media (min-width: 640px) {
  .product-name {
    font-size: 1.1rem;
    margin-bottom: 0.5rem;
  }
}

.product-description {
  font-size: 0.75rem;
  color: var(--text-secondary);
  margin-bottom: 0.85rem;
  flex: 1;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  line-height: 1.4;
}

@media (min-width: 640px) {
  .product-description {
    font-size: 0.85rem;
    margin-bottom: 1rem;
    line-height: 1.5;
  }
}

.product-footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.6rem;
}

.product-price {
  font-size: 1.15rem;
  font-weight: 900;
  color: var(--color-primary);
  text-shadow: 0 2px 4px rgba(255, 107, 157, 0.1);
}

@media (min-width: 640px) {
  .product-price {
    font-size: 1.35rem;
  }
}

.add-to-cart-btn {
  width: 40px;
  height: 40px;
  background: var(--gradient-primary);
  color: white;
  border: none;
  border-radius: var(--radius-full);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: var(--shadow-md);
  transition: all var(--transition-base);
  flex-shrink: 0;
  position: relative;
  overflow: hidden;
}

@media (min-width: 640px) {
  .add-to-cart-btn {
    width: 46px;
    height: 46px;
  }
}

.add-to-cart-btn::before {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--gradient-shine);
  opacity: 0;
  transition: opacity var(--transition-fast);
}

.add-to-cart-btn:active {
  transform: scale(0.9);
}

@media (hover: hover) and (min-width: 1024px) {
  .add-to-cart-btn:hover {
    transform: scale(1.15) rotate(5deg);
    box-shadow: var(--shadow-glow);
  }

  .add-to-cart-btn:hover::before {
    opacity: 1;
  }
}

.add-to-cart-btn svg {
  width: 18px;
  height: 18px;
  z-index: 1;
}

@media (min-width: 640px) {
  .add-to-cart-btn svg {
    width: 22px;
    height: 22px;
  }
}

/* ========================================
   Modals - Enhanced
======================================== */

/* Product Modal */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.75);
  backdrop-filter: blur(16px);
  z-index: 200;
  display: none;
  align-items: flex-end;
  justify-content: center;
  animation: fadeIn 0.3s ease;
}

@media (min-width: 768px) {
  .modal-overlay {
    align-items: center;
    padding: 1.5rem;
  }
}

.modal-overlay.show {
  display: flex;
}

.modal-content {
  background: var(--bg-secondary);
  border-radius: var(--radius-2xl) var(--radius-2xl) 0 0;
  max-width: 750px;
  width: 100%;
  max-height: 92vh;
  overflow-y: auto;
  box-shadow: var(--shadow-xl);
  animation: slideUpModal 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
}

@media (min-width: 768px) {
  .modal-content {
    border-radius: var(--radius-2xl);
    animation: scaleInModal 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }
}

@keyframes slideUpModal {
  from { transform: translateY(100%); }
  to { transform: translateY(0); }
}

@keyframes scaleInModal {
  from {
    opacity: 0;
    transform: scale(0.9);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.modal-close {
  position: absolute;
  top: 1.25rem;
  left: 1.25rem;
  z-index: 10;
  width: 44px;
  height: 44px;
  border-radius: var(--radius-full);
  border: none;
  background: rgba(255, 255, 255, 0.95);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: var(--shadow-md);
  transition: all var(--transition-base);
}

.modal-close:hover {
  transform: scale(1.1) rotate(90deg);
  box-shadow: var(--shadow-lg);
}

.modal-close:active {
  transform: scale(0.95);
}

body.dark .modal-close {
  background: rgba(38, 30, 51, 0.95);
  color: var(--text-primary);
}

.modal-image-container {
  position: relative;
  width: 100%;
  height: 320px;
  overflow: hidden;
  background: linear-gradient(135deg, var(--bg-tertiary) 0%, var(--bg-secondary) 100%);
}

.modal-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.modal-body {
  padding: 2rem 1.5rem;
}

.modal-title {
  font-size: 2rem;
  font-weight: 900;
  margin-bottom: 0.75rem;
  line-height: 1.3;
  color: var(--text-primary);
}

.modal-description {
  color: var(--text-secondary);
  font-size: 1.05rem;
  margin-bottom: 2rem;
  line-height: 1.7;
}

.modal-price-section {
  background: var(--bg-tertiary);
  border-radius: var(--radius-xl);
  padding: 1.5rem;
  margin-bottom: 2rem;
  border: 1px solid var(--border-color);
}

.modal-price-label {
  font-size: 0.9rem;
  color: var(--text-secondary);
  margin-bottom: 0.75rem;
  font-weight: 600;
}

.modal-price-quantity {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 1.5rem;
}

.modal-price {
  font-size: 2.25rem;
  font-weight: 900;
  color: var(--color-primary);
  text-shadow: 0 2px 8px rgba(255, 107, 157, 0.2);
}

.modal-quantity {
  display: flex;
  align-items: center;
  gap: 1rem;
  background: var(--bg-secondary);
  border-radius: var(--radius-full);
  padding: 0.5rem;
  box-shadow: var(--shadow-sm);
  border: 1px solid var(--border-color);
}

.modal-quantity-btn {
  width: 44px;
  height: 44px;
  border-radius: var(--radius-full);
  border: none;
  background: var(--bg-primary);
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--transition-base);
}

.modal-quantity-btn:hover {
  background: var(--gradient-primary);
  color: white;
  transform: scale(1.1);
}

.modal-quantity-btn:active {
  transform: scale(0.95);
}

.modal-quantity-value {
  font-weight: 700;
  font-size: 1.35rem;
  min-width: 44px;
  text-align: center;
}

.suggestions-section {
  margin-bottom: 2rem;
}

.suggestions-title {
  font-size: 1.25rem;
  font-weight: 700;
  margin-bottom: 1rem;
  display: flex;
  align-items: center;
  gap: 0.65rem;
}

.suggestions-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 1rem;
}

.suggestion-card {
  border: 1px solid var(--border-color);
  border-radius: var(--radius-lg);
  overflow: hidden;
  cursor: pointer;
  transition: all var(--transition-base);
  background: var(--bg-secondary);
}

.suggestion-card:hover {
  transform: translateY(-5px);
  box-shadow: var(--shadow-md);
  border-color: var(--color-primary);
}

.suggestion-card:active {
  transform: translateY(-3px) scale(0.98);
}

.suggestion-image {
  width: 100%;
  height: 110px;
  object-fit: cover;
  transition: transform var(--transition-slow);
}

.suggestion-card:hover .suggestion-image {
  transform: scale(1.1);
}

.suggestion-info {
  padding: 0.85rem;
}

.suggestion-name {
  font-weight: 700;
  font-size: 0.9rem;
  display: -webkit-box;
  -webkit-line-clamp: 1;
  -webkit-box-orient: vertical;
  overflow: hidden;
  margin-bottom: 0.35rem;
}

.suggestion-price {
  color: var(--color-primary);
  font-weight: 700;
  font-size: 0.9rem;
}

.modal-actions {
  display: flex;
  gap: 1rem;
}

.modal-add-btn {
  flex: 1;
  padding: 1.15rem;
  background: var(--gradient-primary);
  color: white;
  border: none;
  border-radius: var(--radius-full);
  font-family: 'Cairo', sans-serif;
  font-weight: 700;
  font-size: 1.1rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.65rem;
  box-shadow: var(--shadow-md);
  transition: all var(--transition-base);
  position: relative;
  overflow: hidden;
}

.modal-add-btn::before {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--gradient-shine);
  opacity: 0;
  transition: opacity var(--transition-fast);
}

.modal-add-btn:hover {
  transform: translateY(-3px);
  box-shadow: var(--shadow-glow);
}

.modal-add-btn:hover::before {
  opacity: 1;
}

.modal-add-btn:active {
  transform: scale(0.98);
}

.modal-add-btn svg {
  z-index: 1;
}

.modal-add-btn span {
  z-index: 1;
}

/* ========================================
   Checkout Modal - Enhanced
======================================== */
/* ================================================================ */
/* ÿ™ÿµŸÖŸäŸÖ ŸÜŸÖŸàÿ∞ÿ¨ ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ∑ŸÑÿ® ÿßŸÑŸÖÿ≠ÿ≥ŸëŸÜ - Enhanced CSS */
/* ================================================================ */

/* Checkout Modal Base */
.checkout-modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.75);
  backdrop-filter: blur(8px);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  animation: fadeIn 0.3s ease;
  overflow-y: auto;
  padding: 20px;
}

.checkout-modal-overlay.show {
  display: flex;
}

.checkout-content {
  background: white;
  border-radius: 24px;
  padding: 32px 28px;
  max-width: 650px;
  width: 100%;
  max-height: 90vh;
  overflow-y: auto;
  box-shadow: 0 24px 72px rgba(0, 0, 0, 0.3);
  animation: slideUp 0.4s ease;
  position: relative;
}

.checkout-close {
  position: absolute;
  top: 16px;
  right: 16px;
  background: #f5f5f5;
  border: none;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.3s ease;
  z-index: 10;
}

.checkout-close:hover {
  background: #ff5252;
  color: white;
  transform: rotate(90deg);
}

/* Header */
.checkout-header {
  text-align: center;
  margin-bottom: 28px;
}

.checkout-icon {
  width: 64px;
  height: 64px;
  background: linear-gradient(135deg, #4CAF50, #66BB6A);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 16px;
  color: white;
  box-shadow: 0 8px 24px rgba(76, 175, 80, 0.3);
}

.checkout-icon i {
  width: 32px;
  height: 32px;
}

.checkout-title {
  font-size: 26px;
  font-weight: 800;
  color: #1a1a1a;
  margin-bottom: 8px;
}

.checkout-subtitle {
  font-size: 15px;
  color: #666;
}

/* Order Summary */
.order-summary {
  background: #f8f9fa;
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 24px;
  border: 2px solid #e9ecef;
}

.order-summary-title {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 16px;
  font-weight: 700;
  color: #333;
  margin-bottom: 16px;
  padding-bottom: 12px;
  border-bottom: 2px solid #dee2e6;
}

.order-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 0;
  font-size: 14px;
  border-bottom: 1px solid #e9ecef;
}

.order-item:last-child {
  border-bottom: none;
  padding-top: 16px;
  margin-top: 8px;
  border-top: 2px solid #4CAF50;
  font-weight: 700;
  font-size: 16px;
  color: #4CAF50;
}

.order-item-name {
  color: #333;
  flex: 1;
}

.order-item-price {
  font-weight: 600;
  color: #4CAF50;
}

/* Delivery Options */
.delivery-options {
  margin-bottom: 24px;
}

.delivery-option {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 18px;
  border: 2px solid #e0e0e0;
  border-radius: 16px;
  margin-bottom: 12px;
  cursor: pointer;
  transition: all 0.3s ease;
  background: white;
  position: relative;
}

.delivery-option:hover {
  border-color: #4CAF50;
  background: #f1f8f4;
  transform: translateX(-4px);
  box-shadow: 0 4px 16px rgba(76, 175, 80, 0.15);
}

.delivery-option.selected {
  border-color: #4CAF50;
  background: linear-gradient(135deg, #f1f8f4, #e8f5e9);
  box-shadow: 0 4px 20px rgba(76, 175, 80, 0.25);
}

.delivery-option-icon {
  width: 48px;
  height: 48px;
  background: linear-gradient(135deg, #4CAF50, #66BB6A);
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  flex-shrink: 0;
}

.delivery-option-content {
  flex: 1;
}

.delivery-option-title {
  font-size: 16px;
  font-weight: 700;
  color: #1a1a1a;
  margin-bottom: 4px;
}

.delivery-option-desc {
  font-size: 13px;
  color: #666;
}

.selection-indicator {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  border: 2px solid #e0e0e0;
  display: flex;
  align-items: center;
  justify-content: center;
  color: transparent;
  transition: all 0.3s ease;
}

.delivery-option.selected .selection-indicator {
  background: #4CAF50;
  border-color: #4CAF50;
  color: white;
}

/* Branch Selection */
.branch-selection {
  background: #f8f9fa;
  border-radius: 16px;
  padding: 20px;
  margin: 16px 0 12px;
  border: 2px solid #e9ecef;
  animation: slideDown 0.4s ease;
}

.branch-label {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 15px;
  font-weight: 700;
  color: #333;
  margin-bottom: 16px;
}

.branches-grid {
  display: grid;
  gap: 12px;
}

.branch-card {
  display: flex;
  align-items: center;
  gap: 14px;
  padding: 16px;
  background: white;
  border: 2px solid #e0e0e0;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.3s ease;
  position: relative;
}

.branch-card:hover {
  border-color: #4CAF50;
  transform: translateX(-4px);
  box-shadow: 0 4px 16px rgba(76, 175, 80, 0.15);
}

.branch-card.selected {
  border-color: #4CAF50;
  background: linear-gradient(135deg, #f1f8f4, #e8f5e9);
  box-shadow: 0 4px 16px rgba(76, 175, 80, 0.2);
}

.branch-icon {
  width: 44px;
  height: 44px;
  background: linear-gradient(135deg, #2196F3, #42A5F5);
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  flex-shrink: 0;
}

.branch-info {
  flex: 1;
}

.branch-name {
  font-size: 16px;
  font-weight: 700;
  color: #1a1a1a;
  margin-bottom: 4px;
}

.branch-address {
  font-size: 13px;
  color: #666;
  margin-bottom: 6px;
  display: block;
}

.branch-distance {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 12px;
  color: #4CAF50;
  font-weight: 600;
}

.branch-distance i {
  width: 14px;
  height: 14px;
}

.branch-check {
  width: 26px;
  height: 26px;
  border-radius: 50%;
  border: 2px solid #e0e0e0;
  display: flex;
  align-items: center;
  justify-content: center;
  color: transparent;
  transition: all 0.3s ease;
}

.branch-card.selected .branch-check {
  background: #4CAF50;
  border-color: #4CAF50;
  color: white;
}

/* Checkout Form */
.checkout-form {
  margin-bottom: 24px;
}

.checkout-form.show {
  animation: slideDown 0.4s ease;
}

.form-group {
  margin-bottom: 20px;
}

.form-label {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 14px;
  font-weight: 600;
  color: #333;
  margin-bottom: 8px;
}

.form-label i {
  width: 18px;
  height: 18px;
  color: #4CAF50;
}

.form-input,
.form-textarea {
  width: 100%;
  padding: 14px 16px;
  border: 2px solid #e0e0e0;
  border-radius: 12px;
  font-size: 15px;
  transition: all 0.3s ease;
  font-family: inherit;
  background: white;
}

.form-input:focus,
.form-textarea:focus {
  outline: none;
  border-color: #4CAF50;
  box-shadow: 0 0 0 4px rgba(76, 175, 80, 0.1);
}

.form-textarea {
  resize: vertical;
  min-height: 80px;
}

.form-hint {
  display: block;
  margin-top: 6px;
  font-size: 12px;
  color: #999;
}

.location-btn {
  width: 100%;
  margin-top: 12px;
  padding: 14px 16px;
  background: linear-gradient(135deg, #2196F3, #42A5F5);
  border: none;
  border-radius: 12px;
  color: white;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  transition: all 0.3s ease;
}

.location-btn:hover {
  background: linear-gradient(135deg, #1976D2, #2196F3);
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(33, 150, 243, 0.3);
}

.location-btn.active {
  background: linear-gradient(135deg, #4CAF50, #66BB6A);
}

.location-btn.active:hover {
  background: linear-gradient(135deg, #45a049, #4CAF50);
}

/* Checkout Actions */
.checkout-actions {
  display: flex;
  gap: 12px;
  margin-top: 28px;
}

.checkout-action-btn {
  flex: 1;
  padding: 16px 24px;
  border: none;
  border-radius: 14px;
  font-size: 16px;
  font-weight: 700;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  transition: all 0.3s ease;
  text-transform: none;
}

.checkout-action-btn.primary {
  background: linear-gradient(135deg, #4CAF50, #66BB6A);
  color: white;
  box-shadow: 0 4px 16px rgba(76, 175, 80, 0.3);
}

.checkout-action-btn.primary:hover:not(:disabled) {
  background: linear-gradient(135deg, #45a049, #4CAF50);
  transform: translateY(-2px);
  box-shadow: 0 8px 24px rgba(76, 175, 80, 0.4);
}

.checkout-action-btn.primary:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  transform: none;
}

.checkout-action-btn.secondary {
  background: #f5f5f5;
  color: #333;
}

.checkout-action-btn.secondary:hover {
  background: #e0e0e0;
}

/* Permission Modal */
.permission-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.8);
  backdrop-filter: blur(8px);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 10001;
  animation: fadeIn 0.3s ease;
  padding: 20px;
}

.permission-modal.show {
  display: flex;
}

.permission-content {
  background: white;
  border-radius: 24px;
  padding: 40px 32px;
  max-width: 480px;
  width: 100%;
  text-align: center;
  box-shadow: 0 24px 72px rgba(0, 0, 0, 0.4);
  animation: scaleIn 0.4s ease;
}

.permission-icon {
  width: 80px;
  height: 80px;
  background: linear-gradient(135deg, #2196F3, #42A5F5);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 24px;
  color: white;
  animation: pulse 2s infinite;
}

.permission-icon i {
  width: 40px;
  height: 40px;
}

.permission-title {
  font-size: 24px;
  font-weight: 800;
  color: #1a1a1a;
  margin-bottom: 12px;
}

.permission-text {
  font-size: 15px;
  color: #666;
  line-height: 1.6;
  margin-bottom: 24px;
}

.permission-features {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin-bottom: 28px;
  flex-wrap: wrap;
}

.permission-feature {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 13px;
  color: #4CAF50;
  font-weight: 600;
}

.permission-feature i {
  width: 18px;
  height: 18px;
}

.permission-actions {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.permission-btn {
  padding: 16px 24px;
  border: none;
  border-radius: 14px;
  font-size: 15px;
  font-weight: 700;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  transition: all 0.3s ease;
}

.permission-btn.primary {
  background: linear-gradient(135deg, #2196F3, #42A5F5);
  color: white;
  box-shadow: 0 4px 16px rgba(33, 150, 243, 0.3);
}

.permission-btn.primary:hover {
  background: linear-gradient(135deg, #1976D2, #2196F3);
  transform: translateY(-2px);
  box-shadow: 0 8px 24px rgba(33, 150, 243, 0.4);
}

.permission-btn.secondary {
  background: transparent;
  color: #666;
  text-decoration: underline;
}

.permission-btn.secondary:hover {
  color: #333;
}

/* Processing Modal */
.processing-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.85);
  backdrop-filter: blur(10px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10002;
  animation: fadeIn 0.3s ease;
}

.processing-modal.hidden {
  display: none;
}

.processing-content {
  background: white;
  border-radius: 24px;
  padding: 48px 40px;
  max-width: 450px;
  width: 90%;
  text-align: center;
  box-shadow: 0 24px 72px rgba(0, 0, 0, 0.4);
  animation: scaleIn 0.4s ease;
}

.spinner-container {
  margin-bottom: 28px;
}

.spinner {
  width: 70px;
  height: 70px;
  margin: 0 auto;
  border: 5px solid #f3f3f3;
  border-top: 5px solid #4CAF50;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.processing-title {
  font-size: 24px;
  font-weight: 800;
  color: #1a1a1a;
  margin-bottom: 10px;
}

.processing-subtitle {
  font-size: 15px;
  color: #666;
  margin-bottom: 0;
}

.processing-actions {
  margin-top: 32px;
  padding-top: 28px;
  border-top: 2px solid #f0f0f0;
}

.error-icon {
  width: 60px;
  height: 60px;
  background: #ffebee;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 16px;
  color: #f44336;
}

.error-icon i {
  width: 32px;
  height: 32px;
}

.error-message {
  color: #f44336;
  font-size: 16px;
  font-weight: 700;
  margin-bottom: 8px;
}

.error-description {
  font-size: 14px;
  color: #666;
  margin-bottom: 20px;
}

.action-buttons {
  display: flex;
  gap: 12px;
  margin-bottom: 20px;
}

.btn-retry,
.btn-cancel-send {
  flex: 1;
  padding: 14px 20px;
  border: none;
  border-radius: 12px;
  font-size: 15px;
  font-weight: 700;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  transition: all 0.3s ease;
}

.btn-retry {
  background: linear-gradient(135deg, #4CAF50, #66BB6A);
  color: white;
  box-shadow: 0 4px 16px rgba(76, 175, 80, 0.3);
}

.btn-retry:hover {
  background: linear-gradient(135deg, #45a049, #4CAF50);
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
}

.btn-cancel-send {
  background: #f5f5f5;
  color: #333;
}

.btn-cancel-send:hover {
  background: #e0e0e0;
}

.help-text {
  font-size: 14px;
  color: #666;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

.help-text a {
  color: #2196F3;
  text-decoration: none;
  font-weight: 700;
}

.help-text a:hover {
  text-decoration: underline;
}

/* Confirmed Modal */
.confirmed-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.85);
  backdrop-filter: blur(10px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10002;
  animation: fadeIn 0.3s ease;
  overflow-y: auto;
  padding: 20px;
}

.confirmed-modal.hidden {
  display: none;
}

.confirmed-content {
  background: white;
  border-radius: 28px;
  padding: 48px 36px;
  max-width: 550px;
  width: 100%;
  text-align: center;
  box-shadow: 0 24px 72px rgba(0, 0, 0, 0.4);
  animation: scaleIn 0.5s ease;
  position: relative;
  margin: 20px 0;
}

.close-confirmed {
  position: absolute;
  top: 20px;
  right: 20px;
  background: #f5f5f5;
  border: none;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.3s ease;
  z-index: 1;
}

.close-confirmed:hover {
  background: #ff5252;
  color: white;
  transform: rotate(90deg);
}

/* Success Animation */
.success-animation {
  margin-bottom: 28px;
}

.success-checkmark {
  width: 90px;
  height: 90px;
  margin: 0 auto;
  position: relative;
}

.check-icon {
  width: 90px;
  height: 90px;
  position: relative;
  border-radius: 50%;
  box-sizing: content-box;
  border: 5px solid #4CAF50;
  animation: scaleIn 0.5s ease;
}

.icon-line {
  height: 6px;
  background-color: #4CAF50;
  display: block;
  border-radius: 3px;
  position: absolute;
  z-index: 10;
}

.line-tip {
  top: 48px;
  left: 16px;
  width: 28px;
  transform: rotate(45deg);
  animation: tipInPlace 0.3s ease-in 0.6s forwards;
  opacity: 0;
}

.line-long {
  top: 43px;
  right: 10px;
  width: 52px;
  transform: rotate(-45deg);
  animation: longInPlace 0.3s ease-in 0.8s forwards;
  opacity: 0;
}

.icon-circle {
  top: -5px;
  left: -5px;
  z-index: 10;
  width: 90px;
  height: 90px;
  border-radius: 50%;
  position: absolute;
  box-sizing: content-box;
  border: 5px solid rgba(76, 175, 80, 0.2);
}

.icon-fix {
  top: 8px;
  width: 6px;
  left: 30px;
  z-index: 1;
  height: 95px;
  position: absolute;
  transform: rotate(-45deg);
  background-color: white;
}

@keyframes tipInPlace {
  0% {
    width: 0;
    left: 2px;
    top: 20px;
    opacity: 1;
  }
  100% {
    width: 28px;
    left: 16px;
    top: 48px;
    opacity: 1;
  }
}

@keyframes longInPlace {
  0% {
    width: 0;
    right: 50px;
    top: 60px;
    opacity: 1;
  }
  100% {
    width: 52px;
    right: 10px;
    top: 43px;
    opacity: 1;
  }
}

.confirmed-title {
  font-size: 28px;
  font-weight: 900;
  color: #1a1a1a;
  margin-bottom: 10px;
  line-height: 1.3;
}

.confirmed-subtitle {
  font-size: 16px;
  color: #666;
  margin-bottom: 32px;
  line-height: 1.5;
}

/* Order Details Card */
.order-details-card {
  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
  border-radius: 20px;
  padding: 28px;
  margin-bottom: 28px;
  border: 3px solid #e0e0e0;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);
}

.order-id-section {
  margin-bottom: 24px;
}

.label {
  display: block;
  font-size: 12px;
  color: #999;
  margin-bottom: 10px;
  text-transform: uppercase;
  letter-spacing: 1px;
  font-weight: 700;
}

.order-id-display {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  background: white;
  padding: 16px 24px;
  border-radius: 14px;
  border: 3px solid #4CAF50;
  box-shadow: 0 4px 16px rgba(76, 175, 80, 0.15);
}

.order-id-value {
  font-size: 22px;
  font-weight: 800;
  color: #4CAF50;
  letter-spacing: 1.5px;
  font-family: 'Courier New', monospace;
}

.copy-btn {
  background: #4CAF50;
  border: none;
  width: 40px;
  height: 40px;
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.3s ease;
  color: white;
}

.copy-btn:hover {
  background: #45a049;
  transform: scale(1.15) rotate(5deg);
  box-shadow: 0 4px 16px rgba(76, 175, 80, 0.3);
}

.eta-section {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  font-size: 17px;
  color: #333;
  margin-bottom: 20px;
  font-weight: 700;
}

.eta-section i {
  width: 22px;
  height: 22px;
  color: #2196F3;
}

.status-badge {
  display: inline-flex;
  align-items: center;
  gap: 10px;
  background: linear-gradient(135deg, #4CAF50, #66BB6A);
  color: white;
  padding: 12px 24px;
  border-radius: 28px;
  font-size: 15px;
  font-weight: 700;
  box-shadow: 0 4px 16px rgba(76, 175, 80, 0.3);
}

/* Selected Branch Info */
.selected-branch-info {
  margin-top: 20px;
  padding-top: 20px;
  border-top: 2px dashed #dee2e6;
}

.branch-info-header {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 13px;
  color: #999;
  margin-bottom: 10px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  font-weight: 700;
}

.branch-info-content {
  background: white;
  padding: 14px 18px;
  border-radius: 12px;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.branch-info-content strong {
  font-size: 16px;
  color: #1a1a1a;
  font-weight: 700;
}

.branch-info-content span {
  font-size: 14px;
  color: #666;
}

/* Quick Actions */
.quick-actions {
  display: flex;
  gap: 12px;
  margin-bottom: 24px;
}

.action-btn {
  flex: 1;
  padding: 16px 20px;
  border: none;
  border-radius: 14px;
  font-size: 14px;
  font-weight: 700;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  transition: all 0.3s ease;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.action-btn.whatsapp {
  background: linear-gradient(135deg, #25D366, #128C7E);
  color: white;
}

.action-btn.whatsapp:hover {
  background: linear-gradient(135deg, #20ba59, #0e7a6e);
  transform: translateY(-3px);
  box-shadow: 0 8px 24px rgba(37, 211, 102, 0.4);
}

.action-btn.track {
  background: linear-gradient(135deg, #2196F3, #1976D2);
  color: white;
}

.action-btn.track:hover {
  background: linear-gradient(135deg, #1976D2, #1565C0);
  transform: translateY(-3px);
  box-shadow: 0 8px 24px rgba(33, 150, 243, 0.4);
}

.contact-support {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  font-size: 14px;
  color: #666;
  margin-bottom: 24px;
}

.contact-support i {
  width: 18px;
  height: 18px;
}

.contact-support a {
  color: #2196F3;
  text-decoration: none;
  font-weight: 700;
}

.contact-support a:hover {
  text-decoration: underline;
}

.btn-continue {
  width: 100%;
  padding: 18px;
  background: #f5f5f5;
  border: none;
  border-radius: 14px;
  font-size: 16px;
  font-weight: 700;
  color: #333;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
}

.btn-continue:hover {
  background: #e0e0e0;
  transform: translateY(-2px);
}

/* Tracking Modal */
.tracking-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.85);
  backdrop-filter: blur(10px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10003;
  animation: fadeIn 0.3s ease;
  padding: 20px;
}

.tracking-modal.hidden {
  display: none;
}

.tracking-content {
  background: white;
  border-radius: 24px;
  padding: 40px 32px;
  max-width: 500px;
  width: 100%;
  box-shadow: 0 24px 72px rgba(0, 0, 0, 0.4);
  animation: scaleIn 0.4s ease;
  position: relative;
}

.close-tracking {
  position: absolute;
  top: 16px;
  right: 16px;
  background: #f5f5f5;
  border: none;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.3s ease;
}

.close-tracking:hover {
  background: #ff5252;
  color: white;
  transform: rotate(90deg);
}

.tracking-header {
  text-align: center;
  margin-bottom: 28px;
}

.tracking-icon {
  width: 70px;
  height: 70px;
  background: linear-gradient(135deg, #2196F3, #42A5F5);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 20px;
  color: white;
}

.tracking-icon i {
  width: 36px;
  height: 36px;
}

.tracking-title {
  font-size: 24px;
  font-weight: 800;
  color: #1a1a1a;
  margin-bottom: 8px;
}

.tracking-subtitle {
  font-size: 14px;
  color: #666;
}

.tracking-input-group {
  display: flex;
  gap: 12px;
  margin-bottom: 24px;
}

.tracking-input {
  flex: 1;
  padding: 16px 18px;
  border: 2px solid #e0e0e0;
  border-radius: 12px;
  font-size: 15px;
  transition: all 0.3s ease;
  font-family: 'Courier New', monospace;
}

.tracking-input:focus {
  outline: none;
  border-color: #2196F3;
  box-shadow: 0 0 0 4px rgba(33, 150, 243, 0.1);
}

.btn-track {
  padding: 16px 24px;
  background: linear-gradient(135deg, #2196F3, #42A5F5);
  border: none;
  border-radius: 12px;
  color: white;
  font-size: 15px;
  font-weight: 700;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 8px;
  transition: all 0.3s ease;
  box-shadow: 0 4px 16px rgba(33, 150, 243, 0.3);
}

.btn-track:hover {
  background: linear-gradient(135deg, #1976D2, #2196F3);
  transform: translateY(-2px);
  box-shadow: 0 8px 24px rgba(33, 150, 243, 0.4);
}

.tracking-result {
  background: linear-gradient(135deg, #f8f9fa, #e9ecef);
  border-radius: 16px;
  padding: 24px;
  border-left: 5px solid #4CAF50;
}

/* Animations */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideUp {
  from {
    transform: translateY(40px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes slideDown {
  from {
    opacity: 0;
    max-height: 0;
    transform: translateY(-20px);
  }
  to {
    opacity: 1;
    max-height: 1000px;
    transform: translateY(0);
  }
}

@keyframes scaleIn {
  from {
    transform: scale(0.9);
    opacity: 0;
  }
  to {
    transform: scale(1);
    opacity: 1;
  }
}

@keyframes pulse {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.05);
  }
}

/* Responsive Design */
@media (max-width: 768px) {
  .checkout-content,
  .confirmed-content,
  .permission-content {
    padding: 28px 20px;
  }
  
  .checkout-title,
  .confirmed-title {
    font-size: 22px;
  }
  
  .quick-actions {
    flex-direction: column;
  }
  
  .action-btn {
    width: 100%;
  }
  
  .checkout-actions {
    flex-direction: column;
  }
  
  .checkout-action-btn {
    width: 100%;
  }
  
  .branches-grid {
    grid-template-columns: 1fr;
  }
  
  .permission-features {
    gap: 12px;
  }
}

/* RTL Support */
[dir="rtl"] .close-confirmed,
[dir="rtl"] .close-tracking,
[dir="rtl"] .checkout-close {
  right: auto;
  left: 16px;
}

[dir="rtl"] .order-id-display,
[dir="rtl"] .branch-card {
  flex-direction: row-reverse;
}

/* Accessibility */
button:focus-visible {
  outline: 3px solid #4CAF50;
  outline-offset: 3px;
}

/* Loading States */
.btn-retry.loading,
.btn-track.loading,
.checkout-action-btn.loading {
  pointer-events: none;
  opacity: 0.7;
  position: relative;
}

.btn-retry.loading::before,
.btn-track.loading::before,
.checkout-action-btn.loading::before {
  content: "";
  position: absolute;
  width: 18px;
  height: 18px;
  border: 3px solid rgba(255, 255, 255, 0.3);
  border-top-color: white;
  border-radius: 50%;
  animation: spin 0.6s linear infinite;
}

/* Scrollbar Styling */
.checkout-content::-webkit-scrollbar,
.confirmed-content::-webkit-scrollbar {
  width: 8px;
}

.checkout-content::-webkit-scrollbar-track,
.confirmed-content::-webkit-scrollbar-track {
  background: #f1f1f1;
  border-radius: 4px;
}

.checkout-content::-webkit-scrollbar-thumb,
.confirmed-content::-webkit-scrollbar-thumb {
  background: #4CAF50;
  border-radius: 4px;
}

.checkout-content::-webkit-scrollbar-thumb:hover,
.confirmed-content::-webkit-scrollbar-thumb:hover {
  background: #45a049;
}

/* ========================================
   Cart Components
======================================== */

/* Cart Modal (Mobile) */
/*
.cart-modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.75);
  backdrop-filter: blur(16px);
  z-index: 150;
  display: none;
  align-items: flex-end;
  animation: fadeIn 0.3s ease;
}

.cart-modal-overlay.show {
  display: flex;
}

.cart-modal {
  background: var(--bg-secondary);
  border-radius: var(--radius-2xl) var(--radius-2xl) 0 0;
  width: 100%;
  max-height: 87vh;
  box-shadow: var(--shadow-xl);
  animation: slideUpModal 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  display: flex;
  flex-direction: column;
}

.cart-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1.5rem 1.75rem;
  border-bottom: 1px solid var(--border-color);
}

.cart-title {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  font-size: 1.5rem;
  font-weight: 900;
}

.cart-badge {
  background: var(--color-primary);
  color: white;
  padding: 0.3rem 0.75rem;
  border-radius: var(--radius-full);
  font-size: 0.9rem;
  font-weight: 700;
  min-width: 26px;
  text-align: center;
  box-shadow: var(--shadow-sm);
}

.cart-close {
  width: 40px;
  height: 40px;
  border-radius: var(--radius-full);
  border: none;
  background: var(--bg-tertiary);
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--transition-base);
}

.cart-close:hover {
  transform: scale(1.1) rotate(90deg);
  background: rgba(255, 107, 157, 0.15);
}

.cart-close:active {
  transform: scale(0.95);
}

.cart-items {
  flex: 1;
  overflow-y: auto;
  padding: 1.25rem 1.75rem;
}

.cart-empty {
  text-align: center;
  padding: 3.5rem 1.5rem;
  color: var(--text-secondary);
}

.cart-empty-icon {
  width: 90px;
  height: 90px;
  margin: 0 auto 1.25rem;
  opacity: 0.25;
  color: var(--text-secondary);
}

.cart-item {
  background: var(--bg-tertiary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-lg);
  padding: 1.25rem;
  margin-bottom: 1rem;
  animation: slideInRight 0.3s ease;
  transition: all var(--transition-base);
}

.cart-item:hover {
  box-shadow: var(--shadow-sm);
}

@keyframes slideInRight {
  from {
    opacity: 0;
    transform: translateX(50px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.cart-item-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  margin-bottom: 1rem;
  gap: 1rem;
}

.cart-item-name {
  font-weight: 700;
  font-size: 1.05rem;
  flex: 1;
  line-height: 1.4;
}

.cart-item-remove {
  width: 36px;
  height: 36px;
  border-radius: var(--radius-full);
  border: none;
  background: transparent;
  color: var(--color-destructive);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--transition-base);
  flex-shrink: 0;
}

.cart-item-remove:hover {
  background: rgba(255, 107, 107, 0.15);
  transform: scale(1.1);
}

.cart-item-remove:active {
  transform: scale(0.95);
}

.cart-item-footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.quantity-controls {
  display: flex;
  align-items: center;
  gap: 0.65rem;
  background: var(--bg-secondary);
  border-radius: var(--radius-full);
  padding: 0.35rem;
  box-shadow: var(--shadow-sm);
  border: 1px solid var(--border-color);
}

.quantity-btn {
  width: 36px;
  height: 36px;
  border-radius: var(--radius-full);
  border: none;
  background: transparent;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--transition-base);
}

.quantity-btn:hover {
  background: rgba(255, 107, 157, 0.12);
  color: var(--color-primary);
  transform: scale(1.1);
}

.quantity-btn:active {
  transform: scale(0.95);
}

.quantity-value {
  font-weight: 700;
  font-size: 1.05rem;
  min-width: 36px;
  text-align: center;
}

.cart-item-price {
  font-size: 1.25rem;
  font-weight: 900;
  color: var(--color-primary);
}

.cart-footer {
  padding: 1.5rem 1.75rem;
  border-top: 1px solid var(--border-color);
  background: var(--bg-tertiary);
}

.cart-footer.hidden {
  display: none;
}

.cart-total-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 1.25rem;
}

.cart-total-label {
  font-size: 1.2rem;
  font-weight: 600;
  color: var(--text-secondary);
}

.cart-total-price {
  font-size: 2rem;
  font-weight: 900;
  color: var(--color-primary);
  text-shadow: 0 2px 8px rgba(255, 107, 157, 0.2);
}

.checkout-btn {
  width: 100%;
  padding: 1.15rem;
  background: var(--gradient-secondary);
  color: white;
  border: none;
  border-radius: var(--radius-full);
  font-family: 'Cairo', sans-serif;
  font-weight: 700;
  font-size: 1.15rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.65rem;
  box-shadow: var(--shadow-md);
  transition: all var(--transition-base);
}

.checkout-btn:hover {
  transform: translateY(-3px);
  box-shadow: var(--shadow-glow);
}

.checkout-btn:active {
  transform: scale(0.98);
}

/* Desktop Cart Sidebar */
@media (min-width: 1024px) {
  .cart-sidebar-desktop {
    display: block;
    position: sticky;
    top: calc(var(--header-height) + 1.5rem);
    height: fit-content;
    max-height: calc(100vh - var(--header-height) - 3rem);
  }

  .cart-sidebar {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-xl);
    padding: 1.75rem;
    box-shadow: var(--shadow-lg);
    display: flex;
    flex-direction: column;
  }
}

/* ========================================
   Toast Notification - Enhanced Position
======================================== */
/*
.toast {
  position: fixed;
  top: calc(var(--header-height) + 1rem);
  left: 50%;
  transform: translateX(-50%) translateY(-200%);
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-xl);
  padding: 1.15rem 1.5rem;
  box-shadow: var(--shadow-xl);
  z-index: 250;
  display: flex;
  align-items: center;
  gap: 1rem;
  transition: transform var(--transition-base);
  min-width: 340px;
  max-width: 480px;
  backdrop-filter: blur(20px) saturate(180%);
}

body.dark .toast {
  background: rgba(37, 30, 51, 0.95);
}

.toast.show {
  transform: translateX(-50%) translateY(0);
  animation: toastSlideDown 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

@keyframes toastSlideDown {
  0% { 
    transform: translateX(-50%) translateY(-200%);
    opacity: 0;
  }
  60% { 
    transform: translateX(-50%) translateY(15px);
    opacity: 1;
  }
  80% { 
    transform: translateX(-50%) translateY(-5px);
  }
  100% { 
    transform: translateX(-50%) translateY(0);
    opacity: 1;
  }
}

.toast-icon {
  width: 48px;
  height: 48px;
  background: var(--gradient-primary);
  border-radius: var(--radius-full);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  box-shadow: var(--shadow-md);
  animation: toastIconPop 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

@keyframes toastIconPop {
  0% { transform: scale(0) rotate(-180deg); }
  50% { transform: scale(1.2) rotate(10deg); }
  100% { transform: scale(1) rotate(0deg); }
}

.toast-icon svg {
  width: 24px;
  height: 24px;
  color: white;
}

.toast.success .toast-icon {
  background: var(--gradient-secondary);
}

.toast.error .toast-icon {
  background: linear-gradient(135deg, #FF6B6B 0%, #FF5252 100%);
}

.toast-content {
  flex: 1;
}

.toast-title {
  font-weight: 700;
  font-size: 1rem;
  margin-bottom: 0.25rem;
  color: var(--text-primary);
}

.toast-description {
  font-size: 0.85rem;
  color: var(--text-secondary);
  line-height: 1.4;
}

/*

.toast-close {
  width: 32px;
  height: 32px;
  border-radius: var(--radius-full);
  border: none;
  background: rgba(255, 107, 157, 0.1);
  color: var(--text-secondary);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--transition-base);
  flex-shrink: 0;
  margin-right: -0.5rem;
}

.toast-close:hover {
  background: rgba(255, 107, 157, 0.2);
  transform: scale(1.1);
}

.toast-close svg {
  width: 16px;
  height: 16px;
}


@media (max-width: 640px) {
  .toast {
    min-width: 90%;
    max-width: 90%;
    top: calc(var(--header-height) + 0.75rem);
    padding: 1rem 1.25rem;
  }
  
  .toast-icon {
    width: 44px;
    height: 44px;
  }
  
  .toast-title {
    font-size: 0.95rem;
  }
  
  .toast-description {
    font-size: 0.8rem;
  }
}*/
/* ========================================
   Cart Components - Optimized & Responsive
======================================== */

/* ========================================
   Cart Modal (Mobile) - Overlay
======================================== */
.cart-modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.75);
  backdrop-filter: blur(16px);
  z-index: 150;
  display: none;
  align-items: flex-end;
  animation: fadeIn 0.3s ease;
}

.cart-modal-overlay.show {
  display: flex;
}

/* ========================================
   Cart Modal (Mobile) - Container
======================================== */
.cart-modal {
  background: var(--bg-secondary);
  border-radius: var(--radius-2xl) var(--radius-2xl) 0 0;
  width: 100%;
  max-height: 85vh; /* ‚úÖ ŸÉÿßŸÜ 87vh - ÿ£ÿµÿ∫ÿ± ÿ¥ŸàŸäÿ© */
  box-shadow: var(--shadow-xl);
  animation: slideUpModal 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  display: flex;
  flex-direction: column;
}

/* ========================================
   Cart Header - Mobile & Desktop
======================================== */
.cart-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1.25rem 1.5rem; /* ‚úÖ ŸÉÿßŸÜ 1.5rem 1.75rem */
  border-bottom: 1px solid var(--border-color);
  flex-shrink: 0; /* ‚úÖ ÿ¨ÿØŸäÿØ - ÿπÿ¥ÿßŸÜ ŸÖŸäÿ™ŸÇŸÑÿµÿ¥ */
}

.cart-title {
  display: flex;
  align-items: center;
  gap: 0.65rem; /* ‚úÖ ŸÉÿßŸÜ 0.75rem */
  font-size: 1.25rem; /* ‚úÖ ŸÉÿßŸÜ 1.5rem */
  font-weight: 900;
}

.cart-title svg {
  width: 22px; /* ‚úÖ ÿ¨ÿØŸäÿØ */
  height: 22px; /* ‚úÖ ÿ¨ÿØŸäÿØ */
}

.cart-badge {
  background: var(--color-primary);
  color: white;
  padding: 0.25rem 0.65rem; /* ‚úÖ ŸÉÿßŸÜ 0.3rem 0.75rem */
  border-radius: var(--radius-full);
  font-size: 0.8rem; /* ‚úÖ ŸÉÿßŸÜ 0.9rem */
  font-weight: 700;
  min-width: 24px; /* ‚úÖ ŸÉÿßŸÜ 26px */
  text-align: center;
  box-shadow: var(--shadow-sm);
}

.cart-close {
  width: 36px; /* ‚úÖ ŸÉÿßŸÜ 40px */
  height: 36px; /* ‚úÖ ŸÉÿßŸÜ 40px */
  border-radius: var(--radius-full);
  border: none;
  background: var(--bg-tertiary);
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--transition-base);
}

.cart-close svg {
  width: 18px; /* ‚úÖ ÿ¨ÿØŸäÿØ */
  height: 18px; /* ‚úÖ ÿ¨ÿØŸäÿØ */
}

.cart-close:hover {
  transform: scale(1.1) rotate(90deg);
  background: rgba(255, 107, 157, 0.15);
}

.cart-close:active {
  transform: scale(0.95);
}

/* ========================================
   Cart Items Container
======================================== */
.cart-items {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  padding: 1rem 1.25rem; /* ‚úÖ ŸÉÿßŸÜ 1.25rem 1.75rem */
  min-height: 0; /* ‚úÖ ÿ¨ÿØŸäÿØ - ŸÖŸáŸÖ ŸÑŸÑŸÄ overflow */
}

/* Custom Scrollbar */
.cart-items::-webkit-scrollbar {
  width: 5px; /* ‚úÖ ÿ¨ÿØŸäÿØ */
}

.cart-items::-webkit-scrollbar-track {
  background: transparent;
}

.cart-items::-webkit-scrollbar-thumb {
  background: var(--border-color);
  border-radius: var(--radius-full);
}

.cart-items::-webkit-scrollbar-thumb:hover {
  background: var(--text-muted);
}

/* ========================================
   Cart Empty State
======================================== */
.cart-empty {
  text-align: center;
  padding: 2.5rem 1.25rem; /* ‚úÖ ŸÉÿßŸÜ 3.5rem 1.5rem */
  color: var(--text-secondary);
}

.cart-empty-icon {
  width: 70px; /* ‚úÖ ŸÉÿßŸÜ 90px */
  height: 70px; /* ‚úÖ ŸÉÿßŸÜ 90px */
  margin: 0 auto 1rem; /* ‚úÖ ŸÉÿßŸÜ 1.25rem */
  opacity: 0.25;
  color: var(--text-secondary);
  display: flex; /* ‚úÖ ÿ¨ÿØŸäÿØ */
  align-items: center; /* ‚úÖ ÿ¨ÿØŸäÿØ */
  justify-content: center; /* ‚úÖ ÿ¨ÿØŸäÿØ */
}

.cart-empty-icon svg {
  width: 36px; /* ‚úÖ ÿ¨ÿØŸäÿØ */
  height: 36px; /* ‚úÖ ÿ¨ÿØŸäÿØ */
}

/* ========================================
   Cart Item Card
======================================== */
.cart-item {
  background: var(--bg-tertiary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-lg);
  padding: 0.9rem; /* ‚úÖ ŸÉÿßŸÜ 1.25rem */
  margin-bottom: 0.85rem; /* ‚úÖ ŸÉÿßŸÜ 1rem */
  animation: slideInRight 0.3s ease;
  transition: all var(--transition-base);
}

.cart-item:last-child {
  margin-bottom: 0; /* ‚úÖ ÿ¨ÿØŸäÿØ */
}

.cart-item:hover {
  box-shadow: var(--shadow-sm);
  transform: translateY(-1px); /* ‚úÖ ÿ¨ÿØŸäÿØ */
}

@keyframes slideInRight {
  from {
    opacity: 0;
    transform: translateX(50px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

/* ========================================
   Cart Item Header
======================================== */
.cart-item-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  margin-bottom: 0.75rem; /* ‚úÖ ŸÉÿßŸÜ 1rem */
  gap: 0.75rem; /* ‚úÖ ŸÉÿßŸÜ 1rem */
}

.cart-item-name {
  font-weight: 700;
  font-size: 0.95rem; /* ‚úÖ ŸÉÿßŸÜ 1.05rem */
  flex: 1;
  line-height: 1.4;
  color: var(--text-primary);
}

.cart-item-remove {
  width: 30px; /* ‚úÖ ŸÉÿßŸÜ 36px */
  height: 30px; /* ‚úÖ ŸÉÿßŸÜ 36px */
  border-radius: var(--radius-full);
  border: none;
  background: transparent;
  color: var(--color-destructive);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--transition-base);
  flex-shrink: 0;
}

.cart-item-remove svg {
  width: 16px; /* ‚úÖ ÿ¨ÿØŸäÿØ */
  height: 16px; /* ‚úÖ ÿ¨ÿØŸäÿØ */
}

.cart-item-remove:hover {
  background: rgba(255, 107, 107, 0.15);
  transform: scale(1.1);
}

.cart-item-remove:active {
  transform: scale(0.95);
}

/* ========================================
   Cart Item Footer & Quantity
======================================== */
.cart-item-footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.75rem; /* ‚úÖ ÿ¨ÿØŸäÿØ */
}

.quantity-controls {
  display: flex;
  align-items: center;
  gap: 0.5rem; /* ‚úÖ ŸÉÿßŸÜ 0.65rem */
  background: var(--bg-secondary);
  border-radius: var(--radius-full);
  padding: 0.3rem; /* ‚úÖ ŸÉÿßŸÜ 0.35rem */
  box-shadow: var(--shadow-sm);
  border: 1px solid var(--border-color);
}

.quantity-btn {
  width: 32px; /* ‚úÖ ŸÉÿßŸÜ 36px */
  height: 32px; /* ‚úÖ ŸÉÿßŸÜ 36px */
  border-radius: var(--radius-full);
  border: none;
  background: transparent;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--transition-base);
}

.quantity-btn svg {
  width: 16px; /* ‚úÖ ÿ¨ÿØŸäÿØ */
  height: 16px; /* ‚úÖ ÿ¨ÿØŸäÿØ */
}

.quantity-btn:hover {
  background: rgba(255, 107, 157, 0.12);
  color: var(--color-primary);
  transform: scale(1.1);
}

.quantity-btn:active {
  transform: scale(0.95);
}

.quantity-value {
  font-weight: 700;
  font-size: 0.95rem; /* ‚úÖ ŸÉÿßŸÜ 1.05rem */
  min-width: 32px; /* ‚úÖ ŸÉÿßŸÜ 36px */
  text-align: center;
  color: var(--text-primary);
}

.cart-item-price {
  font-size: 1.1rem; /* ‚úÖ ŸÉÿßŸÜ 1.25rem */
  font-weight: 900;
  color: var(--color-primary);
  white-space: nowrap; /* ‚úÖ ÿ¨ÿØŸäÿØ */
}

/* ========================================
   Cart Footer (Checkout Area)
======================================== */
.cart-footer {
  padding: 1.25rem 1.5rem; /* ‚úÖ ŸÉÿßŸÜ 1.5rem 1.75rem */
  border-top: 1px solid var(--border-color);
  background: var(--bg-tertiary);
  flex-shrink: 0; /* ‚úÖ ÿ¨ÿØŸäÿØ */
}

.cart-footer.hidden {
  display: none;
}

.cart-total-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 1rem; /* ‚úÖ ŸÉÿßŸÜ 1.25rem */
  padding: 0.85rem 1rem; /* ‚úÖ ÿ¨ÿØŸäÿØ */
  background: var(--bg-secondary); /* ‚úÖ ÿ¨ÿØŸäÿØ */
  border-radius: var(--radius-md); /* ‚úÖ ÿ¨ÿØŸäÿØ */
  border: 1px solid var(--border-color); /* ‚úÖ ÿ¨ÿØŸäÿØ */
}

.cart-total-label {
  font-size: 1.05rem; /* ‚úÖ ŸÉÿßŸÜ 1.2rem */
  font-weight: 700; /* ‚úÖ ŸÉÿßŸÜ 600 */
  color: var(--text-primary); /* ‚úÖ ŸÉÿßŸÜ text-secondary */
}

.cart-total-price {
  font-size: 1.5rem; /* ‚úÖ ŸÉÿßŸÜ 2rem */
  font-weight: 900;
  color: var(--color-primary);
  text-shadow: 0 2px 8px rgba(255, 107, 157, 0.2);
}

.checkout-btn {
  width: 100%;
  padding: 1rem; /* ‚úÖ ŸÉÿßŸÜ 1.15rem */
  background: var(--gradient-primary); /* ‚úÖ ŸÉÿßŸÜ gradient-secondary */
  color: white;
  border: none;
  border-radius: var(--radius-full);
  font-family: 'Cairo', sans-serif;
  font-weight: 700;
  font-size: 1.05rem; /* ‚úÖ ŸÉÿßŸÜ 1.15rem */
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.6rem; /* ‚úÖ ŸÉÿßŸÜ 0.65rem */
  box-shadow: var(--shadow-md);
  transition: all var(--transition-base);
}

.checkout-btn svg {
  width: 20px; /* ‚úÖ ÿ¨ÿØŸäÿØ */
  height: 20px; /* ‚úÖ ÿ¨ÿØŸäÿØ */
}

.checkout-btn:hover {
  transform: translateY(-2px); /* ‚úÖ ŸÉÿßŸÜ -3px */
  box-shadow: var(--shadow-glow);
}

.checkout-btn:active {
  transform: scale(0.98);
}

/* ========================================
   Desktop Cart Sidebar
======================================== */
@media (min-width: 1024px) {
  .cart-modal-overlay {
    display: none !important; /* ‚úÖ ÿ•ÿÆŸÅÿßÿ° ÿßŸÑŸÄ modal ŸÅŸä Desktop */
  }

  .cart-sidebar-desktop {
    display: block;
    position: sticky;
    top: calc(var(--header-height) + 1.5rem);
    height: fit-content;
    max-height: calc(100vh - var(--header-height) - 3rem);
    width: 380px; /* ‚úÖ ÿ¨ÿØŸäÿØ - ÿπÿ±ÿ∂ ÿ´ÿßÿ®ÿ™ */
  }

  .cart-sidebar {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-xl);
    padding: 1.5rem; /* ‚úÖ ŸÉÿßŸÜ 1.75rem */
    box-shadow: var(--shadow-lg);
    display: flex;
    flex-direction: column;
    height: 100%;
  }

  /* ‚úÖ ÿ™ÿ≠ÿ≥ŸäŸÜÿßÿ™ ŸÑŸÑŸÄ Desktop */
  .cart-header {
    padding: 0 0 1.25rem 0;
  }

  .cart-title {
    font-size: 1.35rem;
  }

  .cart-items {
    padding: 1.25rem 0;
    max-height: calc(100vh - var(--header-height) - 15rem);
  }

  .cart-footer {
    padding: 1.25rem 0 0 0;
  }

  .cart-item {
    padding: 1rem;
  }
}

/* ========================================
   Responsive - Small Screens
======================================== */
@media (max-width: 480px) {
  .cart-header {
    padding: 1rem 1.25rem;
  }

  .cart-title {
    font-size: 1.15rem;
  }

  .cart-items {
    padding: 0.85rem 1rem;
  }

  .cart-item {
    padding: 0.75rem;
    margin-bottom: 0.75rem;
  }

  .cart-item-name {
    font-size: 0.9rem;
  }

  .cart-item-price {
    font-size: 1rem;
  }

  .quantity-btn {
    width: 28px;
    height: 28px;
  }

  .quantity-value {
    font-size: 0.9rem;
    min-width: 28px;
  }

  .cart-total-label {
    font-size: 1rem;
  }

  .cart-total-price {
    font-size: 1.35rem;
  }

  .checkout-btn {
    padding: 0.9rem;
    font-size: 1rem;
  }

  .cart-footer {
    padding: 1rem 1.25rem;
  }
}

/* ========================================
   Animations
======================================== */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideUpModal {
  from {
    opacity: 0;
    transform: translateY(100%);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ========================================
   Hidden Class
======================================== */
.hidden {
  display: none !important;
}
*/
.toast {
  position: fixed;
  top: 2rem;
  left: 50%;
  transform: translateX(-50%) translateY(-200%);
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-xl);
  padding: 1.15rem 1.5rem;
  box-shadow: var(--shadow-xl);
  z-index: 9999;
  display: flex;
  align-items: center;
  gap: 1rem;
  transition: transform var(--transition-base);
  min-width: 340px;
  max-width: 480px;
  backdrop-filter: blur(20px) saturate(180%);
}

body.dark .toast {
  background: rgba(37, 30, 51, 0.95);
}

.toast.show {
  transform: translateX(-50%) translateY(0);
  animation: toastSlideDown 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

@keyframes toastSlideDown {
  0% { 
    transform: translateX(-50%) translateY(-100px);
    opacity: 0;
  }
  60% { 
    transform: translateX(-50%) translateY(10px);
    opacity: 1;
  }
  80% { 
    transform: translateX(-50%) translateY(-2px);
  }
  100% { 
    transform: translateX(-50%) translateY(0);
    opacity: 1;
  }
}

.toast-icon {
  width: 48px;
  height: 48px;
  background: var(--gradient-primary);
  border-radius: var(--radius-full);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  box-shadow: var(--shadow-md);
  animation: toastIconPop 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

@keyframes toastIconPop {
  0% { transform: scale(0) rotate(-180deg); }
  50% { transform: scale(1.2) rotate(10deg); }
  100% { transform: scale(1) rotate(0deg); }
}

.toast-icon svg {
  width: 24px;
  height: 24px;
  color: white;
}

.toast.success .toast-icon {
  background: var(--gradient-secondary);
}

.toast.error .toast-icon {
  background: linear-gradient(135deg, #FF6B6B 0%, #FF5252 100%);
}

.toast.warning .toast-icon {
  background: linear-gradient(135deg, #FFA726 0%, #FF9800 100%);
}

.toast.info .toast-icon {
  background: linear-gradient(135deg, #42A5F5 0%, #2196F3 100%);
}

.toast-content {
  flex: 1;
}

.toast-title {
  font-weight: 700;
  font-size: 1rem;
  margin-bottom: 0.25rem;
  color: var(--text-primary);
}

.toast-description {
  font-size: 0.85rem;
  color: var(--text-secondary);
  line-height: 1.4;
}

.toast-close {
  width: 32px;
  height: 32px;
  border-radius: var(--radius-full);
  border: none;
  background: rgba(255, 107, 157, 0.1);
  color: var(--text-secondary);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--transition-base);
  flex-shrink: 0;
  margin-right: -0.5rem;
}

.toast-close:hover {
  background: rgba(255, 107, 157, 0.2);
  transform: scale(1.1);
}

.toast-close svg {
  width: 16px;
  height: 16px;
}

/* Mobile Toast Adjustments */
@media (max-width: 640px) {
  .toast {
    min-width: 90%;
    max-width: 90%;
    top: 1rem;
    padding: 1rem 1.25rem;
    bottom: auto;
  }
  
  .toast-icon {
    width: 44px;
    height: 44px;
  }
  
  .toast-title {
    font-size: 0.95rem;
  }
  
  .toast-description {
    font-size: 0.8rem;
  }
}

/* Extra Small Screens */
@media (max-width: 480px) {
  .toast {
    top: 0.75rem;
    min-width: 95%;
    max-width: 95%;
  }
}

/* Large Screens - Right Side Appearance */
@media (min-width: 1024px) {
  .toast {
    left: auto;
    right: 2rem;
    transform: translateX(200%) translateY(0);
  }
  
  .toast.show {
    transform: translateX(0) translateY(0);
    animation: toastSlideInRight 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  }
  
  @keyframes toastSlideInRight {
    0% { 
      transform: translateX(200%);
      opacity: 0;
    }
    60% { 
      transform: translateX(-10px);
      opacity: 1;
    }
    80% { 
      transform: translateX(5px);
    }
    100% { 
      transform: translateX(0);
      opacity: 1;
    }
  }
}

/* Toast Types with Border Colors */
.toast.success {
  border-left: 4px solid #4CAF50;
  background: rgba(76, 175, 80, 0.05);
}

.toast.error {
  border-left: 4px solid #f44336;
  background: rgba(244, 67, 54, 0.05);
}

.toast.warning {
  border-left: 4px solid #FF9800;
  background: rgba(255, 152, 0, 0.05);
}

.toast.info {
  border-left: 4px solid #2196F3;
  background: rgba(33, 150, 243, 0.05);
}

body.dark .toast.success {
  background: rgba(76, 175, 80, 0.1);
}

body.dark .toast.error {
  background: rgba(244, 67, 54, 0.1);
}

body.dark .toast.warning {
  background: rgba(255, 152, 0, 0.1);
}

body.dark .toast.info {
  background: rgba(33, 150, 243, 0.1);
}

/* ========================================
   Permission Modal
======================================== */


/* ========================================
   Info Sections (About & Contact)
======================================== */
.info-section {
  padding: 2rem 1rem;
}

.info-card {
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-xl);
  padding: 2rem;
  margin-bottom: 2rem;
  box-shadow: var(--shadow-md);
  animation: fadeInUp 0.5s ease;
  transition: all var(--transition-base);
}

.info-card:hover {
  transform: translateY(-5px);
  box-shadow: var(--shadow-lg);
}

.info-card-title {
  font-size: 1.5rem;
  font-weight: 900;
  margin-bottom: 1.25rem;
  display: flex;
  align-items: center;
  gap: 0.75rem;
  color: var(--text-primary);
}

.info-card-title svg {
  width: 28px;
  height: 28px;
  color: var(--color-primary);
}

.info-card-content {
  color: var(--text-secondary);
  line-height: 1.8;
  font-size: 1rem;
}

.social-links {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 1.25rem;
  margin-top: 1.5rem;
}

.social-link {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1.25rem;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-lg);
  text-decoration: none;
  color: var(--text-primary);
  font-weight: 600;
  transition: all var(--transition-base);
  position: relative;
  overflow: hidden;
}

.social-link::before {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--gradient-primary);
  opacity: 0;
  transition: opacity var(--transition-base);
}

.social-link:hover {
  transform: translateY(-5px);
  box-shadow: var(--shadow-md);
}

.social-link:hover::before {
  opacity: 0.08;
}

.social-link:active {
  transform: translateY(-3px) scale(0.98);
}

.social-icon {
  width: 48px;
  height: 48px;
  background: var(--gradient-primary);
  border-radius: var(--radius-md);
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  box-shadow: var(--shadow-sm);
  z-index: 1;
}

.social-icon svg {
  width: 22px;
  height: 22px;
}

.social-link span {
  z-index: 1;
}

/* ========================================
   No Results State
======================================== */
.no-results {
  text-align: center;
  padding: 4rem 1.5rem;
  grid-column: 1 / -1;
  animation: fadeIn 0.5s ease;
}

.no-results-icon {
  font-size: 5rem;
  margin-bottom: 1.5rem;
  opacity: 0.3;
}

.no-results-title {
  font-size: 1.5rem;
  font-weight: 700;
  margin-bottom: 0.75rem;
  color: var(--text-primary);
}

.no-results-text {
  color: var(--text-secondary);
  font-size: 1rem;
}

/* ========================================
   Animations
======================================== */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes fadeInDown {
  from {
    opacity: 0;
    transform: translateY(-30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes pulse {
  0%, 100% {
    transform: scale(1);
    box-shadow: var(--shadow-md);
  }
  50% {
    transform: scale(1.05);
    box-shadow: var(--shadow-glow);
  }
}

/* ========================================
   Scrollbar Styling
======================================== */
::-webkit-scrollbar {
  width: 10px;
  height: 10px;
}

::-webkit-scrollbar-track {
  background: var(--bg-tertiary);
  border-radius: var(--radius-sm);
}

::-webkit-scrollbar-thumb {
  background: var(--gradient-primary);
  border-radius: var(--radius-sm);
}

::-webkit-scrollbar-thumb:hover {
  background: var(--color-primary-dark);
}

/* ========================================
   Utility Classes
======================================== */
.hidden {
  display: none !important;
}

.text-center {
  text-align: center;
}

/* ========================================
   Responsive Adjustments
======================================== */
@media (max-width: 640px) {
  :root {
    --header-height: 80px;
  }

  .header.scrolled {
    height: 64px;
  }

  .logo-icon {
    padding: 0.75rem;
  }

  .logo-icon svg {
    width: 32px;
    height: 32px;
  }

  .logo-text h1 {
    font-size: 1.5rem;
  }

  .logo-text p {
    font-size: 0.75rem;
  }

  .lang-toggle, .theme-toggle {
    width: 44px;
    height: 44px;
  }

  .hero-stats {
    gap: 1.5rem;
  }

  .stat-value {
    font-size: 1.75rem;
  }

  .stat-label {
    font-size: 0.75rem;
  }

  .social-links {
    grid-template-columns: 1fr;
  }

  .delivery-options {
    grid-template-columns: 1fr;
  }

  .checkout-actions {
    flex-direction: column;
  }

  .modal-image-container {
    height: 260px;
  }

  .modal-body {
    padding: 1.5rem 1.25rem;
  }

  .modal-title {
    font-size: 1.5rem;
  }
}

@media (min-width: 768px) {
  .categories-scroll {
    padding: 0 1.5rem 0.5rem;
  }

  .products-container {
    padding: 0 1.5rem 2.5rem;
  }
}

@media (min-width: 1024px) {
  .main-wrapper {
    padding-top: calc(var(--header-height) + 2rem);
  }

  body {
    padding-bottom: 0;
  }
}

@media (min-width: 1440px) {
  .header-content {
    padding: 1.25rem 3rem;
  }

  .products-grid {
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 2rem;
  }
}

/* ========================================
   Print Styles
======================================== */
@media print {
  .header,
  .bottom-nav,
  .cart-sidebar-desktop,
  .search-section,
  .categories-section,
  .animated-background {
    display: none !important;
  }

  body {
    padding: 0;
    background: white;
  }

  .product-card {
    break-inside: avoid;
    border: 1px solid #ddd;
  }

  .main-wrapper {
    padding: 0;
  }
}

/* ========================================
   Accessibility Improvements
======================================== */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Focus Styles */
button:focus-visible,
input:focus-visible,
a:focus-visible {
  outline: 3px solid var(--color-primary);
  outline-offset: 2px;
}

/* High Contrast Mode Support */
@media (prefers-contrast: high) {
  :root {
    --border-color: rgba(255, 107, 157, 0.3);
  }

  .product-card,
  .info-card,
  .cart-item {
    border-width: 2px;
  }
}
  </style>
</head>

<body>
  <!-- ÿÆŸÑŸÅŸäÿ© ÿØŸäŸÜÿßŸÖŸäŸÉŸäÿ© -->
  <div class="animated-background">
    <div class="floating-shape shape-1"></div>
    <div class="floating-shape shape-2"></div>
    <div class="floating-shape shape-3"></div>
  </div>

  <!-- ŸÖÿ≠ÿ™ŸàŸâ ÿßŸÑÿµŸÅÿ≠ÿ© -->
  <div class="page-content">
    <!-- Toast Notification -->
    <div class="toast" id="toast">
      <div class="toast-icon">
        <i data-lucide="check-circle-2"></i>
      </div>
      <div class="toast-content">
        <div class="toast-title" id="toast-title">ÿ™ŸÖÿ™ ÿßŸÑÿ•ÿ∂ÿßŸÅÿ©!</div>
        <div class="toast-description" id="toast-description">ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨ ŸÑŸÑÿ≥ŸÑÿ©</div>
      </div>
    </div>

    <!-- Header -->
    <header class="header" id="header">
      <div class="header-content">
        <div class="header-logo" onclick="scrollToTop()">
          <div class="logo-icon">
           <!--  <i data-lucide="ice-cream"></i> -->
           <img 
            src="https://i.ibb.co/C5zs6WZ6/546595638-767747059559727-9006561812810172332-n-1-1.jpg" 
            alt="Logo" 
            style="width: 70px; height: 70px; border-radius: 50%; object-fit: cover;"
          >
          </div>
          <div class="logo-text">
            <h1 id="header-title">ÿ≥ŸàŸÅÿ™ ŸÉÿ±ŸäŸÖ</h1>
            <p id="header-subtitle">ÿ£ÿ∑Ÿäÿ® ÿ¢Ÿäÿ≥ ŸÉÿ±ŸäŸÖ ŸÅŸä ÿßŸÑŸÖÿØŸäŸÜÿ© üç¶</p>
          </div>
        </div>
        <div class="header-actions">
          <button class="lang-toggle" onclick="toggleLanguage()" id="langToggle">EN</button>
          <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle theme">
            <i data-lucide="moon" id="theme-icon"></i>
          </button>
        </div>
      </div>
    </header>

    <!-- Bottom Navigation (Mobile) -->
    <nav class="bottom-nav">
      <div class="bottom-nav-content">
        <div class="nav-item active" onclick="switchTab('menu')">
          <i data-lucide="utensils"></i>
          <span id="nav-menu">ÿßŸÑŸÖŸÜŸäŸà</span>
        </div>
        <div class="nav-item" onclick="openCartModal()">
          <i data-lucide="shopping-cart"></i>
          <span id="nav-cart">ÿßŸÑÿ≥ŸÑÿ©</span>
          <span class="nav-badge" id="navCartBadge">0</span>
        </div>
        <div class="nav-item" onclick="switchTab('about')">
          <i data-lucide="info"></i>
          <span id="nav-about">ŸÖŸÜ ŸÜÿ≠ŸÜ</span>
        </div>
        <div class="nav-item" onclick="switchTab('contact')">
          <i data-lucide="phone"></i>
          <span id="nav-contact">ÿ™ŸàÿßÿµŸÑ</span>
        </div>
      </div>
    </nav>

    <!-- Main Wrapper -->
    <div class="main-wrapper">
      <div>
        <!-- Menu Tab -->
        <div class="tab-content active" id="menu-tab">
          <!-- Hero Section -->
          <div class="hero-section">
            <div class="hero-badge">
              <i data-lucide="sparkles" style="width: 16px; height: 16px;"></i>
              <span id="hero-badge">üéâ ÿÆÿµŸÖ 20% ÿπŸÑŸâ ÿßŸÑÿ∑ŸÑÿ® ÿßŸÑÿ£ŸàŸÑ</span>
            </div>
            <h2 class="hero-title" id="hero-title">ÿßŸÉÿ™ÿ¥ŸÅ ÿπÿßŸÑŸÖ ÿßŸÑŸÜŸÉŸáÿßÿ™ ÿßŸÑÿ≥ÿßÿ≠ÿ±</h2>
            <p class="hero-description" id="hero-description">ÿ™ÿ¨ÿ±ÿ®ÿ© ŸÅÿ±ŸäÿØÿ© ŸÖŸÜ ŸÜŸàÿπŸáÿß ŸÖÿπ ÿ£ŸÅÿ∂ŸÑ ÿ£ŸÜŸàÿßÿπ ÿßŸÑÿ¢Ÿäÿ≥ ŸÉÿ±ŸäŸÖ ŸàÿßŸÑÿØŸäÿ≥ÿ±ÿ™ ÿßŸÑŸÖŸÖŸäÿ≤ üç®‚ú®</p>
            <div class="hero-stats">
              <div class="stat-item">
                <span class="stat-value" id="stat-products">50+</span>
                <span class="stat-label" id="stat-products-label">ŸÖŸÜÿ™ÿ¨</span>
              </div>
              <div class="stat-item">
                <span class="stat-value" id="stat-flavors">30+</span>
                <span class="stat-label" id="stat-flavors-label">ŸÜŸÉŸáÿ©</span>
              </div>
              <div class="stat-item">
                <span class="stat-value" id="stat-rating">4.9‚≠ê</span>
                <span class="stat-label" id="stat-rating-label">ÿ™ŸÇŸäŸäŸÖ</span>
              </div>
            </div>
          </div>

          <!-- Search Section -->
          <div class="search-section">
            <div class="search-container">
              <i data-lucide="search" class="search-icon"></i>
              <input 
                type="text" 
                id="searchInput" 
                class="search-input" 
                placeholder="ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ŸÖŸÜÿ™ÿ¨..."
                oninput="handleSearch()"
              >
              <button class="clear-search" id="clearSearch" onclick="clearSearch()">
                <i data-lucide="x"></i>
              </button>
            </div>
          </div>

          <!-- Categories Section -->
          <!-- Categories Section -->
          <div class="categories-section" id="categoriesSection">
            <div class="categories-scroll" id="categoriesScroll"></div>
          </div>


          <!-- Products Container -->
          <div class="products-container" id="productsContainer"></div>
        </div>

        <!-- About Tab -->
        <div class="tab-content" id="about-tab">
          <div class="info-section">
            <div class="info-card">
              <h3 class="info-card-title">
                <i data-lucide="sparkles"></i>
                <span id="about-title-1">ŸÇÿµÿ™ŸÜÿß</span>
              </h3>
              <div class="info-card-content" id="about-content-1">
                ŸÜÿ≠ŸÜ ŸÖÿ™ÿÆÿµÿµŸàŸÜ ŸÅŸä ÿ™ŸÇÿØŸäŸÖ ÿ£ŸÅÿÆÿ± ÿ£ŸÜŸàÿßÿπ ÿßŸÑÿ≥ŸàŸÅÿ™ ÿ¢Ÿäÿ≥ ŸÉÿ±ŸäŸÖ ŸàÿßŸÑÿØŸäÿ≥ÿ±ÿ™ ÿßŸÑŸÖŸÖŸäÿ≤. ŸÖŸÜÿ∞ ÿ™ÿ£ÿ≥Ÿäÿ≥ŸÜÿß ŸàŸÜÿ≠ŸÜ ŸÜÿ≥ÿπŸâ ŸÑÿ™ŸÇÿØŸäŸÖ ÿ™ÿ¨ÿ±ÿ®ÿ© ÿßÿ≥ÿ™ÿ´ŸÜÿßÿ¶Ÿäÿ© ŸÑÿπŸÖŸÑÿßÿ¶ŸÜÿß ŸÖÿπ ÿ£ÿ¨ŸàÿØ ÿßŸÑŸÖŸÉŸàŸÜÿßÿ™ ÿßŸÑÿ∑ÿ®ŸäÿπŸäÿ© ŸàÿßŸÑŸÜŸÉŸáÿßÿ™ ÿßŸÑŸÅÿ±ŸäÿØÿ©.
              </div>
            </div>

            <div class="info-card">
              <h3 class="info-card-title">
                <i data-lucide="award"></i>
                <span id="about-title-2">ŸÖŸÖŸäÿ≤ÿßÿ™ŸÜÿß</span>
              </h3>
              <div class="info-card-content">
                <ul style="list-style: none; padding: 0; margin: 0;">
                  <li style="padding: 0.5rem 0; display: flex; align-items: center; gap: 0.5rem;">
                    <span style="color: var(--color-primary);">‚úì</span>
                    <span id="feature-1">ŸÖŸÉŸàŸÜÿßÿ™ ÿ∑ÿ®ŸäÿπŸäÿ© 100%</span>
                  </li>
                  <li style="padding: 0.5rem 0; display: flex; align-items: center; gap: 0.5rem;">
                    <span style="color: var(--color-primary);">‚úì</span>
                    <span id="feature-2">ÿ™ŸàÿµŸäŸÑ ÿ≥ÿ±Ÿäÿπ ÿÆŸÑÿßŸÑ 30 ÿØŸÇŸäŸÇÿ©</span>
                  </li>
                  <li style="padding: 0.5rem 0; display: flex; align-items: center; gap: 0.5rem;">
                    <span style="color: var(--color-primary);">‚úì</span>
                    <span id="feature-3">ÿ£ÿ≥ÿπÿßÿ± ŸÖŸÜÿßŸÅÿ≥ÿ© Ÿàÿπÿ±Ÿàÿ∂ ŸÖÿ≥ÿ™ŸÖÿ±ÿ©</span>
                  </li>
                  <li style="padding: 0.5rem 0; display: flex; align-items: center; gap: 0.5rem;">
                    <span style="color: var(--color-primary);">‚úì</span>
                    <span id="feature-4">ŸÜŸÉŸáÿßÿ™ ÿ≠ÿµÿ±Ÿäÿ© ŸàŸÖÿ™ÿ¨ÿØÿØÿ©</span>
                  </li>
                </ul>
              </div>
            </div>

            <div class="info-card">
              <h3 class="info-card-title">
                <i data-lucide="clock"></i>
                <span id="about-title-3">ÿ≥ÿßÿπÿßÿ™ ÿßŸÑÿπŸÖŸÑ</span>
              </h3>
              <div class="info-card-content">
                <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                  <span id="work-days">ÿßŸÑÿ≥ÿ®ÿ™ - ÿßŸÑÿÆŸÖŸäÿ≥</span>
                  <span style="font-weight: 700;">10:00 ÿµ - 12:00 ŸÖ</span>
                </div>
                <div style="display: flex; justify-content: space-between;">
                  <span id="work-friday">ÿßŸÑÿ¨ŸÖÿπÿ©</span>
                  <span style="font-weight: 700;">2:00 ŸÖ - 12:00 ŸÖ</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Contact Tab -->
        <div class="tab-content" id="contact-tab">
          <div class="info-section">
            <div class="info-card">
              <h3 class="info-card-title">
                <i data-lucide="phone"></i>
                <span id="contact-title-1">ÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÜÿß</span>
              </h3>
              <div class="info-card-content">
                <div style="margin-bottom: 1rem;">
                  <div style="font-weight: 700; margin-bottom: 0.5rem;" id="contact-phone-label">üìû ÿßŸÑŸáÿßÿ™ŸÅ</div>
                  <a href="tel:+201234567890" style="color: var(--color-primary); text-decoration: none; font-weight: 600;">+20 123 456 7890</a>
                </div>
                <div style="margin-bottom: 1rem;">
                  <div style="font-weight: 700; margin-bottom: 0.5rem;" id="contact-email-label">üìß ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä</div>
                  <a href="mailto:info@softcream.com" style="color: var(--color-primary); text-decoration: none; font-weight: 600;">info@softcream.com</a>
                </div>
                <div>
                  <div style="font-weight: 700; margin-bottom: 0.5rem;" id="contact-address-label">üìç ÿßŸÑÿπŸÜŸàÿßŸÜ</div>
                  <p style="margin: 0;">ÿ¥ÿßÿ±ÿπ ÿßŸÑÿ¨Ÿäÿ≤ÿ©ÿå ÿ£ŸÖÿßŸÖ ÿßŸÑŸÖŸàŸÑ ÿßŸÑŸÉÿ®Ÿäÿ±ÿå ÿßŸÑÿ¨Ÿäÿ≤ÿ©ÿå ŸÖÿµÿ±</p>
                </div>
              </div>
            </div>

            <div class="info-card">
              <h3 class="info-card-title">
                <i data-lucide="share-2"></i>
                <span id="contact-title-2">ÿ™ÿßÿ®ÿπŸÜÿß ÿπŸÑŸâ</span>
              </h3>
              <div class="social-links">
                <a href="https://facebook.com" target="_blank" class="social-link">
                  <div class="social-icon">
                    <i data-lucide="facebook"></i>
                  </div>
                  <span>Facebook</span>
                </a>
                <a href="https://instagram.com" target="_blank" class="social-link">
                  <div class="social-icon">
                    <i data-lucide="instagram"></i>
                  </div>
                  <span>Instagram</span>
                </a>
                <a href="https://twitter.com" target="_blank" class="social-link">
                  <div class="social-icon">
                    <i data-lucide="twitter"></i>
                  </div>
                  <span>Twitter</span>
                </a>
                <a href="https://wa.me/201234567890" target="_blank" class="social-link">
                  <div class="social-icon">
                    <i data-lucide="message-circle"></i>
                  </div>
                  <span>WhatsApp</span>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Desktop Cart Sidebar -->
      <div class="cart-sidebar-desktop">
        <div class="cart-sidebar">
          <div class="cart-header" style="border-bottom: 1px solid var(--border-color); padding-bottom: 1rem; margin-bottom: 1rem;">
            <div class="cart-title">
              <i data-lucide="shopping-cart"></i>
              <span id="cart-title-desktop">ÿ≥ŸÑÿ© ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™</span>
            </div>
            <span class="cart-badge" id="cartBadgeDesktop">0</span>
          </div>
          <div class="cart-items" id="cartItemsDesktop">
            <div class="cart-empty">
              <div class="cart-empty-icon">
                <i data-lucide="shopping-basket"></i>
              </div>
              <p style="font-size: 1.125rem; margin-bottom: 0.5rem;" id="cart-empty-title">ÿ≥ŸÑÿ™ŸÉ ŸÅÿßÿ±ÿ∫ÿ© ÿ≠ÿßŸÑŸäÿßŸã</p>
              <p style="font-size: 0.875rem;" id="cart-empty-subtitle">ÿ£ÿ∂ŸÅ ÿ®ÿπÿ∂ ÿßŸÑÿ¢Ÿäÿ≥ ŸÉÿ±ŸäŸÖ ÿßŸÑŸÑÿ∞Ÿäÿ∞! üç¶</p>
            </div>
          </div>
          <div class="cart-footer hidden" id="cartFooterDesktop">
            <div class="cart-total-row">
              <span class="cart-total-label" id="cart-total-label">ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä:</span>
              <span class="cart-total-price" id="cartTotalDesktop">0 ÿ¨.ŸÖ</span>
            </div>
            <button class="checkout-btn" onclick="initiateCheckout()">
              <i data-lucide="check-circle-2"></i>
              <span id="checkout-btn-text">ÿ•ÿ™ŸÖÿßŸÖ ÿßŸÑÿ∑ŸÑÿ®</span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Cart Modal (Mobile) -->
    <div class="cart-modal-overlay" id="cartModal" onclick="closeCartModal(event)">
      <div class="cart-modal" onclick="event.stopPropagation()">
        <div class="cart-header">
          <div class="cart-title">
            <i data-lucide="shopping-cart"></i>
            <span id="cart-title-mobile">ÿ≥ŸÑÿ© ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™</span>
          </div>
          <span class="cart-badge" id="cartBadgeMobile">0</span>
          <button class="cart-close" onclick="closeCartModal()">
            <i data-lucide="x"></i>
          </button>
        </div>
        <div class="cart-items" id="cartItemsMobile">
          <div class="cart-empty">
            <div class="cart-empty-icon">
              <i data-lucide="shopping-basket"></i>
            </div>
            <p style="font-size: 1.125rem; margin-bottom: 0.5rem;">ÿ≥ŸÑÿ™ŸÉ ŸÅÿßÿ±ÿ∫ÿ© ÿ≠ÿßŸÑŸäÿßŸã</p>
            <p style="font-size: 0.875rem;">ÿ£ÿ∂ŸÅ ÿ®ÿπÿ∂ ÿßŸÑÿ¢Ÿäÿ≥ ŸÉÿ±ŸäŸÖ ÿßŸÑŸÑÿ∞Ÿäÿ∞! üç¶</p>
          </div>
        </div>
        <div class="cart-footer hidden" id="cartFooterMobile">
          <div class="cart-total-row">
            <span class="cart-total-label">ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä:</span>
            <span class="cart-total-price" id="cartTotalMobile">0 ÿ¨.ŸÖ</span>
          </div>
          <button class="checkout-btn" onclick="initiateCheckout()">
            <i data-lucide="check-circle-2"></i>
            <span>ÿ•ÿ™ŸÖÿßŸÖ ÿßŸÑÿ∑ŸÑÿ®</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Product Modal -->
    <div class="modal-overlay" id="productModal" onclick="closeProductModal(event)">
      <div class="modal-content" onclick="event.stopPropagation()">
        <button class="modal-close" onclick="closeProductModal()">
          <i data-lucide="x"></i>
        </button>
        <div class="modal-image-container">
          <img id="modalImage" class="modal-image" src="" alt="">
        </div>
        <div class="modal-body">
          <h2 class="modal-title" id="modalTitle"></h2>
          <p class="modal-description" id="modalDescription"></p>
          
          <div class="modal-price-section">
            <div class="modal-price-label" id="modal-price-label">ÿßŸÑÿ≥ÿπÿ±</div>
            <div class="modal-price-quantity">
              <span class="modal-price" id="modalPrice"></span>
              <div class="modal-quantity">
                <button class="modal-quantity-btn" onclick="updateModalQuantity(-1)">
                  <i data-lucide="minus"></i>
                </button>
                <span class="modal-quantity-value" id="modalQuantity">1</span>
                <button class="modal-quantity-btn" onclick="updateModalQuantity(1)">
                  <i data-lucide="plus"></i>
                </button>
              </div>
            </div>
          </div>

          <div class="suggestions-section" id="suggestionsSection">
            <h3 class="suggestions-title">
              <i data-lucide="sparkles" style="width: 20px; height: 20px;"></i>
              <span id="suggestions-title-text">ŸÇÿØ Ÿäÿπÿ¨ÿ®ŸÉ ÿ£Ÿäÿ∂ÿßŸã</span>
            </h3>
            <div class="suggestions-grid" id="suggestionsGrid"></div>
          </div>

          <div class="modal-actions">
            <button class="modal-add-btn" onclick="addModalToCart()">
              <i data-lucide="shopping-cart"></i>
              <span id="modalAddBtnText">ÿ£ÿ∂ŸÅ ŸÑŸÑÿ≥ŸÑÿ©</span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- ================================================================ -->
<!-- ŸÜŸÖŸàÿ∞ÿ¨ ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ∑ŸÑÿ® ÿßŸÑŸÖÿ≠ÿ≥ŸëŸÜ - HTML Elements -->
<!-- ================================================================ -->
<!-- ================================================================ -->
<!-- ŸÜŸÖŸàÿ∞ÿ¨ ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ∑ŸÑÿ® ÿßŸÑŸÖÿ≠ÿ≥ŸëŸÜ - HTML Elements -->
<!-- ================================================================ -->

<!-- Checkout Modal ÿßŸÑŸÖÿ≠ÿ≥ŸëŸÜ -->
<div class="checkout-modal-overlay" id="checkoutModal" onclick="closeCheckoutModal(event)">
  <div class="checkout-content" onclick="event.stopPropagation()">
    <button class="checkout-close" onclick="closeCheckoutModal()">
      <i data-lucide="x"></i>
    </button>
    
    <div class="checkout-header">
      <div class="checkout-icon">
        <i data-lucide="shopping-bag"></i>
      </div>
      <h3 class="checkout-title" id="checkout-title">ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ∑ŸÑÿ®</h3>
      <p class="checkout-subtitle" id="checkout-subtitle">ÿßÿÆÿ™ÿ± ÿ∑ÿ±ŸäŸÇÿ© ÿßŸÑÿßÿ≥ÿ™ŸÑÿßŸÖ Ÿàÿ£ŸÉŸÖŸÑ ÿ®ŸäÿßŸÜÿßÿ™ŸÉ</p>
    </div>

    <!-- Order Summary -->
    <div class="order-summary" id="orderSummary">
      <div class="order-summary-title">
        <i data-lucide="receipt"></i>
        <span id="order-summary-title">ŸÖŸÑÿÆÿµ ÿßŸÑÿ∑ŸÑÿ®</span>
      </div>
      <div id="orderItems"></div>
    </div>

    <!-- Delivery Options -->
    <div class="delivery-options">
      <!-- ÿßÿ≥ÿ™ŸÑÿßŸÖ ŸÖŸÜ ÿßŸÑŸÅÿ±ÿπ -->
      <div class="delivery-option" id="pickupOption" onclick="selectDeliveryMethod('pickup')">
        <div class="delivery-option-icon">
          <i data-lucide="store"></i>
        </div>
        <div class="delivery-option-content">
          <div class="delivery-option-title" id="pickup-title">ÿßŸÑÿßÿ≥ÿ™ŸÑÿßŸÖ ŸÖŸÜ ÿßŸÑŸÅÿ±ÿπ</div>
          <div class="delivery-option-desc" id="pickup-desc">ŸÖÿ¨ÿßŸÜÿßŸã - ÿ¨ÿßŸáÿ≤ ÿÆŸÑÿßŸÑ 15 ÿØŸÇŸäŸÇÿ©</div>
        </div>
        <div class="selection-indicator">
          <i data-lucide="check-circle"></i>
        </div>
      </div>

      <!-- ÿßÿÆÿ™Ÿäÿßÿ± ÿßŸÑŸÅÿ±ÿπ (Ÿäÿ∏Ÿáÿ± ÿπŸÜÿØ ÿßÿÆÿ™Ÿäÿßÿ± ÿßŸÑÿßÿ≥ÿ™ŸÑÿßŸÖ) -->
      <div class="branch-selection" id="branchSelection" style="display: none;">
        <label class="branch-label" id="branch-label">
          <i data-lucide="map-pin"></i>
          <span>ÿßÿÆÿ™ÿ± ÿßŸÑŸÅÿ±ÿπ ÿßŸÑŸÖŸÜÿßÿ≥ÿ®:</span>
        </label>
        <div class="branches-grid">
          <div class="branch-card" data-branch="maadi" onclick="selectBranch('maadi')">
            <div class="branch-icon">
              <i data-lucide="building-2"></i>
            </div>
            <div class="branch-info">
              <h4 class="branch-name" id="branch-maadi">ÿßŸÑŸÖÿπÿßÿØŸä</h4>
              <p class="branch-address" id="branch-maadi-address">ÿ¥ÿßÿ±ÿπ 9ÿå ÿßŸÑŸÖÿπÿßÿØŸä</p>
              <p class="branch-distance" id="branch-maadi-distance">
                <i data-lucide="navigation"></i>
                <span>2.5 ŸÉŸÖ</span>
              </p>
            </div>
            <div class="branch-check">
              <i data-lucide="check-circle-2"></i>
            </div>
          </div>

          <div class="branch-card" data-branch="zamalek" onclick="selectBranch('zamalek')">
            <div class="branch-icon">
              <i data-lucide="building-2"></i>
            </div>
            <div class="branch-info">
              <h4 class="branch-name" id="branch-zamalek">ÿßŸÑÿ≤ŸÖÿßŸÑŸÉ</h4>
              <p class="branch-address" id="branch-zamalek-address">ÿ¥ÿßÿ±ÿπ 26 ŸäŸàŸÑŸäŸàÿå ÿßŸÑÿ≤ŸÖÿßŸÑŸÉ</p>
              <p class="branch-distance" id="branch-zamalek-distance">
                <i data-lucide="navigation"></i>
                <span>4.8 ŸÉŸÖ</span>
              </p>
            </div>
            <div class="branch-check">
              <i data-lucide="check-circle-2"></i>
            </div>
          </div>

          <div class="branch-card" data-branch="downtown" onclick="selectBranch('downtown')">
            <div class="branch-icon">
              <i data-lucide="building-2"></i>
            </div>
            <div class="branch-info">
              <h4 class="branch-name" id="branch-downtown">Ÿàÿ≥ÿ∑ ÿßŸÑÿ®ŸÑÿØ</h4>
              <p class="branch-address" id="branch-downtown-address">ÿ¥ÿßÿ±ÿπ ÿ∑ŸÑÿπÿ™ ÿ≠ÿ±ÿ®ÿå Ÿàÿ≥ÿ∑ ÿßŸÑÿ®ŸÑÿØ</p>
              <p class="branch-distance" id="branch-downtown-distance">
                <i data-lucide="navigation"></i>
                <span>3.2 ŸÉŸÖ</span>
              </p>
            </div>
            <div class="branch-check">
              <i data-lucide="check-circle-2"></i>
            </div>
          </div>
        </div>
      </div>

      <!-- ÿßŸÑÿ™ŸàÿµŸäŸÑ -->
      <div class="delivery-option" id="deliveryOption" onclick="selectDeliveryMethod('delivery')">
        <div class="delivery-option-icon">
          <i data-lucide="truck"></i>
        </div>
        <div class="delivery-option-content">
          <div class="delivery-option-title" id="delivery-title">ÿßŸÑÿ™ŸàÿµŸäŸÑ</div>
          <div class="delivery-option-desc" id="delivery-desc">15 ÿ¨.ŸÖ - ÿÆŸÑÿßŸÑ 30 ÿØŸÇŸäŸÇÿ©</div>
        </div>
        <div class="selection-indicator">
          <i data-lucide="check-circle"></i>
        </div>
      </div>
    </div>

    <!-- Customer Form -->
    <div class="checkout-form" id="checkoutForm">
      <div class="form-group">
        <label class="form-label" id="name-label">
          <i data-lucide="user"></i>
          <span>ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑŸÉÿßŸÖŸÑ *</span>
        </label>
        <input type="text" class="form-input" id="customerName" placeholder="ÿ£ÿØÿÆŸÑ ÿßÿ≥ŸÖŸÉ ÿßŸÑŸÉÿßŸÖŸÑ" required>
      </div>
      
      <div class="form-group">
        <label class="form-label" id="phone-label">
          <i data-lucide="phone"></i>
          <span>ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ *</span>
        </label>
        <input type="tel" class="form-input" id="customerPhone" placeholder="01234567890" required dir="ltr">
        <small class="form-hint" id="phone-hint">ŸÖÿ´ÿßŸÑ: 01012345678</small>
      </div>

      <!-- Address for delivery only -->
      <div class="form-group" id="addressGroup" style="display: none;">
        <label class="form-label" id="address-label">
          <i data-lucide="map-pin"></i>
          <span>ÿßŸÑÿπŸÜŸàÿßŸÜ ÿßŸÑÿ™ŸÅÿµŸäŸÑŸä *</span>
        </label>
        <textarea class="form-textarea" id="customerAddress" rows="3" placeholder="ÿßŸÑÿ¥ÿßÿ±ÿπÿå ÿßŸÑŸÖŸÜÿ∑ŸÇÿ©ÿå ÿßŸÑŸÖÿØŸäŸÜÿ©ÿå ŸÖÿπÿßŸÑŸÖ ŸÇÿ±Ÿäÿ®ÿ©..."></textarea>
        <button type="button" class="location-btn" id="locationBtn" onclick="requestLocation()">
          <i data-lucide="navigation"></i>
          <span id="location-btn-text">ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑŸÖŸàŸÇÿπ ÿßŸÑÿ≠ÿßŸÑŸä</span>
        </button>
      </div>

      <div class="form-group">
        <label class="form-label" id="notes-label">
          <i data-lucide="message-square"></i>
          <span>ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ ÿ•ÿ∂ÿßŸÅŸäÿ©</span>
        </label>
        <textarea class="form-textarea" id="orderNotes" rows="2" placeholder="ÿ£Ÿä ÿ∑ŸÑÿ®ÿßÿ™ ÿÆÿßÿµÿ© (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)"></textarea>
      </div>
    </div>

    <div class="checkout-actions">
      <button class="checkout-action-btn secondary" onclick="closeCheckoutModal()" id="cancel-btn">
        <i data-lucide="x"></i>
        <span>ÿ•ŸÑÿ∫ÿßÿ°</span>
      </button>
      <button class="checkout-action-btn primary" onclick="confirmOrder()" id="confirm-btn">
        <i data-lucide="check-circle-2"></i>
        <span>ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ∑ŸÑÿ®</span>
      </button>
    </div>
  </div>
</div>

<!-- Location Permission Modal -->
<div class="permission-modal" id="permissionModal">
  <div class="permission-content">
    <div class="permission-icon">
      <i data-lucide="map-pin"></i>
    </div>
    <h3 class="permission-title" id="permission-title">ŸÜÿ≠ÿ™ÿßÿ¨ ŸÖŸàŸÇÿπŸÉ ŸÑŸÑÿ™ŸàÿµŸäŸÑ ÿßŸÑÿØŸÇŸäŸÇ</h3>
    <p class="permission-text" id="permission-text">
      ŸÑŸÜÿ™ŸÖŸÉŸÜ ŸÖŸÜ ÿ™ŸàÿµŸäŸÑ ÿ∑ŸÑÿ®ŸÉ ŸÅŸä ÿ£ÿ≥ÿ±ÿπ ŸàŸÇÿ™ Ÿàÿ®ÿ£ŸÅÿ∂ŸÑ ÿØŸÇÿ©ÿå ŸÜÿ≠ÿ™ÿßÿ¨ ÿ•ŸÑŸâ ŸÖÿπÿ±ŸÅÿ© ŸÖŸàŸÇÿπŸÉ ÿßŸÑÿ≠ÿßŸÑŸä. ÿ≥Ÿäÿ™ŸÖ ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑŸÖŸàŸÇÿπ ŸÅŸÇÿ∑ ŸÑÿ£ÿ∫ÿ±ÿßÿ∂ ÿßŸÑÿ™ŸàÿµŸäŸÑ.
    </p>
    <div class="permission-features">
      <div class="permission-feature">
        <i data-lucide="zap"></i>
        <span>ÿ™ŸàÿµŸäŸÑ ÿ£ÿ≥ÿ±ÿπ</span>
      </div>
      <div class="permission-feature">
        <i data-lucide="check-circle"></i>
        <span>ÿØŸÇÿ© ÿ£ÿπŸÑŸâ</span>
      </div>
      <div class="permission-feature">
        <i data-lucide="shield"></i>
        <span>ÿ¢ŸÖŸÜ ŸàŸÖÿ≠ŸÖŸä</span>
      </div>
    </div>
    <div class="permission-actions">
      <button class="permission-btn secondary" onclick="closePermissionModal()" id="permission-cancel">
        <span>ÿ≥ÿ£ŸÉÿ™ÿ® ÿßŸÑÿπŸÜŸàÿßŸÜ ŸäÿØŸàŸäÿßŸã</span>
      </button>
      <button class="permission-btn primary" onclick="allowLocation()" id="permission-allow">
        <i data-lucide="map-pin"></i>
        <span>ÿßŸÑÿ≥ŸÖÿßÿ≠ ÿ®ÿßŸÑŸàÿµŸàŸÑ ŸÑŸÑŸÖŸàŸÇÿπ</span>
      </button>
    </div>
  </div>
</div>

<!-- Processing Modal - ÿ£ÿ´ŸÜÿßÿ° ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ -->
<div class="processing-modal hidden" id="processingModal">
  <div class="processing-content">
    <div class="spinner-container">
      <div class="spinner"></div>
    </div>
    <h3 class="processing-title" id="processing-title">ÿ¨ÿßÿ±Ÿä ÿ•ÿ±ÿ≥ÿßŸÑ ÿ∑ŸÑÿ®ŸÉ...</h3>
    <p class="processing-subtitle" id="processing-subtitle">ÿßŸÑÿ±ÿ¨ÿßÿ° ÿßŸÑÿßŸÜÿ™ÿ∏ÿßÿ±ÿå ŸÑÿß ÿ™ÿ∫ŸÑŸÇ ÿßŸÑÿµŸÅÿ≠ÿ©</p>
    
    <!-- ÿÆŸäÿßÿ±ÿßÿ™ ÿ•ÿπÿßÿØÿ© ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ©/ÿßŸÑÿ•ŸÑÿ∫ÿßÿ° (ŸÖÿÆŸÅŸäÿ© ÿßŸÅÿ™ÿ±ÿßÿ∂ŸäÿßŸã) -->
    <div class="processing-actions" id="processingActions" style="display: none;">
      <div class="error-icon">
        <i data-lucide="wifi-off"></i>
      </div>
      <p class="error-message" id="error-message">ÿπÿ∞ÿ±ÿßŸãÿå ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿßÿ™ÿµÿßŸÑ</p>
      <p class="error-description">ŸÇÿØ ÿ™ŸÉŸàŸÜ ÿßŸÑŸÖÿ¥ŸÉŸÑÿ© ŸÖÿ§ŸÇÿ™ÿ©ÿå Ÿäÿ±ÿ¨Ÿâ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ</p>
      <div class="action-buttons">
        <button class="btn-retry" id="retryBtn">
          <i data-lucide="refresh-cw"></i>
          <span id="retry-text">ÿ•ÿπÿßÿØÿ© ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ©</span>
        </button>
        <button class="btn-cancel-send" id="cancelSendBtn">
          <i data-lucide="x"></i>
          <span id="cancel-send-text">ÿ•ŸÑÿ∫ÿßÿ°</span>
        </button>
      </div>
      <p class="help-text" id="help-text">
        <i data-lucide="headphones"></i>
        <span>ÿ™ÿ≠ÿ™ÿßÿ¨ ŸÖÿ≥ÿßÿπÿØÿ©ÿü <a href="tel:+201234567890">ÿßÿ™ÿµŸÑ ÿ®ŸÜÿß ÿßŸÑÿ¢ŸÜ</a></span>
      </p>
    </div>
  </div>
</div>

<!-- Order Confirmed Modal - ÿ®ÿπÿØ ÿßŸÑŸÜÿ¨ÿßÿ≠ -->
<div class="confirmed-modal hidden" id="orderConfirmedModal">
  <div class="confirmed-content">
    <button class="close-confirmed" id="closeConfirmedBtn">
      <i data-lucide="x"></i>
    </button>
    
    <div class="success-animation">
      <div class="success-checkmark">
        <div class="check-icon">
          <span class="icon-line line-tip"></span>
          <span class="icon-line line-long"></span>
          <div class="icon-circle"></div>
          <div class="icon-fix"></div>
        </div>
      </div>
    </div>
    
    <h2 class="confirmed-title" id="confirmed-title">ÿ™ŸÖ ÿ™ÿ£ŸÉŸäÿØ ÿ∑ŸÑÿ®ŸÉ ÿ®ŸÜÿ¨ÿßÿ≠! üéâ</h2>
    <p class="confirmed-subtitle" id="confirmed-subtitle">ÿ¥ŸÉÿ±ÿßŸã ŸÑÿ´ŸÇÿ™ŸÉ ÿ®ŸÜÿßÿå ÿ≥ŸÜÿ®ÿØÿ£ ÿ®ÿ™ÿ≠ÿ∂Ÿäÿ± ÿ∑ŸÑÿ®ŸÉ ÿßŸÑÿ¢ŸÜ</p>
    
    <div class="order-details-card">
      <div class="order-id-section">
        <span class="label" id="order-id-label">ÿ±ŸÇŸÖ ÿßŸÑÿ∑ŸÑÿ®</span>
        <div class="order-id-display">
          <span class="order-id-value" id="confirmedOrderId">ORD-123456</span>
          <button class="copy-btn" id="copyOrderIdBtn" title="ŸÜÿ≥ÿÆ ÿ±ŸÇŸÖ ÿßŸÑÿ∑ŸÑÿ®">
            <i data-lucide="copy"></i>
          </button>
        </div>
      </div>
      
      <div class="eta-section">
        <i data-lucide="clock"></i>
        <span id="confirmedEta">ÿßŸÑŸàŸÇÿ™ ÿßŸÑŸÖÿ™ŸàŸÇÿπ: ‚âà 30 ÿØŸÇŸäŸÇÿ©</span>
      </div>
      
      <div class="status-badge">
        <i data-lucide="chef-hat"></i>
        <span id="status-text">ŸÇŸäÿØ ÿßŸÑÿ™ÿ≠ÿ∂Ÿäÿ±</span>
      </div>

      <!-- ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑŸÅÿ±ÿπ ÿßŸÑŸÖÿÆÿ™ÿßÿ± (ŸÑŸÑÿßÿ≥ÿ™ŸÑÿßŸÖ ŸÅŸÇÿ∑) -->
      <div class="selected-branch-info" id="selectedBranchInfo" style="display: none;">
        <div class="branch-info-header">
          <i data-lucide="map-pin"></i>
          <span id="selected-branch-label">ŸÅÿ±ÿπ ÿßŸÑÿßÿ≥ÿ™ŸÑÿßŸÖ:</span>
        </div>
        <div class="branch-info-content">
          <strong id="selectedBranchName"></strong>
          <span id="selectedBranchAddress"></span>
        </div>
      </div>
    </div>
    
    <div class="quick-actions">
      <button class="action-btn whatsapp" id="shareWhatsAppBtn">
        <svg viewBox="0 0 24 24" width="20" height="20">
          <path fill="currentColor" d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
        </svg>
        <span id="whatsapp-text">ŸÖÿ¥ÿßÿ±ŸÉÿ© ÿπÿ®ÿ± Ÿàÿßÿ™ÿ≥ÿßÿ®</span>
      </button>
      
      <button class="action-btn track" id="trackOrderBtn">
        <i data-lucide="map"></i>
        <span id="track-text">ÿ™ÿ™ÿ®ÿπ ÿßŸÑÿ∑ŸÑÿ®</span>
      </button>
    </div>
    
    <div class="contact-support">
      <i data-lucide="headphones"></i>
      <span id="support-text">ÿ™ÿ≠ÿ™ÿßÿ¨ ŸÖÿ≥ÿßÿπÿØÿ©ÿü</span>
      <a href="tel:+201234567890" id="support-phone">ÿßÿ™ÿµŸÑ ÿ®ŸÜÿß</a>
    </div>
    
    <button class="btn-continue" id="continueShoppingBtn">
      <span id="continue-text">ŸÖÿ™ÿßÿ®ÿπÿ© ÿßŸÑÿ™ÿ≥ŸàŸÇ</span>
      <i data-lucide="arrow-left"></i>
    </button>
  </div>
</div>

<!-- Order Tracking Modal -->
<div class="tracking-modal hidden" id="trackingModal">
  <div class="tracking-content">
    <button class="close-tracking" id="closeTrackingBtn">
      <i data-lucide="x"></i>
    </button>
    
    <div class="tracking-header">
      <div class="tracking-icon">
        <i data-lucide="package-search"></i>
      </div>
      <h3 class="tracking-title" id="tracking-title">ÿ™ÿ™ÿ®ÿπ ÿ∑ŸÑÿ®ŸÉ</h3>
      <p class="tracking-subtitle">ÿ£ÿØÿÆŸÑ ÿ±ŸÇŸÖ ÿßŸÑÿ∑ŸÑÿ® ŸÑŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿ≠ÿßŸÑÿ™Ÿá</p>
    </div>
    
    <div class="tracking-input-group">
      <input 
        type="text" 
        class="tracking-input" 
        id="trackingInput" 
        placeholder="ÿ£ÿØÿÆŸÑ ÿ±ŸÇŸÖ ÿßŸÑÿ∑ŸÑÿ® (ŸÖÿ´ÿßŸÑ: ORD-123456)"
        dir="ltr"
      >
      <button class="btn-track" id="checkStatusBtn">
        <i data-lucide="search"></i>
        <span id="check-status-text">ÿ™ÿ≠ŸÇŸÇ</span>
      </button>
    </div>
    
    <div class="tracking-result" id="trackingResult" style="display: none;">
      <!-- ÿ≥Ÿäÿ™ŸÖ ŸÖŸÑÿ§Ÿáÿß ÿØŸäŸÜÿßŸÖŸäŸÉŸäÿßŸã -->
    </div>
  </div>
</div>
  <script>
// ================================================================
// ===== ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸàÿßŸÑŸÖÿ™ÿ∫Ÿäÿ±ÿßÿ™ ÿßŸÑÿπÿßŸÖÿ© =====
// ================================================================
const translations = {
  ar: {
    headerTitle: ' ÿ≥ŸàŸÅÿ™ ŸÉÿ±ŸäŸÖ',
    headerSubtitle: 'ÿ£ÿ∑Ÿäÿ® ÿ¢Ÿäÿ≥ ŸÉÿ±ŸäŸÖ ŸÅŸä ÿßŸÑŸÖÿØŸäŸÜÿ© üç¶',
    navMenu: 'ÿßŸÑŸÖŸÜŸäŸà',
    navCart: 'ÿßŸÑÿ≥ŸÑÿ©',
    navAbout: 'ŸÖŸÜ ŸÜÿ≠ŸÜ',
    navContact: 'ÿ™ŸàÿßÿµŸÑ',
    heroBadge: 'üéâ ÿÆÿµŸÖ 20% ÿπŸÑŸâ ÿßŸÑÿ∑ŸÑÿ® ÿßŸÑÿ£ŸàŸÑ',
    heroTitle: 'ÿßŸÉÿ™ÿ¥ŸÅ ÿπÿßŸÑŸÖ ÿßŸÑŸÜŸÉŸáÿßÿ™ ÿßŸÑÿ≥ÿßÿ≠ÿ±',
    heroDescription: 'ÿ™ÿ¨ÿ±ÿ®ÿ© ŸÅÿ±ŸäÿØÿ© ŸÖŸÜ ŸÜŸàÿπŸáÿß ŸÖÿπ ÿ£ŸÅÿ∂ŸÑ ÿ£ŸÜŸàÿßÿπ ÿßŸÑÿ¢Ÿäÿ≥ ŸÉÿ±ŸäŸÖ ŸàÿßŸÑÿØŸäÿ≥ÿ±ÿ™ ÿßŸÑŸÖŸÖŸäÿ≤ üç®‚ú®',
    searchPlaceholder: 'ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ŸÖŸÜÿ™ÿ¨...',
    cartTitle: 'ÿ≥ŸÑÿ© ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™',
    cartEmpty: 'ÿ≥ŸÑÿ™ŸÉ ŸÅÿßÿ±ÿ∫ÿ© ÿ≠ÿßŸÑŸäÿßŸã',
    cartEmptySubtitle: 'ÿ£ÿ∂ŸÅ ÿ®ÿπÿ∂ ÿßŸÑÿ¢Ÿäÿ≥ ŸÉÿ±ŸäŸÖ ÿßŸÑŸÑÿ∞Ÿäÿ∞! üç¶',
    cartTotal: 'ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä:',
    checkoutBtn: 'ÿ•ÿ™ŸÖÿßŸÖ ÿßŸÑÿ∑ŸÑÿ®',
    addToCart: 'ÿ£ÿ∂ŸÅ ŸÑŸÑÿ≥ŸÑÿ©',
    egp: 'ÿ¨.ŸÖ',
    currency: 'ÿ¨.ŸÖ',
    checkoutTitle: 'ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ∑ŸÑÿ®',
    checkoutSubtitle: 'ÿßÿÆÿ™ÿ± ÿ∑ÿ±ŸäŸÇÿ© ÿßŸÑÿßÿ≥ÿ™ŸÑÿßŸÖ Ÿàÿ£ŸÉŸÖŸÑ ÿ®ŸäÿßŸÜÿßÿ™ŸÉ',
    orderSummaryTitle: 'ŸÖŸÑÿÆÿµ ÿßŸÑÿ∑ŸÑÿ®',
    pickupTitle: 'ÿßŸÑÿßÿ≥ÿ™ŸÑÿßŸÖ ŸÖŸÜ ÿßŸÑŸÅÿ±ÿπ',
    pickupDesc: 'ŸÖÿ¨ÿßŸÜÿßŸã - ÿ¨ÿßŸáÿ≤ ÿÆŸÑÿßŸÑ 15 ÿØŸÇŸäŸÇÿ©',
    deliveryTitle: 'ÿßŸÑÿ™ŸàÿµŸäŸÑ',
    deliveryDesc: '15 ÿ¨.ŸÖ - ÿÆŸÑÿßŸÑ 30 ÿØŸÇŸäŸÇÿ©',
    nameLabel: 'ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑŸÉÿßŸÖŸÑ *',
    phoneLabel: 'ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ *',
    addressLabel: 'ÿßŸÑÿπŸÜŸàÿßŸÜ ÿßŸÑÿ™ŸÅÿµŸäŸÑŸä *',
    notesLabel: 'ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ ÿ•ÿ∂ÿßŸÅŸäÿ©',
    locationBtnText: 'ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑŸÖŸàŸÇÿπ ÿßŸÑÿ≠ÿßŸÑŸä',
    cancelBtn: 'ÿ•ŸÑÿ∫ÿßÿ°',
    confirmBtn: 'ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ∑ŸÑÿ®',
    permissionTitle: 'ŸÜÿ≠ÿ™ÿßÿ¨ ŸÖŸàŸÇÿπŸÉ ŸÑŸÑÿ™ŸàÿµŸäŸÑ',
    permissionText: 'ŸÑŸÜÿ™ŸÖŸÉŸÜ ŸÖŸÜ ÿ™ŸàÿµŸäŸÑ ÿ∑ŸÑÿ®ŸÉ ŸÅŸä ÿ£ÿ≥ÿ±ÿπ ŸàŸÇÿ™ÿå ŸÜÿ≠ÿ™ÿßÿ¨ ÿ•ŸÑŸâ ŸÖÿπÿ±ŸÅÿ© ŸÖŸàŸÇÿπŸÉ ÿßŸÑÿ≠ÿßŸÑŸä. ÿ≥Ÿäÿ™ŸÖ ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑŸÖŸàŸÇÿπ ŸÅŸÇÿ∑ ŸÑÿ£ÿ∫ÿ±ÿßÿ∂ ÿßŸÑÿ™ŸàÿµŸäŸÑ.',
    permissionCancel: 'ŸÑÿßÿ≠ŸÇÿßŸã',
    permissionAllow: 'ÿßŸÑÿ≥ŸÖÿßÿ≠',
    // ÿ•ÿ∂ÿßŸÅÿßÿ™ ŸÑŸÑÿÆÿµŸàŸÖÿßÿ™ (ŸÖÿ™ÿ±ÿ¨ŸÖÿ©)
    discountFirst: 'üéâ ÿÆÿµŸÖ 20% ŸÑŸÑÿ∑ŸÑÿ® ÿßŸÑÿ£ŸàŸÑ',
    discountSecond: 'üéÅ ÿÆÿµŸÖ 15% ŸÑŸÑÿ∑ŸÑÿ® ÿßŸÑÿ´ÿßŸÜŸä',
    discountLoyal: '‚≠ê ÿÆÿµŸÖ 10% ŸÑŸÑÿπŸÖŸÑÿßÿ° ÿßŸÑÿØÿßÿ¶ŸÖŸäŸÜ',
    discountApplied: 'ÿ™ŸÖ ÿ™ÿ∑ÿ®ŸäŸÇ ÿßŸÑÿÆÿµŸÖ ÿ®ŸÜÿ¨ÿßÿ≠!'
  },
  en: {
    headerTitle: 'Soft Cream ',
    headerSubtitle: 'Best Ice Cream in Town üç¶',
    navMenu: 'Menu',
    navCart: 'Cart',
    navAbout: 'About',
    navContact: 'Contact',
    heroBadge: 'üéâ 20% OFF First Order',
    heroTitle: 'Discover Magical Flavors',
    heroDescription: 'A unique experience with the best ice cream and desserts üç®‚ú®',
    searchPlaceholder: 'Search for a product...',
    cartTitle: 'Shopping Cart',
    cartEmpty: 'Your cart is empty',
    cartEmptySubtitle: 'Add some delicious ice cream! üç¶',
    cartTotal: 'Total:',
    checkoutBtn: 'Checkout',
    addToCart: 'Add to Cart',
    egp: 'EGP',
    currency: 'EGP',
    checkoutTitle: 'Confirm Order',
    checkoutSubtitle: 'Choose pickup method and complete your info',
    orderSummaryTitle: 'Order Summary',
    pickupTitle: 'Store Pickup',
    pickupDesc: 'Free - Ready in 15 minutes',
    deliveryTitle: 'Delivery',
    deliveryDesc: '15 EGP - Within 30 minutes',
    nameLabel: 'Full Name *',
    phoneLabel: 'Phone Number *',
    addressLabel: 'Detailed Address *',
    notesLabel: 'Additional Notes',
    locationBtnText: 'Use Current Location',
    cancelBtn: 'Cancel',
    confirmBtn: 'Confirm Order',
    permissionTitle: 'We need your location for delivery',
    permissionText: 'To deliver your order as quickly as possible, we need to know your current location. Location will only be used for delivery purposes.',
    permissionCancel: 'Later',
    permissionAllow: 'Allow',
    // ÿ•ÿ∂ÿßŸÅÿßÿ™ ŸÑŸÑÿÆÿµŸàŸÖÿßÿ™
    discountFirst: 'üéâ 20% off for first order',
    discountSecond: 'üéÅ 15% off for second order',
    discountLoyal: '‚≠ê 10% off for loyal customers',
    discountApplied: 'Discount applied successfully!'
  }
};

// ================================================================
// ===== ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ - Products Data =====
// ================================================================

const products = [
  
  // ========================================
  // üç¶ ŸÉŸÑÿßÿ≥ŸäŸÉ - Classic
  // ========================================
  {
    id: "1",
    name: "ŸÅÿßŸÜŸäŸÑŸäÿß ŸÉŸÑÿßÿ≥ŸäŸÉ",
    nameEn: "Classic Vanilla",
    description: "ÿ¢Ÿäÿ≥ ŸÉÿ±ŸäŸÖ ŸÅÿßŸÜŸäŸÑŸäÿß ÿ∑ÿ®ŸäÿπŸäÿ© ÿ®ÿ∑ÿπŸÖ ŸÉÿ±ŸäŸÖŸä ÿ±ÿßÿ¶ÿπ",
    descriptionEn: "Natural vanilla ice cream with a creamy taste",
    price: 25,
    image: "https://i.ibb.co/3YspR2nn/489627654-645413408459760-7730691560634138295-n-min.jpg",
    category: "ŸÉŸÑÿßÿ≥ŸäŸÉ",
    categoryEn: "Classic",
    badge: "ÿßŸÑÿ£ŸÉÿ´ÿ± ŸÖÿ®ŸäÿπÿßŸã"
  },
  {
    id: "2",
    name: "ÿ¥ŸàŸÉŸàŸÑÿßÿ™ÿ© ÿØÿßŸÉŸÜÿ©",
    nameEn: "Dark Chocolate",
    description: "ÿ¥ŸàŸÉŸàŸÑÿßÿ™ÿ© ÿ®ŸÑÿ¨ŸäŸÉŸäÿ© ŸÅÿßÿÆÿ±ÿ© ÿ®ŸÜŸÉŸáÿ© ÿ∫ŸÜŸäÿ©",
    descriptionEn: "Luxurious Belgian chocolate with rich flavor",
    price: 30,
    image: "https://images.unsplash.com/photo-1578985545062-69928b1d9587?w=800&q=80",
    category: "ŸÉŸÑÿßÿ≥ŸäŸÉ",
    categoryEn: "Classic",
    badge: ""
  },
  {
    id: "3",
    name: "ÿ¥ŸàŸÉŸà ÿ®ŸÜÿØŸÇ",
    nameEn: "Choco Hazelnut",
    description: "ÿ¥ŸàŸÉŸàŸÑÿßÿ™ÿ© ÿ®ÿßŸÑÿ≠ŸÑŸäÿ® ŸÖÿπ ÿ®ŸÜÿØŸÇ ŸÖÿ≠ŸÖÿµ",
    descriptionEn: "Milk chocolate with roasted hazelnuts",
    price: 34,
    image: "https://i.ibb.co/35fbWCYY/495226124-663623663305401-7196241149356063471-n-min.jpg",
    category: "ŸÉŸÑÿßÿ≥ŸäŸÉ",
    categoryEn: "Classic",
    badge: ""
  },
  {
    id: "4",
    name: "ŸÉÿ±ÿßŸÖŸäŸÑ ŸÉŸÑÿßÿ≥ŸäŸÉ",
    nameEn: "Classic Caramel",
    description: "ŸÉÿ±ÿßŸÖŸäŸÑ ŸÜÿßÿπŸÖ ÿ®ŸÜŸÉŸáÿ© ÿßŸÑÿ≤ÿ®ÿØÿ© ÿßŸÑÿ∑ÿ®ŸäÿπŸäÿ©",
    descriptionEn: "Smooth caramel with natural butter flavor",
    price: 28,
    image: "https://i.ibb.co/67cV4CJc/484157834-622859394048495-6880924063204865717-n-min.webp", // üîó
    category: "ŸÉŸÑÿßÿ≥ŸäŸÉ",
    categoryEn: "Classic",
    badge: ""
  },
  {
    id: "5",
    name: "ŸÇŸáŸàÿ© ÿ™ÿ±ŸÉŸäÿ©",
    nameEn: "Turkish Coffee",
    description: "ÿ¢Ÿäÿ≥ ŸÉÿ±ŸäŸÖ ÿ®ŸÜŸÉŸáÿ© ÿßŸÑŸÇŸáŸàÿ© ÿßŸÑÿ™ÿ±ŸÉŸäÿ© ÿßŸÑÿ£ÿµŸäŸÑÿ©",
    descriptionEn: "Ice cream with authentic Turkish coffee flavor",
    price: 32,
    image: "https://i.ibb.co/PvjxRW25/491967847-652702284397539-1091289972554512223-n-min.jpg", // üîó
    category: "ŸÉŸÑÿßÿ≥ŸäŸÉ",
    categoryEn: "Classic",
    badge: ""
  },

  // ========================================
  // üçì ŸÅŸàÿßŸÉŸá - Fruits
  // ========================================
  {
    id: "6",
    name: "ŸÅÿ±ÿßŸàŸÑÿ© ÿ∑ÿ®ŸäÿπŸäÿ©",
    nameEn: "Natural Strawberry",
    description: "ŸÅÿ±ÿßŸàŸÑÿ© ÿ∑ÿßÿ≤ÿ¨ÿ© ŸÖÿπ ŸÉÿ±ŸäŸÖÿ© ÿÆŸÅŸäŸÅÿ©",
    descriptionEn: "Fresh strawberries with light cream",
    price: 28,
    image: "https://images.unsplash.com/photo-1501443762994-82bd5dace89a?w=800&q=80",
    category: "ŸÅŸàÿßŸÉŸá",
    categoryEn: "Fruits",
    badge: "ÿ∑ÿßÿ≤ÿ¨"
  },
  {
    id: "7",
    name: "ŸÖÿßŸÜÿ¨Ÿà ÿßÿ≥ÿ™Ÿàÿßÿ¶Ÿäÿ©",
    nameEn: "Tropical Mango",
    description: "ŸÖÿßŸÜÿ¨Ÿà ÿ∑ÿ®ŸäÿπŸäÿ© ÿ®ŸÜŸÉŸáÿ© ÿßÿ≥ÿ™Ÿàÿßÿ¶Ÿäÿ© ŸÖŸÜÿπÿ¥ÿ©",
    descriptionEn: "Natural mango with refreshing tropical flavor",
    price: 32,
    image: "https://images.unsplash.com/photo-1497034825429-c343d7c6a68f?w=800&q=80",
    category: "ŸÅŸàÿßŸÉŸá",
    categoryEn: "Fruits",
    badge: ""
  },
  {
    id: "8",
    name: "ÿ™Ÿàÿ™ ÿ®ÿ±Ÿä ŸÖÿ¥ŸÉŸÑ",
    nameEn: "Mixed Berries",
    description: "ŸÖÿ≤Ÿäÿ¨ ŸÖŸÜ ÿßŸÑÿ™Ÿàÿ™ ÿßŸÑÿ∑ÿ®ŸäÿπŸä ÿßŸÑŸÖŸÜÿπÿ¥",
    descriptionEn: "Mix of refreshing natural berries",
    price: 30,
    image: "https://images.unsplash.com/photo-1488477181946-6428a0291777?w=800&q=80",
    category: "ŸÅŸàÿßŸÉŸá",
    categoryEn: "Fruits",
    badge: ""
  },
  {
    id: "9",
    name: "ŸÖŸàÿ≤ ÿ®ÿßŸÑŸÉÿ±ÿßŸÖŸäŸÑ",
    nameEn: "Banana Caramel",
    description: "ŸÖŸàÿ≤ ÿ∑ÿ®ŸäÿπŸä ŸÖÿπ ÿµŸàÿµ ŸÉÿ±ÿßŸÖŸäŸÑ ÿ∞Ÿáÿ®Ÿä",
    descriptionEn: "Natural banana with golden caramel sauce",
    price: 29,
    image: "https://i.ibb.co/LDG3RBLq/495375434-666601089674325-6611931382943730710-n-min.jpg", // üîó
    category: "ŸÅŸàÿßŸÉŸá",
    categoryEn: "Fruits",
    badge: ""
  },
  {
    id: "10",
    name: "ÿ£ŸÜÿßŸÜÿßÿ≥ ÿßÿ≥ÿ™Ÿàÿßÿ¶Ÿä",
    nameEn: "Tropical Pineapple",
    description: "ÿ£ŸÜÿßŸÜÿßÿ≥ ÿ∑ÿßÿ≤ÿ¨ ÿ®ŸÜŸÉŸáÿ© ŸÖŸÜÿπÿ¥ÿ©",
    descriptionEn: "Fresh pineapple with refreshing taste",
    price: 31,
    image: "https://i.ibb.co/6JsSV4FX/495048486-665737253094042-7809287460821606921-n-min.jpg", // üîó
    category: "ŸÅŸàÿßŸÉŸá",
    categoryEn: "Fruits",
    badge: ""
  },
  {
    id: "11",
    name: "ÿÆŸàÿÆ ÿ®ÿßŸÑŸÉÿ±ŸäŸÖÿ©",
    nameEn: "Peach & Cream",
    description: "ÿÆŸàÿÆ ŸÜÿßÿ∂ÿ¨ ŸÖÿπ ŸÉÿ±ŸäŸÖÿ© ÿ∑ÿßÿ≤ÿ¨ÿ©",
    descriptionEn: "Ripe peach with fresh cream",
    price: 30,
    image: "[ÿ£ÿ∂ŸÅ_ÿ±ÿßÿ®ÿ∑_ÿßŸÑÿµŸàÿ±ÿ©_ŸáŸÜÿß]", // üîó
    category: "ŸÅŸàÿßŸÉŸá",
    categoryEn: "Fruits",
    badge: ""
  },

  // ========================================
  // ‚≠ê ŸÖŸÖŸäÿ≤ - Special
  // ========================================
  {
    id: "12",
    name: "ŸÉŸàŸÉŸäÿ≤ ÿ¢ŸÜÿØ ŸÉÿ±ŸäŸÖ",
    nameEn: "Cookies & Cream",
    description: "ÿ¢Ÿäÿ≥ ŸÉÿ±ŸäŸÖ ŸÅÿßŸÜŸäŸÑŸäÿß ŸÖÿπ ŸÇÿ∑ÿπ ŸÉŸàŸÉŸäÿ≤ ÿ£Ÿàÿ±ŸäŸà",
    descriptionEn: "Vanilla ice cream with Oreo cookie pieces",
    price: 35,
    image: "https://images.unsplash.com/photo-1579954115545-a95591f28bfc?w=800&q=80",
    category: "ŸÖŸÖŸäÿ≤",
    categoryEn: "Special",
    badge: "ÿ¨ÿØŸäÿØ"
  },
  {
    id: "13",
    name: "ŸÉÿ±ÿßŸÖŸäŸÑ ŸÑŸàÿ™ÿ≥",
    nameEn: "Lotus Caramel",
    description: "ŸÉÿ±ÿßŸÖŸäŸÑ ŸÑÿ∞Ÿäÿ∞ ŸÖÿπ ÿ®ÿ≥ŸÉŸàŸäÿ™ ŸÑŸàÿ™ÿ≥ ÿßŸÑŸÖŸÇÿ±ŸÖÿ¥",
    descriptionEn: "Delicious caramel with crunchy Lotus biscuits",
    price: 38,
    image: "https://images.unsplash.com/photo-1560008581-09826d1de69e?w=800&q=80",
    category: "ŸÖŸÖŸäÿ≤",
    categoryEn: "Special",
    badge: "ÿßŸÑÿ£ŸÉÿ´ÿ± ÿ∑ŸÑÿ®ÿßŸã"
  },
  {
    id: "14",
    name: "ŸÉÿßÿ±ÿßŸÖŸäŸÑ ÿ≥ŸàŸÑÿ™",
    nameEn: "Salted Caramel",
    description: "ŸÉÿßÿ±ÿßŸÖŸäŸÑ ŸÖÿßŸÑÿ≠ ÿ®ŸÜŸÉŸáÿ© ŸÅÿ±ŸäÿØÿ©",
    descriptionEn: "Salted caramel with unique flavor",
    price: 36,
    image: "https://images.unsplash.com/photo-1570197788417-0e82375c9371?w=800&q=80",
    category: "ŸÖŸÖŸäÿ≤",
    categoryEn: "Special",
    badge: ""
  },
  {
    id: "15",
    name: "ŸÉŸäŸÜÿØÿ± ÿ®ŸàŸäŸÜŸà",
    nameEn: "Kinder Bueno",
    description: "ŸÜŸÉŸáÿ© ŸÉŸäŸÜÿØÿ± ÿ®ŸàŸäŸÜŸà ÿßŸÑÿ¥ŸáŸäÿ±ÿ© ŸÖÿπ ÿßŸÑÿ®ŸÜÿØŸÇ",
    descriptionEn: "Famous Kinder Bueno flavor with hazelnuts",
    price: 40,
    image: "https://i.ibb.co/8gQ15nZ7/558984721-791054437228989-7733276430689348371-n-min.jpg", // üîó
    category: "ŸÖŸÖŸäÿ≤",
    categoryEn: "Special",
    badge: "ÿ¨ÿØŸäÿØ"
  },
  {
    id: "16",
    name: "ÿ≥ŸÜŸäŸÉÿ±ÿ≤ ŸÉÿ±ÿßÿ¥",
    nameEn: "Snickers Crush",
    description: "ÿ¥ŸàŸÉŸàŸÑÿßÿ™ÿ© ÿ≥ŸÜŸäŸÉÿ±ÿ≤ ŸÖÿπ ŸÅŸàŸÑ ÿ≥ŸàÿØÿßŸÜŸä ŸàŸÉÿ±ÿßŸÖŸäŸÑ",
    descriptionEn: "Snickers chocolate with peanuts and caramel",
    price: 37,
    image: "[ÿ£ÿ∂ŸÅ_ÿ±ÿßÿ®ÿ∑_ÿßŸÑÿµŸàÿ±ÿ©_ŸáŸÜÿß]", // üîó
    category: "ŸÖŸÖŸäÿ≤",
    categoryEn: "Special",
    badge: ""
  },
  {
    id: "17",
    name: "ÿ™ŸàŸäŸÉÿ≥ ÿØŸäŸÑÿßŸäÿ™",
    nameEn: "Twix Delight",
    description: "ŸÉÿ±ÿßŸÖŸäŸÑ Ÿàÿ®ÿ≥ŸÉŸàŸäÿ™ ÿπŸÑŸâ ÿ∑ÿ±ŸäŸÇÿ© ÿ™ŸàŸäŸÉÿ≥",
    descriptionEn: "Caramel and biscuit Twix style",
    price: 36,
    image: "[ÿ£ÿ∂ŸÅ_ÿ±ÿßÿ®ÿ∑_ÿßŸÑÿµŸàÿ±ÿ©_ŸáŸÜÿß]", // üîó
    category: "ŸÖŸÖŸäÿ≤",
    categoryEn: "Special",
    badge: ""
  },

  // ========================================
  // üëë ŸÅÿßÿÆÿ± - Premium
  // ========================================
  {
    id: "18",
    name: "ÿ®ÿ≥ÿ™ÿßÿ¥ŸäŸà ŸÅÿßÿÆÿ±",
    nameEn: "Premium Pistachio",
    description: "ÿ®ÿ≥ÿ™ÿßÿ¥ŸäŸà ÿ•Ÿäÿ∑ÿßŸÑŸä ÿ£ÿµŸÑŸä ÿ®ÿ∑ÿπŸÖ ÿ∫ŸÜŸä",
    descriptionEn: "Original Italian pistachio with rich taste",
    price: 40,
    image: "https://images.unsplash.com/photo-1516834474-48c0abc2902?w=800&q=80",
    category: "ŸÅÿßÿÆÿ±",
    categoryEn: "Premium",
    badge: ""
  },
  {
    id: "19",
    name: "ŸÜŸàÿ™ŸäŸÑÿß ÿ®ÿ±ÿßŸàŸÜŸä",
    nameEn: "Nutella Brownie",
    description: "ŸÜŸàÿ™ŸäŸÑÿß ŸÉÿ±ŸäŸÖŸäÿ© ŸÖÿπ ŸÇÿ∑ÿπ ÿ®ÿ±ÿßŸàŸÜŸä",
    descriptionEn: "Creamy Nutella with brownie pieces",
    price: 42,
    image: "https://images.unsplash.com/photo-1567206563064-6f60f40a2b57?w=800&q=80",
    category: "ŸÅÿßÿÆÿ±",
    categoryEn: "Premium",
    badge: "ÿ≠ÿµÿ±Ÿä"
  },
  {
    id: "20",
    name: "ÿ±ŸäÿØ ŸÅŸäŸÑŸÅÿ™",
    nameEn: "Red Velvet",
    description: "ÿ¢Ÿäÿ≥ ŸÉÿ±ŸäŸÖ ÿ®ŸÜŸÉŸáÿ© ÿßŸÑŸÉŸäŸÉ ÿßŸÑÿ£ÿ≠ŸÖÿ± ÿßŸÑÿ¥ŸáŸäÿ±",
    descriptionEn: "Ice cream with famous red cake flavor",
    price: 38,
    image: "https://images.unsplash.com/photo-1562440499-64c9a4ed3a55?w=800&q=80",
    category: "ŸÅÿßÿÆÿ±",
    categoryEn: "Premium",
    badge: ""
  },
  {
    id: "21",
    name: "ÿ™Ÿäÿ±ÿßŸÖŸäÿ≥Ÿà ÿ•Ÿäÿ∑ÿßŸÑŸä",
    nameEn: "Italian Tiramisu",
    description: "ŸÜŸÉŸáÿ© ÿßŸÑÿ™Ÿäÿ±ÿßŸÖŸäÿ≥Ÿà ÿßŸÑÿ•Ÿäÿ∑ÿßŸÑŸä ÿßŸÑÿ£ÿµŸäŸÑ",
    descriptionEn: "Authentic Italian Tiramisu flavor",
    price: 44,
    image: "[ÿ£ÿ∂ŸÅ_ÿ±ÿßÿ®ÿ∑_ÿßŸÑÿµŸàÿ±ÿ©_ŸáŸÜÿß]", // üîó
    category: "ŸÅÿßÿÆÿ±",
    categoryEn: "Premium",
    badge: "ÿ≠ÿµÿ±Ÿä"
  },
  {
    id: "22",
    name: "ÿ¥Ÿäÿ≤ ŸÉŸäŸÉ ÿ®ŸÑŸàÿ®Ÿäÿ±Ÿä",
    nameEn: "Blueberry Cheesecake",
    description: "ÿ¥Ÿäÿ≤ ŸÉŸäŸÉ ŸÉÿ±ŸäŸÖŸä ŸÖÿπ ÿµŸàÿµ ÿ®ŸÑŸàÿ®Ÿäÿ±Ÿä",
    descriptionEn: "Creamy cheesecake with blueberry sauce",
    price: 41,
    image: "[ÿ£ÿ∂ŸÅ_ÿ±ÿßÿ®ÿ∑_ÿßŸÑÿµŸàÿ±ÿ©_ŸáŸÜÿß]", // üîó
    category: "ŸÅÿßÿÆÿ±",
    categoryEn: "Premium",
    badge: ""
  },
  {
    id: "23",
    name: "ŸÅŸäÿ±Ÿäÿ±Ÿà ÿ±Ÿàÿ¥ŸäŸá",
    nameEn: "Ferrero Rocher",
    description: "ÿ¥ŸàŸÉŸàŸÑÿßÿ™ÿ© ŸÅŸäÿ±Ÿäÿ±Ÿà ÿßŸÑŸÅÿßÿÆÿ±ÿ© ŸÖÿπ ÿßŸÑÿ®ŸÜÿØŸÇ",
    descriptionEn: "Luxurious Ferrero chocolate with hazelnuts",
    price: 45,
    image: "[ÿ£ÿ∂ŸÅ_ÿ±ÿßÿ®ÿ∑_ÿßŸÑÿµŸàÿ±ÿ©_ŸáŸÜÿß]", // üîó
    category: "ŸÅÿßÿÆÿ±",
    categoryEn: "Premium",
    badge: "VIP"
  }
];

// ================================================================
// ===== ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ ŸÑŸÑÿ™ÿπÿØŸäŸÑ - Edit Notes =====
// ================================================================
/*
üìù ŸÉŸäŸÅŸäÿ© ÿßŸÑÿ•ÿ∂ÿßŸÅÿ©/ÿßŸÑÿ™ÿπÿØŸäŸÑ:

1Ô∏è‚É£ ŸÑÿ•ÿ∂ÿßŸÅÿ© ŸÖŸÜÿ™ÿ¨ ÿ¨ÿØŸäÿØ:
   - ÿßŸÜÿ≥ÿÆ ÿ£Ÿä ŸÖŸÜÿ™ÿ¨ ŸÖŸàÿ¨ŸàÿØ
   - ÿ∫ŸäŸëÿ± ÿßŸÑŸÄ id (Ÿäÿ¨ÿ® ÿ£ŸÜ ŸäŸÉŸàŸÜ ŸÅÿ±ŸäÿØ)
   - ÿπÿØŸëŸÑ ÿßŸÑÿßÿ≥ŸÖ ŸàÿßŸÑŸàÿµŸÅ ŸàÿßŸÑÿ≥ÿπÿ±
   - ÿ£ÿ∂ŸÅ ÿ±ÿßÿ®ÿ∑ ÿßŸÑÿµŸàÿ±ÿ©

2Ô∏è‚É£ ÿ±Ÿàÿßÿ®ÿ∑ ÿßŸÑÿµŸàÿ±:
   - ÿßÿ≥ÿ™ÿÆÿØŸÖ Unsplash: https://unsplash.com
   - ÿ£Ÿà ImgBB: https://imgbb.com
   - ÿ£Ÿà ÿ£Ÿä ÿ±ÿßÿ®ÿ∑ ÿµŸàÿ±ÿ© ŸÖÿ®ÿßÿ¥ÿ±

3Ô∏è‚É£ ÿßŸÑŸÄ badge (ÿßŸÑÿ¥ÿßÿ±ÿ©):
   - ÿßÿ™ÿ±ŸÉŸá ŸÅÿßÿ±ÿ∫ "" ÿ•ÿ∞ÿß ŸÑŸÖ ÿ™ÿ±ŸäÿØ ÿ¥ÿßÿ±ÿ©
   - ÿ£ŸÖÿ´ŸÑÿ©: "ÿ¨ÿØŸäÿØ", "ÿßŸÑÿ£ŸÉÿ´ÿ± ŸÖÿ®ŸäÿπÿßŸã", "ÿ≠ÿµÿ±Ÿä", "ÿ∑ÿßÿ≤ÿ¨"

4Ô∏è‚É£ ÿßŸÑÿ£ŸÇÿ≥ÿßŸÖ ÿßŸÑÿ≠ÿßŸÑŸäÿ©:
   - ŸÉŸÑÿßÿ≥ŸäŸÉ (Classic)
   - ŸÅŸàÿßŸÉŸá (Fruits)
   - ŸÖŸÖŸäÿ≤ (Special)
   - ŸÅÿßÿÆÿ± (Premium)

5Ô∏è‚É£ ŸÑÿ•ÿ∂ÿßŸÅÿ© ŸÇÿ≥ŸÖ ÿ¨ÿØŸäÿØ:
   - ÿ£ÿ∂ŸÅ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ ŸÖÿπ category ÿ¨ÿØŸäÿØ
   - ÿ£ÿ∂ŸÅ ÿßŸÑÿ£ŸäŸÇŸàŸÜÿ© ŸÅŸä iconMap ÿØÿßÿÆŸÑ renderCategories()
*/

let cart = [];
let currentLang = 'ar';
let currentTab = 'menu';
let selectedCategory = 'all';
let searchQuery = '';
let fuse;
let currentProduct = null;
let modalQuantity = 1;
let userData = null; // ÿ•ÿ∂ÿßŸÅÿ©: ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ŸÑŸÑŸàŸÑÿßÿ° (name, phone, visitCount)



// ================================================================
// ===== ÿßŸÑÿ™ŸáŸäÿ¶ÿ© =====
// ================================================================
/*
document.addEventListener('DOMContentLoaded', function() {
  // Initialize Lucide icons
  lucide.createIcons();
  
  // Initialize Fuse.js
  fuse = new Fuse(products, {
    keys: ['name', 'nameEn', 'description', 'descriptionEn', 'category', 'categoryEn'],
    threshold: 0.3
  });
  
  // Load saved data
  loadSavedData();
  
  // Initialize UI
  renderCategories();

  renderProducts();
  updateCart();
  
  // Setup scroll listener
  window.addEventListener('scroll', handleScroll);
  
  // Setup search input
  document.getElementById('searchInput').setAttribute('placeholder', translations[currentLang].searchPlaceholder);
  
  // Create snowflakes
  createSnowflakes();
});*/
// ================================================================
// ===== Categories Sticky Handler =====
// ================================================================
let categoriesOriginalOffset = 0;

function handleCategoriesSticky() {
  const header = document.getElementById('header');
  const categories = document.getElementById('categoriesSection');
  
  if (!header || !categories) return;
  
  const headerHeight = header.getBoundingClientRect().height;
  const scrollY = window.scrollY;
  
  // ‚úÖ ŸÑŸà ÿßŸÑÿ≥ŸÉÿ±ŸàŸÑ ŸàÿµŸÑ ŸÑŸÖŸàÿ∂ÿπ ÿßŸÑŸÄ Categories
  if (scrollY >= categoriesOriginalOffset - headerHeight) {
    categories.classList.add('visible');
    categories.style.top = `${headerHeight}px`;
    
    // ‚úÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÉÿßÿ™Ÿäÿ¨Ÿàÿ±Ÿä ÿßŸÑŸÜÿ¥ÿ∑ÿ©
    updateActiveCategory();
  } else {
    categories.classList.remove('visible');
  }
}

// ‚úÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÉÿßÿ™Ÿäÿ¨Ÿàÿ±Ÿä ÿßŸÑŸÜÿ¥ÿ∑ÿ© ÿ£ÿ´ŸÜÿßÿ° ÿßŸÑŸÄ scroll
function updateActiveCategory() {
  const categoryGroups = document.querySelectorAll('.category-group');
  if (categoryGroups.length === 0) return;
  
  const header = document.getElementById('header');
  const categories = document.getElementById('categoriesSection');
  
  if (!header || !categories) return;
  
  const headerHeight = header.getBoundingClientRect().height;
  const categoriesHeight = categories.getBoundingClientRect().height;
  const offset = headerHeight + categoriesHeight + 50;
  
  let activeCategory = null;
  
  categoryGroups.forEach(group => {
    const rect = group.getBoundingClientRect();
    if (rect.top <= offset && rect.bottom > offset) {
      activeCategory = group.id.replace('category-', '');
    }
  });
  
  if (activeCategory) {
    const tabs = document.querySelectorAll('.category-tab');
    tabs.forEach(tab => {
      tab.classList.remove('active');
      const onclick = tab.getAttribute('onclick');
      if (onclick && onclick.includes(`'${activeCategory}'`)) {
        tab.classList.add('active');
      }
    });
  }
}

// ================================================================
// ===== Scroll Handler =====
// ================================================================
let scrollTicking = false;

function handleScroll() {
  if (!scrollTicking) {
    window.requestAnimationFrame(() => {
      const header = document.getElementById('header');
      
      if (header) {
        if (window.scrollY > 50) {
          header.classList.add('scrolled');
          document.body.classList.add('scrolled');
        } else {
          header.classList.remove('scrolled');
          document.body.classList.remove('scrolled');
        }
      }
      
      handleCategoriesSticky();
      scrollTicking = false;
    });
    
    scrollTicking = true;
  }
}
// ================================================================
// ===== Category Selection =====
// ================================================================
function selectCategory(category, element) {
  // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÄ active tab
  document.querySelectorAll('.category-tab').forEach(btn => btn.classList.remove('active'));
  if (element) element.classList.add('active');
  
  if (category === 'all') {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  } else {
    const el = document.getElementById(`category-${category}`);
    if (el) {
      const header = document.getElementById('header');
      const categories = document.getElementById('categoriesSection');
      
      const headerHeight = header ? header.getBoundingClientRect().height : 100;
      const categoriesHeight = categories ? categories.getBoundingClientRect().height : 80;
      const offset = headerHeight + categoriesHeight + 20;
      
      const elementPosition = el.getBoundingClientRect().top + window.pageYOffset;
      window.scrollTo({ 
        top: elementPosition - offset, 
        behavior: 'smooth' 
      });
    }
  }
}

// ================================================================
// ===== Utility Functions =====
// ================================================================
function scrollToTop() {
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

// ================================================================
// ===== ÿßŸÑÿ™ŸáŸäÿ¶ÿ© ÿßŸÑÿπÿßŸÖÿ© =====
// ================================================================
// ================================================================
// ===== ÿßŸÑÿ™ŸáŸäÿ¶ÿ© ÿßŸÑÿπÿßŸÖÿ© =====
// ================================================================
document.addEventListener('DOMContentLoaded', function() {
  // 1Ô∏è‚É£ ÿ£ŸäŸÇŸàŸÜÿßÿ™ Lucide
  lucide.createIcons();

  // 2Ô∏è‚É£ ÿ•ÿπÿØÿßÿØ ÿßŸÑÿ®ÿ≠ÿ´ (Fuse.js)
  fuse = new Fuse(products, {
    keys: ['name', 'nameEn', 'description', 'descriptionEn', 'category', 'categoryEn'],
    threshold: 0.3
  });

  // 3Ô∏è‚É£ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿÆÿ≤ŸÜÿ©
  loadSavedData();

  // 4Ô∏è‚É£ ÿπÿ±ÿ∂ ÿßŸÑÿ™ÿµŸÜŸäŸÅÿßÿ™ ŸàÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™
  renderCategories();
  renderProducts();

  // 5Ô∏è‚É£ ÿ™ÿ≠ÿØŸäÿ´ ÿ≠ÿßŸÑÿ© ÿßŸÑÿ≥ŸÑÿ©
  updateCart();

  // 6Ô∏è‚É£ ÿ•ÿπÿØÿßÿØ Scroll Handler
  window.addEventListener('scroll', handleScroll, { passive: true });
  console.log('‚úÖ Scroll listener attached');

  // 7Ô∏è‚É£ ÿ≠ŸÅÿ∏ ŸÖŸàÿ∂ÿπ ÿßŸÑŸÉÿßÿ™Ÿäÿ¨Ÿàÿ±Ÿä ÿßŸÑÿ£ÿµŸÑŸä
  const categories = document.getElementById('categoriesSection');
  if (categories) {
    setTimeout(() => {
      categoriesOriginalOffset = categories.offsetTop;
      console.log('üìå Categories original position:', categoriesOriginalOffset);
    }, 100);
  }

  // 8Ô∏è‚É£ ÿ•ÿπÿØÿßÿØ placeholder ÿßŸÑÿ®ÿ≠ÿ´
  const searchInput = document.getElementById('searchInput');
  if (searchInput) {
    searchInput.setAttribute('placeholder', translations[currentLang].searchPlaceholder);
  }

  // 9Ô∏è‚É£ ÿ•ŸÜÿ¥ÿßÿ° ÿ™ÿ£ÿ´Ÿäÿ± ÿßŸÑÿ´ŸÑÿ¨
  createSnowflakes();

  console.log('‚úÖ Ÿàÿßÿ¨Ÿáÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿ™ŸÖ ÿ™ŸáŸäÿ¶ÿ™Ÿáÿß ÿ®ÿßŸÑŸÉÿßŸÖŸÑ');
});
// ================================================================
// ===== ÿ≠ŸÅÿ∏ Ÿàÿßÿ≥ÿ™ÿπÿßÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ =====
// ================================================================
function loadSavedData() {
  const savedTheme = localStorage.getItem('theme');
  if (savedTheme === 'dark') {
    document.body.classList.add('dark');
    document.getElementById('theme-icon').setAttribute('data-lucide', 'sun');
    lucide.createIcons();
  }
  
  const savedLang = localStorage.getItem('language');
  if (savedLang) {
    currentLang = savedLang;
    updateLanguage();
  }
  
  const savedCart = localStorage.getItem('cart');
  if (savedCart) {
    try {
      cart = JSON.parse(savedCart);
    } catch (e) {
      cart = [];
    }
  }
  
  // ÿ•ÿ∂ÿßŸÅÿ©: ÿ™ÿ≠ŸÖŸäŸÑ userData ŸÑŸÑŸàŸÑÿßÿ°
  const savedUser = localStorage.getItem('userData');
  if (savedUser) {
    try {
      userData = JSON.parse(savedUser);
    } catch (e) {
      userData = null;
    }
  }
}

// ================================================================
// ===== ÿ™ÿ£ÿ´Ÿäÿ±ÿßÿ™ ÿ®ÿµÿ±Ÿäÿ© ŸÖÿ™ŸÇÿØŸÖÿ© =====
// ================================================================
/*
function createSnowflakes() {
  const snowflakes = ['‚ùÑ', 'üå®', '‚ùÖ', 'üî•', '‚ú®', 'üí´', '‚≠ê'];
  const container = document.querySelector('.animated-background');
  
  function addSnowflake() {
    const snowflake = document.createElement('div');
    snowflake.className = 'snowflake';
    snowflake.textContent = snowflakes[Math.floor(Math.random() * snowflakes.length)];
    snowflake.style.left = Math.random() * 100 + '%';
    snowflake.style.animationDuration = (Math.random() * 10 + 15) + 's';
    snowflake.style.opacity = Math.random() * 0.6 + 0.2;
    snowflake.style.fontSize = (Math.random() * 0.8 + 0.8) + 'rem';
    
    container.appendChild(snowflake);
    
    setTimeout(() => {
      if (container.contains(snowflake)) {
        container.removeChild(snowflake);
      }
    }, 25000);
  }
  
  // ÿ•ÿ∂ÿßŸÅÿ© ŸÜÿØŸÅÿ© ÿ´ŸÑÿ¨ ŸÉŸÑ 3 ÿ´ŸàÿßŸÜ
  setInterval(addSnowflake, 3000);
  
  // ÿ•ÿ∂ÿßŸÅÿ© ÿ®ÿπÿ∂ ÿßŸÑŸÜÿØŸÅ ÿßŸÑÿ£ŸàŸÑŸäÿ©
  for (let i = 0; i < 5; i++) {
    setTimeout(addSnowflake, i * 1000);
  }
}*/
function createSnowflakes() {
  const snowflakeChars = ['‚ùÑ', 'üå®', '‚ùÖ', '‚ú®', 'üí´', '‚≠ê'];
  const container = document.querySelector('.animated-background');

  // ÿ™ÿ£ŸÉÿØ ÿ£ŸÜ ÿßŸÑÿ≠ÿßŸàŸäÿ© ŸÖŸàÿ¨ŸàÿØÿ©
  if (!container) return;

  function addSnowflake() {
    const snowflake = document.createElement('div');
    snowflake.className = 'snowflake';

    // ÿßÿÆÿ™Ÿäÿßÿ± ÿ¥ŸÉŸÑ ÿπÿ¥Ÿàÿßÿ¶Ÿä
    snowflake.textContent = snowflakeChars[Math.floor(Math.random() * snowflakeChars.length)];

    // ŸÖŸàŸÇÿπ ÿ£ŸÅŸÇŸä ÿπÿ¥Ÿàÿßÿ¶Ÿä
    snowflake.style.left = Math.random() * 100 + '%';

    // ÿ≠ÿ¨ŸÖ ŸàÿÆŸÅÿ© ŸÖÿÆÿ™ŸÑŸÅÿ©
    const size = Math.random() * 1.2 + 0.6; // ŸÖŸÜ 0.6rem ÿ•ŸÑŸâ 1.8rem
    snowflake.style.fontSize = size + 'rem';

    // ŸÖÿØÿ© ÿßŸÑÿ≥ŸÇŸàÿ∑ (ŸÖŸÜ 8 ÿ•ŸÑŸâ 18 ÿ´ÿßŸÜŸäÿ©)
    const duration = Math.random() * 10 + 8;
    snowflake.style.animationDuration = duration + 's';

    // ÿ™ÿ£ÿÆŸäÿ± ÿπÿ¥Ÿàÿßÿ¶Ÿä ŸÑÿ®ÿØÿßŸäÿ© ÿßŸÑÿ≠ÿ±ŸÉÿ©
    snowflake.style.animationDelay = Math.random() * 5 + 's';

    // ÿ¥ŸÅÿßŸÅŸäÿ© ŸÖÿÆÿ™ŸÑŸÅÿ©
    snowflake.style.opacity = Math.random() * 0.5 + 0.3;

    // ÿ≠ÿ±ŸÉÿ© ÿ¨ÿßŸÜÿ®Ÿäÿ© ÿÆŸÅŸäŸÅÿ© ÿ£ÿ´ŸÜÿßÿ° ÿßŸÑÿ≥ŸÇŸàÿ∑
    const horizontalShift = Math.random() * 30 - 15; // ¬±15px
    snowflake.style.setProperty('--x-shift', `${horizontalShift}px`);

    container.appendChild(snowflake);

    // ÿ≠ÿ∞ŸÅ ÿßŸÑÿπŸÜÿµÿ± ÿ®ÿπÿØ ÿßŸÜÿ™Ÿáÿßÿ° ÿßŸÑÿ≠ÿ±ŸÉÿ©
    setTimeout(() => {
      snowflake.remove();
    }, (duration + 5) * 1000);
  }

  // ÿ•ŸÜÿ¥ÿßÿ° ÿ£ŸàŸÑŸä ŸÑÿπÿØÿØ ŸÖŸÜ ÿßŸÑŸÜÿØŸÅ
  for (let i = 0; i < 10; i++) {
    setTimeout(addSnowflake, i * 500);
  }

  // ÿßÿ≥ÿ™ŸÖÿ±ÿßÿ± ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ´ŸÑÿ¨ ŸÉŸÑ 1.5 ÿ´ÿßŸÜŸäÿ©
  setInterval(addSnowflake, 1500);
}

// ================================================================
// ===== ÿ™ÿ®ÿØŸäŸÑ ÿßŸÑŸÑÿ∫ÿ© =====
// ================================================================
function toggleLanguage() {
  currentLang = currentLang === 'ar' ? 'en' : 'ar';
  localStorage.setItem('language', currentLang);
  
  // Update direction
  document.documentElement.setAttribute('lang', currentLang);
  document.documentElement.setAttribute('dir', currentLang === 'ar' ? 'rtl' : 'ltr');
  
  // Update button
  document.getElementById('langToggle').textContent = currentLang === 'ar' ? 'EN' : 'ÿπ';
  
  updateLanguage();
}

function updateLanguage() {
  const t = translations[currentLang];
  
  // Update header
  document.getElementById('header-title').textContent = t.headerTitle;
  document.getElementById('header-subtitle').textContent = t.headerSubtitle;
  
  // Update navigation
  document.getElementById('nav-menu').textContent = t.navMenu;
  document.getElementById('nav-cart').textContent = t.navCart;
  document.getElementById('nav-about').textContent = t.navAbout;
  document.getElementById('nav-contact').textContent = t.navContact;
  
  // Update hero
  document.getElementById('hero-badge').textContent = t.heroBadge;
  document.getElementById('hero-title').textContent = t.heroTitle;
  document.getElementById('hero-description').textContent = t.heroDescription;
  
  // Update search
  document.getElementById('searchInput').setAttribute('placeholder', t.searchPlaceholder);
  
  // Update checkout modal
  if (document.getElementById('checkout-title')) {
    document.getElementById('checkout-title').textContent = t.checkoutTitle;
    document.getElementById('checkout-subtitle').textContent = t.checkoutSubtitle;
    document.getElementById('order-summary-title').textContent = t.orderSummaryTitle;
    document.getElementById('pickup-title').textContent = t.pickupTitle;
    document.getElementById('pickup-desc').textContent = t.pickupDesc;
    document.getElementById('delivery-title').textContent = t.deliveryTitle;
    document.getElementById('delivery-desc').textContent = t.deliveryDesc;
    document.getElementById('name-label').textContent = t.nameLabel;
    document.getElementById('phone-label').textContent = t.phoneLabel;
    document.getElementById('address-label').textContent = t.addressLabel;
    document.getElementById('notes-label').textContent = t.notesLabel;
    document.getElementById('location-btn-text').textContent = t.locationBtnText;
    document.getElementById('cancel-btn').textContent = t.cancelBtn;
    document.getElementById('permission-title').textContent = t.permissionTitle;
    document.getElementById('permission-text').textContent = t.permissionText;
    document.getElementById('permission-cancel').textContent = t.permissionCancel;
    document.getElementById('permission-allow').textContent = t.permissionAllow;
  }
  
  // Re-render products and categories
  renderCategories();
  renderProducts();
  updateCart();
}

// ================================================================
// ===== ÿ™ÿ®ÿØŸäŸÑ ÿßŸÑÿ´ŸäŸÖ =====
// ================================================================
function toggleTheme() {
  document.body.classList.toggle('dark');
  const isDark = document.body.classList.contains('dark');
  const icon = document.getElementById('theme-icon');
  icon.setAttribute('data-lucide', isDark ? 'sun' : 'moon');
  lucide.createIcons();
  localStorage.setItem('theme', isDark ? 'dark' : 'light');
}

// ================================================================
// ===== ÿ™ÿ®ÿØŸäŸÑ ÿßŸÑÿ™ÿßÿ®ÿßÿ™ =====
// ================================================================
function switchTab(tab) {
  currentTab = tab;
  
  // Update nav items
  document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
  event.currentTarget.classList.add('active');
  
  // Update tab content
  document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
  document.getElementById(`${tab}-tab`).classList.add('active');
  
  // Scroll to top
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

// ================================================================
// ===== Scroll Handler =====
// ================================================================
// ================================================================
// ===== Scroll Handler =====
// ================================================================


// ================================================================
// ===== ÿßŸÑŸÅÿ¶ÿßÿ™ =====
// ================================================================
// ===== ÿßŸÑŸÅÿ¶ÿßÿ™ =====
    function renderCategories() {
      const uniqueCategories = [...new Set(products.map(p => p.category))];
      const container = document.getElementById('categoriesScroll');
      
      if (!container) {
        console.error('‚ùå categoriesScroll not found!');
        return;
      }
      
      const iconMap = {
        'ŸÉŸÑÿßÿ≥ŸäŸÉ': 'ice-cream-cone',
        'ŸÅŸàÿßŸÉŸá': 'apple',
        'ŸÖŸÖŸäÿ≤': 'star',
        'ŸÅÿßÿÆÿ±': 'crown'
      };
      
      let html = '<button class="category-tab active" onclick="selectCategory(\'all\', this)"><i data-lucide="grid-3x3"></i><span>ÿßŸÑŸÉŸÑ</span></button>';
      
      uniqueCategories.forEach(cat => {
        const catName = currentLang === 'ar' ? cat : products.find(p => p.category === cat).categoryEn;
        const icon = iconMap[cat] || 'ice-cream-cone';
        html += `<button class="category-tab" onclick="selectCategory('${cat}', this)"><i data-lucide="${icon}"></i><span>${catName}</span></button>`;
      });
      
      container.innerHTML = html;
      lucide.createIcons();
      
      console.log('‚úÖ Categories rendered:', uniqueCategories.length);
    }
    /*
    function selectCategory(category, element) {
      document.querySelectorAll('.category-tab').forEach(btn => btn.classList.remove('active'));
      if (element) element.classList.add('active');
      
      if (category === 'all') {
        renderProducts();
      } else {
        const el = document.getElementById(`category-${category}`);
        if (el) el.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
    }*/
// ================================================================
// ===== ÿßŸÑÿ®ÿ≠ÿ´ =====
// ================================================================
function handleSearch() {
  const input = document.getElementById('searchInput');
  searchQuery = input.value;
  
  const clearBtn = document.getElementById('clearSearch');
  if (searchQuery.trim()) {
    clearBtn.classList.add('show');
  } else {
    clearBtn.classList.remove('show');
  }
  
  renderProducts();
}

function clearSearch() {
  document.getElementById('searchInput').value = '';
  searchQuery = '';
  document.getElementById('clearSearch').classList.remove('show');
  renderProducts();
}

// ================================================================
// ===== ÿπÿ±ÿ∂ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ =====
// ================================================================
function renderProducts() {
  let filteredProducts = products;
  
  // Search filter
  if (searchQuery.trim()) {
    const searchResults = fuse.search(searchQuery);
    const searchIds = new Set(searchResults.map(r => r.item.id));
    filteredProducts = filteredProducts.filter(p => searchIds.has(p.id));
  }
  
  const container = document.getElementById('productsContainer');
  
  if (filteredProducts.length === 0) {
    const noResultsText = currentLang === 'ar' 
      ? 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖŸÜÿ™ÿ¨ÿßÿ™ ŸÖÿ∑ÿßÿ®ŸÇÿ©' 
      : 'No matching products';
    const tryAgainText = currentLang === 'ar'
      ? 'ÿ¨ÿ±ÿ® ŸÉŸÑŸÖÿßÿ™ ÿ®ÿ≠ÿ´ ÿ£ÿÆÿ±Ÿâ'
      : 'Try different search terms';
    
    container.innerHTML = `
      <div class="no-results">
        <div class="no-results-icon">üîç</div>
        <h3 class="no-results-title">${noResultsText}</h3>
        <p class="no-results-text">${tryAgainText}</p>
      </div>
    `;
    return;
  }
  
  // Group by category
  const groupedProducts = {};
  filteredProducts.forEach(product => {
    if (!groupedProducts[product.category]) {
      groupedProducts[product.category] = [];
    }
    groupedProducts[product.category].push(product);
  });
  
  let html = '';
  Object.keys(groupedProducts).forEach(category => {
    const categoryName = currentLang === 'ar' ? category : groupedProducts[category][0].categoryEn;
    const iconMap = {
      'ŸÉŸÑÿßÿ≥ŸäŸÉ': 'ice-cream',
      'ŸÅŸàÿßŸÉŸá': 'apple',
      'ŸÖŸÖŸäÿ≤': 'star',
      'ŸÅÿßÿÆÿ±': 'crown'
    };
    const icon = iconMap[category] || 'ice-cream';
    
    html += `
      <div class="category-group" id="category-${category}">
        <div class="category-header">
          <div class="category-icon">
            <i data-lucide="${icon}"></i>
          </div>
          <h3 class="category-name">${categoryName}</h3>
        </div>
        <div class="products-grid">
    `;
    
    groupedProducts[category].forEach((product, index) => {
      const name = currentLang === 'ar' ? product.name : product.nameEn;
      const description = currentLang === 'ar' ? product.description : product.descriptionEn;
      const badge = product.badge ? `<div class="product-badge">${product.badge}</div>` : '';
      
      html += `
        <div class="product-card" style="animation-delay: ${index * 0.05}s;" onclick="openProductModal('${product.id}')">
          <div class="product-image-container">
            <img src="${product.image}" alt="${name}" class="product-image" loading="lazy">
            ${badge}
          </div>
          <div class="product-content">
            <h3 class="product-name">${name}</h3>
            <p class="product-description">${description}</p>
            <div class="product-footer">
              <div class="product-price">${product.price} ${translations[currentLang].currency}</div>
              <button class="add-to-cart-btn" onclick="addToCart(event, '${product.id}')">
                <i data-lucide="shopping-cart"></i>
              </button>
            </div>
          </div>
        </div>
      `;
    });
    
    html += `
        </div>
      </div>
    `;
  });
  
  container.innerHTML = html;
  lucide.createIcons();
}

// ================================================================
// ===== ÿßŸÑÿ≥ŸÑÿ© =====
// ================================================================
function addToCart(event, productId, quantity = 1) {
  if (event) {
    event.stopPropagation();
  }
  
  const product = products.find(p => p.id === productId);
  if (!product) return;
  
  const existing = cart.find(item => item.id === productId);
  if (existing) {
    existing.quantity += quantity;
  } else {
    cart.push({
      id: product.id,
      name: product.name,
      nameEn: product.nameEn,
      price: product.price,
      quantity: quantity
    });
  }
  
  localStorage.setItem('cart', JSON.stringify(cart));
  updateCart();
  
  // Show toast notification
  try {
    const name = currentLang === 'ar' ? product.name : product.nameEn;
    const addedText = currentLang === 'ar' ? 'ÿ™ŸÖÿ™ ÿßŸÑÿ•ÿ∂ÿßŸÅÿ©! üéâ' : 'Added! üéâ';
    showToast(addedText, `${name} √ó ${quantity}`, 'success');
  } catch (e) {
    console.log('Toast error:', e);
  }
}

function updateCart() {
  const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
  const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
  
  // Update badges
  document.getElementById('navCartBadge').textContent = totalItems;
  document.getElementById('cartBadgeDesktop').textContent = totalItems;
  document.getElementById('cartBadgeMobile').textContent = totalItems;
  
  // Update desktop cart
  updateCartUI('cartItemsDesktop', 'cartTotalDesktop', 'cartFooterDesktop', total);
  
  // Update mobile cart
  updateCartUI('cartItemsMobile', 'cartTotalMobile', 'cartFooterMobile', total);
}

function updateCartUI(itemsId, totalId, footerId, total) {
  const cartItems = document.getElementById(itemsId);
  const cartTotal = document.getElementById(totalId);
  const cartFooter = document.getElementById(footerId);
  
  cartTotal.textContent = `${total} ${translations[currentLang].currency}`;
  
  if (cart.length === 0) {
    const emptyText = currentLang === 'ar' ? 'ÿ≥ŸÑÿ™ŸÉ ŸÅÿßÿ±ÿ∫ÿ© ÿ≠ÿßŸÑŸäÿßŸã' : 'Your cart is empty';
    const emptySubtext = currentLang === 'ar' ? 'ÿ£ÿ∂ŸÅ ÿ®ÿπÿ∂ ÿßŸÑÿ¢Ÿäÿ≥ ŸÉÿ±ŸäŸÖ ÿßŸÑŸÑÿ∞Ÿäÿ∞! üç¶' : 'Add some delicious ice cream! üç¶';
    
    cartItems.innerHTML = `
      <div class="cart-empty">
        <div class="cart-empty-icon">
          <i data-lucide="shopping-basket"></i>
        </div>
        <p style="font-size: 1.125rem; margin-bottom: 0.5rem;">${emptyText}</p>
        <p style="font-size: 0.875rem;">${emptySubtext}</p>
      </div>
    `;
    cartFooter.classList.add('hidden');
    lucide.createIcons();
    return;
  }
  
  cartFooter.classList.remove('hidden');
  
  let html = '';
  cart.forEach(item => {
    const name = currentLang === 'ar' ? item.name : item.nameEn;
    html += `
      <div class="cart-item">
        <div class="cart-item-header">
          <span class="cart-item-name">${name}</span>
          <button class="cart-item-remove" onclick="removeFromCart('${item.id}')">
            <i data-lucide="x"></i>
          </button>
        </div>
        <div class="cart-item-footer">
          <div class="quantity-controls">
            <button class="quantity-btn" onclick="updateQuantity('${item.id}', -1)">
              <i data-lucide="minus"></i>
            </button>
            <span class="quantity-value">${item.quantity}</span>
            <button class="quantity-btn" onclick="updateQuantity('${item.id}', 1)">
              <i data-lucide="plus"></i>
            </button>
          </div>
          <span class="cart-item-price">${item.price * item.quantity} ${translations[currentLang].currency}</span>
        </div>
      </div>
    `;
  });
  
  cartItems.innerHTML = html;
  lucide.createIcons();
}

function updateQuantity(productId, delta) {
  const item = cart.find(i => i.id === productId);
  if (!item) return;
  
  item.quantity = Math.max(1, item.quantity + delta);
  localStorage.setItem('cart', JSON.stringify(cart));
  updateCart();
}

function removeFromCart(productId) {
  cart = cart.filter(item => item.id !== productId);
  localStorage.setItem('cart', JSON.stringify(cart));
  updateCart();
  
  try {
    const removedText = currentLang === 'ar' ? 'ÿ™ŸÖ ÿßŸÑÿ≠ÿ∞ŸÅ' : 'Removed';
    const removedDesc = currentLang === 'ar' ? 'ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖŸÜÿ™ÿ¨ ŸÖŸÜ ÿßŸÑÿ≥ŸÑÿ©' : 'Item removed from cart';
    showToast(removedText, removedDesc, 'error');
  } catch (e) {
    console.log('Toast error:', e);
  }
}

function openCartModal() {
  document.getElementById('cartModal').classList.add('show');
  document.body.style.overflow = 'hidden';
}

function closeCartModal(event) {
  if (event && !event.target.classList.contains('cart-modal-overlay')) return;
  document.getElementById('cartModal').classList.remove('show');
  document.body.style.overflow = '';
}

// ================================================================
// ===== Product Modal =====
// ================================================================
function openProductModal(productId) {
  const product = products.find(p => p.id === productId);
  if (!product) return;
  
  currentProduct = product;
  modalQuantity = 1;
  
  const name = currentLang === 'ar' ? product.name : product.nameEn;
  const description = currentLang === 'ar' ? product.description : product.descriptionEn;
  
  document.getElementById('modalImage').src = product.image;
  document.getElementById('modalTitle').textContent = name;
  document.getElementById('modalDescription').textContent = description;
  document.getElementById('modalPrice').textContent = `${product.price} ${translations[currentLang].currency}`;
  document.getElementById('modalQuantity').textContent = '1';
  updateModalAddButton();
  
  // Render suggestions
  const suggestions = products
    .filter(p => p.id !== productId && p.category === product.category)
    .sort(() => Math.random() - 0.5)
    .slice(0, 4);
  
  const suggestionsGrid = document.getElementById('suggestionsGrid');
  let html = '';
  suggestions.forEach(sug => {
    const sugName = currentLang === 'ar' ? sug.name : sug.nameEn;
    html += `
      <div class="suggestion-card" onclick="openProductModal('${sug.id}')">
        <img src="${sug.image}" alt="${sugName}" class="suggestion-image" loading="lazy">
        <div class="suggestion-info">
          <p class="suggestion-name">${sugName}</p>
          <p class="suggestion-price">${sug.price} ${translations[currentLang].currency}</p>
        </div>
      </div>
    `;
  });
  suggestionsGrid.innerHTML = html;
  
  document.getElementById('productModal').classList.add('show');
  document.body.style.overflow = 'hidden';
  lucide.createIcons();
}

function closeProductModal(event) {
  if (event && !event.target.classList.contains('modal-overlay')) return;
  document.getElementById('productModal').classList.remove('show');
  document.body.style.overflow = '';
  currentProduct = null;
  modalQuantity = 1;
}

function updateModalQuantity(delta) {
  modalQuantity = Math.max(1, modalQuantity + delta);
  document.getElementById('modalQuantity').textContent = modalQuantity;
  updateModalAddButton();
}

function updateModalAddButton() {
  if (!currentProduct) return;
  const total = currentProduct.price * modalQuantity;
  const btnText = currentLang === 'ar' 
    ? `ÿ£ÿ∂ŸÅ ${modalQuantity} ŸÑŸÑÿ≥ŸÑÿ© - ${total} ${translations[currentLang].currency}`
    : `Add ${modalQuantity} to Cart - ${total} ${translations[currentLang].currency}`;
  document.getElementById('modalAddBtnText').textContent = btnText;
}

function addModalToCart() {
  if (!currentProduct) return;
  addToCart(null, currentProduct.id, modalQuantity);
  closeProductModal();
}


// ================================================================
// ŸÜÿ∏ÿßŸÖ ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ∑ŸÑÿ® ÿßŸÑŸÖÿ≠ÿ≥ŸëŸÜ - JavaScript (ŸÖŸèÿµŸÑÿ≠ ŸàŸÜŸáÿßÿ¶Ÿä)
// ================================================================

// ŸÖŸÑÿ≠Ÿàÿ∏ÿ©: Ÿáÿ∞ÿß ÿßŸÑŸÖŸÑŸÅ Ÿäÿπÿ™ŸÖÿØ ÿπŸÑŸâ Ÿàÿ¨ŸàÿØ ÿßŸÑŸÖÿ™ÿ∫Ÿäÿ±ÿßÿ™ ÿßŸÑÿ™ÿßŸÑŸäÿ© ŸÅŸä ŸÖŸÑŸÅÿßÿ™ ÿ£ÿÆÿ±Ÿâ:
// - cart (array): ÿ≥ŸÑÿ© ÿßŸÑŸÖÿ¥ÿ™ÿ±Ÿäÿßÿ™
// - userData (object): ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ
// - currentLang (string): ÿßŸÑŸÑÿ∫ÿ© ÿßŸÑÿ≠ÿßŸÑŸäÿ© 'ar' ÿ£Ÿà 'en'
// - translations (object): ŸÖŸÑŸÅ ÿßŸÑÿ™ÿ±ÿ¨ŸÖÿßÿ™
// - closeCartModal(): ÿØÿßŸÑÿ© ŸÑÿ•ÿ∫ŸÑÿßŸÇ ÿ≥ŸÑÿ© ÿßŸÑŸÖÿ¥ÿ™ÿ±Ÿäÿßÿ™
// - updateCart(): ÿØÿßŸÑÿ© ŸÑÿ™ÿ≠ÿØŸäÿ´ ÿ≥ŸÑÿ© ÿßŸÑŸÖÿ¥ÿ™ÿ±Ÿäÿßÿ™
// - updateLanguage(): ÿØÿßŸÑÿ© ŸÑÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÑÿ∫ÿ©

// Global Variables
let selectedDeliveryMethod = null;
let selectedBranch = null;
let userLocation = null;
let currentOrderData = null;

// Branch Data
const branches = {
  maadi: {
    name: { ar: 'ÿßŸÑŸÖÿπÿßÿØŸä', en: 'Maadi' },
    address: { ar: 'ÿ¥ÿßÿ±ÿπ 9ÿå ÿßŸÑŸÖÿπÿßÿØŸä', en: '9 St, Maadi' },
    location: { lat: 29.9602, lng: 31.2494 }
  },
  zamalek: {
    name: { ar: 'ÿßŸÑÿ≤ŸÖÿßŸÑŸÉ', en: 'Zamalek' },
    address: { ar: 'ÿ¥ÿßÿ±ÿπ 26 ŸäŸàŸÑŸäŸàÿå ÿßŸÑÿ≤ŸÖÿßŸÑŸÉ', en: '26th of July St, Zamalek' },
    location: { lat: 30.0626, lng: 31.2188 }
  },
  downtown: {
    name: { ar: 'Ÿàÿ≥ÿ∑ ÿßŸÑÿ®ŸÑÿØ', en: 'Downtown' },
    address: { ar: 'ÿ¥ÿßÿ±ÿπ ÿ∑ŸÑÿπÿ™ ÿ≠ÿ±ÿ®ÿå Ÿàÿ≥ÿ∑ ÿßŸÑÿ®ŸÑÿØ', en: 'Talaat Harb St, Downtown' },
    location: { lat: 30.0444, lng: 31.2357 }
  }
};

// ================================================================
// Helper: ÿ™ŸàŸÑŸäÿØ UUID v4 ŸÑŸÄ Idempotency Key
// ================================================================
function generateUUID() {
  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
    const r = Math.random() * 16 | 0;
    const v = c === 'x' ? r : (r & 0x3 | 0x8);
    return v.toString(16);
  });
}

// ================================================================
// Initiate Checkout
// ================================================================
function initiateCheckout() {
  // Check if cart exists
  if (typeof cart === 'undefined' || cart.length === 0) {
    console.warn('Cart is empty or undefined');
    return;
  }
  
  // Close cart modal if function exists
  if (typeof closeCartModal === 'function') {
    closeCartModal();
  }
  
  // Reset selections
  selectedDeliveryMethod = null;
  selectedBranch = null;
  
  // Reset form fields
  const nameField = document.getElementById('customerName');
  const phoneField = document.getElementById('customerPhone');
  const addressField = document.getElementById('customerAddress');
  const notesField = document.getElementById('orderNotes');
  
  if (nameField) nameField.value = '';
  if (phoneField) phoneField.value = '';
  if (addressField) addressField.value = '';
  if (notesField) notesField.value = '';
  
  // Auto-fill from userData if available
  if (typeof userData !== 'undefined' && userData) {
    if (nameField) nameField.value = userData.name || '';
    if (phoneField) phoneField.value = userData.phone || '';
  }
  
  // Update order summary
  updateOrderSummary();
  
  // Reset UI state
  document.querySelectorAll('.delivery-option').forEach(opt => opt.classList.remove('selected'));
  document.querySelectorAll('.branch-card').forEach(card => card.classList.remove('selected'));
  
  const branchSelection = document.getElementById('branchSelection');
  const checkoutForm = document.getElementById('checkoutForm');
  if (branchSelection) branchSelection.style.display = 'none';
  if (checkoutForm) checkoutForm.classList.remove('show');
  
  // Show checkout modal
  const checkoutModal = document.getElementById('checkoutModal');
  if (checkoutModal) {
    checkoutModal.classList.add('show');
    document.body.style.overflow = 'hidden';
  }
  
  // Update language if function exists
  if (typeof updateLanguage === 'function') {
    updateLanguage();
  }
  
  // Initialize Lucide icons
  if (typeof lucide !== 'undefined') {
    lucide.createIcons();
  }
}

// ================================================================
// Update Order Summary
// ================================================================
function updateOrderSummary() {
  const orderItems = document.getElementById('orderItems');
  if (!orderItems) return;
  
  // Check if cart and translations exist
  if (typeof cart === 'undefined' || typeof translations === 'undefined' || typeof currentLang === 'undefined') {
    console.warn('Required variables not found: cart, translations, or currentLang');
    return;
  }
  
  let html = '';
  let subtotal = 0;
  
  cart.forEach(item => {
    const name = currentLang === 'ar' ? (item.name || item.nameEn) : (item.nameEn || item.name);
    const itemTotal = item.price * item.quantity;
    subtotal += itemTotal;
    
    const currency = translations[currentLang] ? translations[currentLang].currency : 'ÿ¨.ŸÖ';
    
    html += '<div class="order-item">';
    html += '<div class="order-item-name">' + name + ' √ó ' + item.quantity + '</div>';
    html += '<div class="order-item-price">' + itemTotal + ' ' + currency + '</div>';
    html += '</div>';
  });
  
  // Add delivery fee if delivery is selected
  const deliveryFee = selectedDeliveryMethod === 'delivery' ? 15 : 0;
  if (deliveryFee > 0) {
    const deliveryText = currentLang === 'ar' ? 'ÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™ŸàÿµŸäŸÑ' : 'Delivery Fee';
    const currency = translations[currentLang] ? translations[currentLang].currency : 'ÿ¨.ŸÖ';
    
    html += '<div class="order-item">';
    html += '<div class="order-item-name">' + deliveryText + '</div>';
    html += '<div class="order-item-price">' + deliveryFee + ' ' + currency + '</div>';
    html += '</div>';
  }
  
  // Calculate discount
  const userDataObj = typeof userData !== 'undefined' ? userData : null;
  const newVisitCount = (userDataObj?.visitCount || 0) + 1;
  let discount = 0;
  if (newVisitCount === 1) discount = 0.2;
  else if (newVisitCount === 2) discount = 0.15;
  else if (newVisitCount >= 3) discount = 0.1;
  
  const discountAmount = subtotal * discount;
  if (discountAmount > 0) {
    const discountText = currentLang === 'ar' 
      ? 'ÿÆÿµŸÖ (' + Math.round(discount * 100) + '%)'
      : 'Discount (' + Math.round(discount * 100) + '%)';
    const currency = translations[currentLang] ? translations[currentLang].currency : 'ÿ¨.ŸÖ';
    
    html += '<div class="order-item">';
    html += '<div class="order-item-name">' + discountText + '</div>';
    html += '<div class="order-item-price">-' + discountAmount.toFixed(2) + ' ' + currency + '</div>';
    html += '</div>';
  }
  
  // Total
  const total = subtotal - discountAmount + deliveryFee;
  const totalText = currentLang === 'ar' ? 'ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä' : 'Total';
  const currency = translations[currentLang] ? translations[currentLang].currency : 'ÿ¨.ŸÖ';
  
  html += '<div class="order-item">';
  html += '<div class="order-item-name">' + totalText + '</div>';
  html += '<div class="order-item-price">' + total.toFixed(2) + ' ' + currency + '</div>';
  html += '</div>';
  
  orderItems.innerHTML = html;
}

// ================================================================
// Select Delivery Method
// ================================================================
function selectDeliveryMethod(method) {
  selectedDeliveryMethod = method;
  
  // Update UI
  document.querySelectorAll('.delivery-option').forEach(option => {
    option.classList.remove('selected');
  });
  
  const pickupOption = document.getElementById('pickupOption');
  const deliveryOption = document.getElementById('deliveryOption');
  const branchSelection = document.getElementById('branchSelection');
  const addressGroup = document.getElementById('addressGroup');
  const checkoutForm = document.getElementById('checkoutForm');
  
  if (method === 'pickup') {
    if (pickupOption) pickupOption.classList.add('selected');
    if (branchSelection) branchSelection.style.display = 'block';
    if (addressGroup) addressGroup.style.display = 'none';
    
    // Show form only if branch is already selected
    if (selectedBranch && checkoutForm) {
      checkoutForm.classList.add('show');
    } else if (checkoutForm) {
      checkoutForm.classList.remove('show');
    }
  } else {
    if (deliveryOption) deliveryOption.classList.add('selected');
    if (branchSelection) branchSelection.style.display = 'none';
    if (addressGroup) addressGroup.style.display = 'block';
    if (checkoutForm) checkoutForm.classList.add('show');
    
    selectedBranch = null;
    document.querySelectorAll('.branch-card').forEach(card => card.classList.remove('selected'));
  }
  
  // Update order summary
  updateOrderSummary();
  
  // Reinitialize icons
  if (typeof lucide !== 'undefined') {
    lucide.createIcons();
  }
}

// ================================================================
// Select Branch
// ================================================================
function selectBranch(branchId) {
  selectedBranch = branchId;
  
  // Update UI
  document.querySelectorAll('.branch-card').forEach(card => {
    card.classList.remove('selected');
  });
  
  const selectedCard = document.querySelector('[data-branch="' + branchId + '"]');
  if (selectedCard) {
    selectedCard.classList.add('selected');
  }
  
  // Show form
  const checkoutForm = document.getElementById('checkoutForm');
  if (checkoutForm) {
    checkoutForm.classList.add('show');
    
    // Scroll to form smoothly
    setTimeout(function() {
      checkoutForm.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    }, 100);
  }
}

// ================================================================
// Close Checkout Modal
// ================================================================
function closeCheckoutModal(event) {
  if (event && !event.target.classList.contains('checkout-modal-overlay')) return;
  
  const checkoutModal = document.getElementById('checkoutModal');
  if (checkoutModal) {
    checkoutModal.classList.remove('show');
  }
  document.body.style.overflow = '';
}

// ================================================================
// Request Location
// ================================================================
function requestLocation() {
  if (!navigator.geolocation) {
    const lang = typeof currentLang !== 'undefined' ? currentLang : 'ar';
    showToast(
      lang === 'ar' ? 'ÿÆÿ∑ÿ£' : 'Error',
      lang === 'ar' ? 'ÿßŸÑŸÖÿ™ÿµŸÅÿ≠ ŸÑÿß ŸäÿØÿπŸÖ ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ' : 'Browser does not support geolocation',
      'error'
    );
    return;
  }
  
  // Show permission modal
  const permissionModal = document.getElementById('permissionModal');
  if (permissionModal) {
    permissionModal.classList.add('show');
  }
}

// ================================================================
// Close Permission Modal
// ================================================================
function closePermissionModal() {
  const permissionModal = document.getElementById('permissionModal');
  if (permissionModal) {
    permissionModal.classList.remove('show');
  }
}

// ================================================================
// Allow Location
// ================================================================
function allowLocation() {
  const locationBtn = document.getElementById('locationBtn');
  const lang = typeof currentLang !== 'undefined' ? currentLang : 'ar';
  
  if (locationBtn) {
    locationBtn.disabled = true;
    locationBtn.innerHTML = '<i data-lucide="loader"></i><span>ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ≠ÿØŸäÿØ...</span>';
    
    if (typeof lucide !== 'undefined') {
      lucide.createIcons();
    }
  }
  
  navigator.geolocation.getCurrentPosition(
    function(position) {
      userLocation = {
        lat: position.coords.latitude,
        lng: position.coords.longitude
      };
      
      // Update location button
      if (locationBtn) {
        locationBtn.classList.add('active');
        locationBtn.disabled = false;
        const btnText = lang === 'ar' ? 'ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ ‚úì' : 'Location Set ‚úì';
        locationBtn.innerHTML = '<i data-lucide="check-circle"></i><span>' + btnText + '</span>';
      }
      
      // Fill approximate address
      const addressField = document.getElementById('customerAddress');
      if (addressField) {
        const coords = '(' + position.coords.latitude.toFixed(4) + ', ' + position.coords.longitude.toFixed(4) + ')';
        addressField.value = lang === 'ar' 
          ? 'ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑŸÖŸàŸÇÿπ ÿßŸÑÿ≠ÿßŸÑŸä ' + coords
          : 'Current location set ' + coords;
      }
      
      closePermissionModal();
      
      showToast(
        lang === 'ar' ? 'ÿ™ŸÖ ÿ®ŸÜÿ¨ÿßÿ≠' : 'Success',
        lang === 'ar' ? 'ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿØ ŸÖŸàŸÇÿπŸÉ ÿ®ŸÜÿ¨ÿßÿ≠' : 'Location successfully set',
        'success'
      );
      
      if (typeof lucide !== 'undefined') {
        lucide.createIcons();
      }
    },
    function(error) {
      console.log('Location error:', error);
      
      if (locationBtn) {
        locationBtn.disabled = false;
        const btnText = lang === 'ar' ? 'ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑŸÖŸàŸÇÿπ ÿßŸÑÿ≠ÿßŸÑŸä' : 'Use Current Location';
        locationBtn.innerHTML = '<i data-lucide="map-pin"></i><span>' + btnText + '</span>';
      }
      
      closePermissionModal();
      
      showToast(
        lang === 'ar' ? 'ÿÆÿ∑ÿ£' : 'Error',
        lang === 'ar' ? 'ŸÑŸÖ ŸÜÿ™ŸÖŸÉŸÜ ŸÖŸÜ ÿßŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ŸÖŸàŸÇÿπŸÉ' : 'Could not get your location',
        'error'
      );
      
      if (typeof lucide !== 'undefined') {
        lucide.createIcons();
      }
    },
    {
      enableHighAccuracy: true,
      timeout: 10000,
      maximumAge: 0
    }
  );
}

// ================================================================
// Confirm Order
// ================================================================
function confirmOrder() {
  const lang = typeof currentLang !== 'undefined' ? currentLang : 'ar';
  const trans = typeof translations !== 'undefined' && translations[lang] ? translations[lang] : {};
  
  // Validate delivery method
  if (!selectedDeliveryMethod) {
    showToast(
      lang === 'ar' ? 'ÿÆÿ∑ÿ£' : 'Error',
      lang === 'ar' ? 'ÿßŸÑÿ±ÿ¨ÿßÿ° ÿßÿÆÿ™Ÿäÿßÿ± ÿ∑ÿ±ŸäŸÇÿ© ÿßŸÑÿßÿ≥ÿ™ŸÑÿßŸÖ' : 'Please select pickup method',
      'error'
    );
    return;
  }
  
  // Validate branch for pickup
  if (selectedDeliveryMethod === 'pickup' && !selectedBranch) {
    showToast(
      lang === 'ar' ? 'ÿÆÿ∑ÿ£' : 'Error',
      lang === 'ar' ? 'ÿßŸÑÿ±ÿ¨ÿßÿ° ÿßÿÆÿ™Ÿäÿßÿ± ÿßŸÑŸÅÿ±ÿπ' : 'Please select a branch',
      'error'
    );
    return;
  }
  
  // Get form values
  const nameField = document.getElementById('customerName');
  const phoneField = document.getElementById('customerPhone');
  const addressField = document.getElementById('customerAddress');
  const notesField = document.getElementById('orderNotes');
  
  const name = nameField ? nameField.value.trim() : '';
  const phone = phoneField ? phoneField.value.trim() : '';
  const address = (selectedDeliveryMethod === 'delivery' && addressField) ? addressField.value.trim() : '';
  const notes = notesField ? notesField.value.trim() : '';
  
  // Validate name
  if (!name) {
    showToast(
      lang === 'ar' ? 'ÿÆÿ∑ÿ£' : 'Error',
      lang === 'ar' ? 'ÿßŸÑÿ±ÿ¨ÿßÿ° ÿ•ÿØÿÆÿßŸÑ ÿßÿ≥ŸÖŸÉ' : 'Please enter your name',
      'error'
    );
    return;
  }
  
  // Validate phone (Egyptian phone number)
  const phoneRegex = /^01[0-2,5]{1}[0-9]{8}$/;
  if (!phone || !phoneRegex.test(phone)) {
    showToast(
      lang === 'ar' ? 'ÿÆÿ∑ÿ£' : 'Error',
      lang === 'ar' ? 'ÿßŸÑÿ±ÿ¨ÿßÿ° ÿ•ÿØÿÆÿßŸÑ ÿ±ŸÇŸÖ Ÿáÿßÿ™ŸÅ ŸÖÿµÿ±Ÿä ÿµÿ≠Ÿäÿ≠ (01XXXXXXXXX)' : 'Please enter a valid Egyptian phone number (01XXXXXXXXX)',
      'error'
    );
    return;
  }
  
  // Validate address for delivery
  if (selectedDeliveryMethod === 'delivery' && !address) {
    showToast(
      lang === 'ar' ? 'ÿÆÿ∑ÿ£' : 'Error',
      lang === 'ar' ? 'ÿßŸÑÿ±ÿ¨ÿßÿ° ÿ•ÿØÿÆÿßŸÑ ÿßŸÑÿπŸÜŸàÿßŸÜ' : 'Please enter address',
      'error'
    );
    return;
  }
  
  // Update userData
  const userDataObj = typeof userData !== 'undefined' ? userData : {};
  const newVisitCount = (userDataObj?.visitCount || 0) + 1;
  
  if (typeof userData === 'undefined') {
    window.userData = { name: name, phone: phone, visitCount: newVisitCount };
  } else {
    window.userData = window.userData || {};  // ÿ™ÿ£ŸÉÿØ ŸÖŸÜ Ÿàÿ¨ŸàÿØŸá
    window.userData.name = name;
    window.userData.phone = phone;
    window.userData.visitCount = (window.userData.visitCount || 0) + 1;

  }
  
  try {
    localStorage.setItem('userData', JSON.stringify(window.userData));
  } catch (e) {
    console.warn('Could not save to localStorage:', e);
  }
  
  // Calculate discount
  let discount = 0;
  let discountMessage = '';
  if (newVisitCount === 1) {
    discount = 0.2;
    discountMessage = trans.discountFirst || 'ÿÆÿµŸÖ 20% ŸÑŸÑÿ∑ŸÑÿ® ÿßŸÑÿ£ŸàŸÑ!';
  } else if (newVisitCount === 2) {
    discount = 0.15;
    discountMessage = trans.discountSecond || 'ÿÆÿµŸÖ 15% ŸÑŸÑÿ∑ŸÑÿ® ÿßŸÑÿ´ÿßŸÜŸä!';
  } else if (newVisitCount >= 3) {
    discount = 0.1;
    discountMessage = trans.discountLoyal || 'ÿÆÿµŸÖ 10% ŸÑŸÑÿπŸÖŸÑÿßÿ° ÿßŸÑŸÖŸÖŸäÿ≤ŸäŸÜ!';
  }
  
  // Calculate totals
  const cartObj = typeof cart !== 'undefined' ? cart : [];
  const subtotal = cartObj.reduce(function(sum, item) {
    return sum + (item.price * item.quantity);
  }, 0);
  
  const deliveryFee = selectedDeliveryMethod === 'delivery' ? 15 : 0;
  const discountAmount = subtotal * discount;
  const discountedSubtotal = subtotal - discountAmount;
  const total = discountedSubtotal + deliveryFee;
  
  // Generate order
  const orderId = 'ORD-' + Date.now();
  const orderData = {
    id: orderId,
    idempotencyKey: generateUUID(),
    date: new Date().toLocaleString(lang === 'ar' ? 'ar-EG' : 'en-US'),
    customer: {
      name: name,
      phone: phone,
      address: selectedDeliveryMethod === 'delivery' ? address : '',
      notes: notes
    },
    items: cartObj.map(function(item) {
      return {
        name: lang === 'ar' ? (item.name || item.nameEn) : (item.nameEn || item.name),
        quantity: item.quantity,
        price: item.price,
        subtotal: item.price * item.quantity
      };
    }),
    deliveryMethod: selectedDeliveryMethod,
    branch: selectedDeliveryMethod === 'pickup' ? selectedBranch : null,
    branchInfo: selectedDeliveryMethod === 'pickup' ? branches[selectedBranch] : null,
    deliveryFee: deliveryFee,
    subtotal: subtotal,
    discount: discountAmount,
    discountMessage: discountMessage,
    total: total,
    location: userLocation
  };
  
  currentOrderData = orderData;
  
  // Close checkout modal
  closeCheckoutModal();
  
  // Send order
  handleSendOrder(orderData);
}

// ================================================================
// Handle Send Order
// ================================================================
function handleSendOrder(orderData) {
  const confirmBtn = document.getElementById('confirm-btn');
  const lang = typeof currentLang !== 'undefined' ? currentLang : 'ar';
  let attempts = 0;
  const maxAttempts = 3;
  
  // Disable button
  if (confirmBtn) {
    confirmBtn.disabled = true;
    const btnText = confirmBtn.querySelector('span');
    if (btnText) {
      btnText.textContent = lang === 'ar' ? 'ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ...' : 'Sending...';
    }
  }
  
  // Show processing modal
  showProcessingModal(true, false);
  
  function doSend() {
    attempts++;
    
    // Simulate sending (replace with actual API call)
    setTimeout(function() {
      // Simulate success (90% success rate)
      const success = Math.random() > 0.1 || attempts >= 2;
      
      if (success) {
        handleSuccess(orderData);
      } else {
        handleFailure('Network error - simulated');
      }
    }, 2000);
    
    // For Google Apps Script integration:
    
    if (typeof google !== 'undefined' && google.script && google.script.run) {
      google.script.run
        .withSuccessHandler(handleSuccess)
        .withFailureHandler(handleFailure)
        .handleIncomingOrder(orderData);
    }
    
  }
  
  function handleSuccess(response) {
    // Re-enable button
    if (confirmBtn) {
      confirmBtn.disabled = false;
      const btnText = confirmBtn.querySelector('span');
      if (btnText) {
        btnText.textContent = lang === 'ar' ? 'ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ∑ŸÑÿ®' : 'Confirm Order';
      }
    }
    
    // Hide processing modal
    showProcessingModal(false);
    
    // Clear cart
    if (typeof cart !== 'undefined') {
      cart.length = 0; // Clear array
      try {
        localStorage.removeItem('cart');
      } catch (e) {
        console.warn('Could not clear cart from localStorage:', e);
      }
    }
    
    // Update cart UI if function exists
    if (typeof updateCart === 'function') {
      updateCart();
    }
    
    // Calculate ETA
    const eta = orderData.deliveryMethod === 'pickup' 
      ? (lang === 'ar' ? '‚âà 15 ÿØŸÇŸäŸÇÿ©' : '‚âà 15 minutes')
      : (lang === 'ar' ? '‚âà 30 ÿØŸÇŸäŸÇÿ©' : '‚âà 30 minutes');
    
    // Generate items text for sharing
    const itemsText = orderData.items.map(function(item) {
      return item.name + ' √ó ' + item.quantity;
    }).join(', ');
    
    // Show confirmed modal
    showConfirmedModal(orderData.id, eta, orderData.customer.phone, itemsText, orderData);
    
    // Show toast
    showToast(
      lang === 'ar' ? 'ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ∑ŸÑÿ® ÿ®ŸÜÿ¨ÿßÿ≠! üéâ' : 'Order sent successfully! üéâ',
      eta,
      'success'
    );
  }
  
  function handleFailure(error) {
    console.error('Send order failed:', error);
    
    // Show error in processing modal
    showProcessingModal(true, true);
    
    // Setup retry button
    const retryBtn = document.getElementById('retryBtn');
    if (retryBtn) {
      retryBtn.onclick = function() {
        showProcessingModal(true, false);
        doSend();
      };
    }
    
    // Setup cancel button
    const cancelBtn = document.getElementById('cancelSendBtn');
    if (cancelBtn) {
      cancelBtn.onclick = function() {
        showProcessingModal(false);
        if (confirmBtn) {
          confirmBtn.disabled = false;
          const btnText = confirmBtn.querySelector('span');
          if (btnText) {
            btnText.textContent = lang === 'ar' ? 'ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ∑ŸÑÿ®' : 'Confirm Order';
          }
        }
        showToast(
          lang === 'ar' ? 'ÿ™ŸÖ ÿßŸÑÿ•ŸÑÿ∫ÿßÿ°' : 'Cancelled',
          lang === 'ar' ? 'ŸäŸÖŸÉŸÜŸÉ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ' : 'You can try again',
          'error'
        );
      };
    }
    
    // Auto retry with backoff
    if (attempts < maxAttempts) {
      const backoff = Math.min(3000 * attempts, 10000);
      setTimeout(function() {
        showProcessingModal(true, false);
        doSend();
      }, backoff);
    }
  }
  
  // Initial send
  doSend();
}

// ================================================================
// Show Processing Modal
// ================================================================
function showProcessingModal(show, withActions) {
  const modal = document.getElementById('processingModal');
  if (!modal) return;
  
  if (show) {
    modal.classList.remove('hidden');
    modal.setAttribute('role', 'alert');
    modal.setAttribute('aria-live', 'polite');
  } else {
    modal.classList.add('hidden');
    modal.removeAttribute('role');
    modal.removeAttribute('aria-live');
  }
  
  const actions = document.getElementById('processingActions');
  if (actions) {
    actions.style.display = withActions ? 'block' : 'none';
  }
  
  // Reinitialize icons
  if (typeof lucide !== 'undefined') {
    lucide.createIcons();
  }
}

// ================================================================
// Show Confirmed Modal
// ================================================================
function showConfirmedModal(orderId, eta, phone, itemsText, orderData) {
  const modal = document.getElementById('orderConfirmedModal');
  if (!modal) return;
  
  const lang = typeof currentLang !== 'undefined' ? currentLang : 'ar';
  
  modal.classList.remove('hidden');
  modal.setAttribute('role', 'dialog');
  modal.setAttribute('aria-labelledby', 'confirmed-title');
  
  // Update order ID
  const orderIdEl = document.getElementById('confirmedOrderId');
  if (orderIdEl) orderIdEl.textContent = orderId;
  
  // Update ETA
  const etaEl = document.getElementById('confirmedEta');
  if (etaEl) {
    const etaText = lang === 'ar' 
      ? 'ÿßŸÑŸàŸÇÿ™ ÿßŸÑŸÖÿ™ŸàŸÇÿπ: ' + eta
      : 'Estimated time: ' + eta;
    etaEl.textContent = etaText;
  }
  
  // Show branch info for pickup orders
  const branchInfo = document.getElementById('selectedBranchInfo');
  if (branchInfo && orderData.deliveryMethod === 'pickup' && orderData.branchInfo) {
    branchInfo.style.display = 'block';
    const branchName = document.getElementById('selectedBranchName');
    const branchAddress = document.getElementById('selectedBranchAddress');
    if (branchName) branchName.textContent = orderData.branchInfo.name[lang];
    if (branchAddress) branchAddress.textContent = orderData.branchInfo.address[lang];
  } else if (branchInfo) {
    branchInfo.style.display = 'none';
  }
  
  // Copy button
  const copyBtn = document.getElementById('copyOrderIdBtn');
  if (copyBtn) {
    copyBtn.onclick = function() { copyOrderId(orderId); };
  }
  
  // WhatsApp button
  const whatsappBtn = document.getElementById('shareWhatsAppBtn');
  if (whatsappBtn) {
    whatsappBtn.onclick = function() { shareOnWhatsApp(orderId, itemsText, phone, orderData.total); };
  }
  
  // Track button
  const trackBtn = document.getElementById('trackOrderBtn');
  if (trackBtn) {
    trackBtn.onclick = function() { openTrackingModal(orderId); };
  }
  
  // Close button
  const closeBtn = document.getElementById('closeConfirmedBtn');
  if (closeBtn) {
    closeBtn.onclick = function() {
      modal.classList.add('hidden');
      document.body.style.overflow = '';
    };
  }
  
  // Continue shopping button
  const continueBtn = document.getElementById('continueShoppingBtn');
  if (continueBtn) {
    continueBtn.onclick = function() {
      modal.classList.add('hidden');
      document.body.style.overflow = '';
    };
  }
  
  // Reinitialize icons
  if (typeof lucide !== 'undefined') {
    lucide.createIcons();
  }
}

// ================================================================
// Copy Order ID
// ================================================================
function copyOrderId(orderId) {
  const lang = typeof currentLang !== 'undefined' ? currentLang : 'ar';
  
  if (navigator.clipboard) {
    navigator.clipboard.writeText(orderId).then(function() {
      showToast(
        lang === 'ar' ? 'ÿ™ŸÖ ÿßŸÑŸÜÿ≥ÿÆ' : 'Copied',
        lang === 'ar' ? 'ÿ™ŸÖ ŸÜÿ≥ÿÆ ÿ±ŸÇŸÖ ÿßŸÑÿ∑ŸÑÿ®' : 'Order ID copied',
        'success'
      );
    }).catch(function(err) {
      console.error('Copy failed:', err);
      fallbackCopy(orderId);
    });
  } else {
    fallbackCopy(orderId);
  }
}

function fallbackCopy(text) {
  const lang = typeof currentLang !== 'undefined' ? currentLang : 'ar';
  const textArea = document.createElement('textarea');
  textArea.value = text;
  textArea.style.position = 'fixed';
  textArea.style.left = '-999999px';
  document.body.appendChild(textArea);
  textArea.select();
  
  try {
    document.execCommand('copy');
    showToast(
      lang === 'ar' ? 'ÿ™ŸÖ ÿßŸÑŸÜÿ≥ÿÆ' : 'Copied',
      lang === 'ar' ? 'ÿ™ŸÖ ŸÜÿ≥ÿÆ ÿ±ŸÇŸÖ ÿßŸÑÿ∑ŸÑÿ®' : 'Order ID copied',
      'success'
    );
  } catch (err) {
    showToast(
      lang === 'ar' ? 'ÿÆÿ∑ÿ£' : 'Error',
      lang === 'ar' ? 'ŸÅÿ¥ŸÑ ÿßŸÑŸÜÿ≥ÿÆ' : 'Copy failed',
      'error'
    );
  }
  
  document.body.removeChild(textArea);
}

// ================================================================
// Share on WhatsApp
// ================================================================
function shareOnWhatsApp(orderId, itemsText, phone, total) {
  const lang = typeof currentLang !== 'undefined' ? currentLang : 'ar';
  
  const message = lang === 'ar'
    ? 'üéâ ÿ∑ŸÑÿ® ÿ¨ÿØŸäÿØ!\n\nÿ±ŸÇŸÖ ÿßŸÑÿ∑ŸÑÿ®: ' + orderId + '\nÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™: ' + itemsText + '\nÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä: ' + total + ' ÿ¨.ŸÖ\n\nÿ¥ŸÉÿ±ÿßŸã ŸÑÿ∑ŸÑÿ®ŸÉ!'
    : 'üéâ New Order!\n\nOrder ID: ' + orderId + '\nItems: ' + itemsText + '\nTotal: ' + total + ' EGP\n\nThank you for your order!';
  
  const whatsappUrl = 'https://wa.me/?text=' + encodeURIComponent(message);
  window.open(whatsappUrl, '_blank');
}

// ================================================================
// Open Tracking Modal
// ================================================================
function openTrackingModal(orderId) {
  orderId = orderId || '';
  const modal = document.getElementById('trackingModal');
  if (!modal) return;
  
  modal.classList.remove('hidden');
  
  const input = document.getElementById('trackingInput');
  if (input) {
    input.value = orderId;
    setTimeout(function() { input.focus(); }, 100);
  }
  
  // Close button
  const closeBtn = document.getElementById('closeTrackingBtn');
  if (closeBtn) {
    closeBtn.onclick = function() {
      modal.classList.add('hidden');
    };
  }
  
  // Check status button
  const checkBtn = document.getElementById('checkStatusBtn');
  if (checkBtn) {
    checkBtn.onclick = function() { checkOrderStatus(); };
  }
  
  // Reinitialize icons
  if (typeof lucide !== 'undefined') {
    lucide.createIcons();
  }
}

// ================================================================
// Check Order Status
// ================================================================
function checkOrderStatus() {
  const input = document.getElementById('trackingInput');
  const result = document.getElementById('trackingResult');
  
  if (!input || !result) return;
  
  const lang = typeof currentLang !== 'undefined' ? currentLang : 'ar';
  const orderId = input.value.trim();
  
  if (!orderId) {
    showToast(
      lang === 'ar' ? 'ÿÆÿ∑ÿ£' : 'Error',
      lang === 'ar' ? 'ÿßŸÑÿ±ÿ¨ÿßÿ° ÿ•ÿØÿÆÿßŸÑ ÿ±ŸÇŸÖ ÿßŸÑÿ∑ŸÑÿ®' : 'Please enter order ID',
      'error'
    );
    return;
  }
  
  // Show loading
  result.style.display = 'block';
  
  var loadingHTML = '<div style="text-align: center; padding: 20px;">';
  loadingHTML += '<div class="spinner" style="width: 40px; height: 40px; margin: 0 auto 16px;"></div>';
  loadingHTML += '<p>' + (lang === 'ar' ? 'ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ®ÿ≠ÿ´...' : 'Searching...') + '</p>';
  loadingHTML += '</div>';
  
  result.innerHTML = loadingHTML;
  
  // Simulate API call
  setTimeout(function() {
    var html = '';
    
    // Check if this is the current order
    if (currentOrderData && currentOrderData.id === orderId) {
      const status = lang === 'ar' ? 'ŸÇŸäÿØ ÿßŸÑÿ™ÿ≠ÿ∂Ÿäÿ±' : 'In Preparation';
      const statusColor = '#4CAF50';
      const eta = currentOrderData.deliveryMethod === 'pickup'
        ? (lang === 'ar' ? '‚âà 15 ÿØŸÇŸäŸÇÿ©' : '‚âà 15 minutes')
        : (lang === 'ar' ? '‚âà 30 ÿØŸÇŸäŸÇÿ©' : '‚âà 30 minutes');
      
      html += '<div style="text-align: center;">';
      html += '<div style="width: 60px; height: 60px; background: ' + statusColor + '; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 16px; color: white;">';
      html += '<i data-lucide="chef-hat" style="width: 30px; height: 30px;"></i>';
      html += '</div>';
      html += '<h4 style="font-size: 18px; font-weight: 700; color: #1a1a1a; margin-bottom: 8px;">' + status + '</h4>';
      html += '<p style="font-size: 14px; color: #666; margin-bottom: 16px;">';
      html += (lang === 'ar' ? 'ÿ±ŸÇŸÖ ÿßŸÑÿ∑ŸÑÿ®:' : 'Order ID:') + ' <strong>' + orderId + '</strong>';
      html += '</p>';
      html += '<div style="background: white; padding: 16px; border-radius: 12px; margin-bottom: 12px;">';
      html += '<div style="display: flex; align-items: center; justify-content: center; gap: 8px; margin-bottom: 12px;">';
      html += '<i data-lucide="clock" style="width: 18px; height: 18px; color: #2196F3;"></i>';
      html += '<span style="font-size: 15px; font-weight: 600;">' + eta + '</span>';
      html += '</div>';
      html += '<p style="font-size: 13px; color: #666;">';
      html += (lang === 'ar' ? 'ÿ≥ŸÜŸàÿßŸÅŸäŸÉ ÿ®ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ÿßÿ™ ÿπÿ®ÿ± ÿßŸÑŸáÿßÿ™ŸÅ' : 'We will update you via phone');
      html += '</p>';
      html += '</div>';
      html += '<div style="background: #e8f5e9; padding: 12px; border-radius: 8px; font-size: 13px; color: #2e7d32;">';
      html += '<i data-lucide="check-circle" style="width: 16px; height: 16px; display: inline-block; vertical-align: middle;"></i> ';
      html += (lang === 'ar' ? 'ÿ™ŸÖ ÿ™ÿ£ŸÉŸäÿØ ÿ∑ŸÑÿ®ŸÉ ÿ®ŸÜÿ¨ÿßÿ≠' : 'Your order has been confirmed');
      html += '</div>';
      html += '</div>';
      
    } else {
      // Order not found
      html += '<div style="text-align: center;">';
      html += '<div style="width: 60px; height: 60px; background: #ffebee; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 16px; color: #f44336;">';
      html += '<i data-lucide="search-x" style="width: 30px; height: 30px;"></i>';
      html += '</div>';
      html += '<h4 style="font-size: 18px; font-weight: 700; color: #1a1a1a; margin-bottom: 8px;">';
      html += (lang === 'ar' ? 'ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ÿßŸÑÿ∑ŸÑÿ®' : 'Order Not Found');
      html += '</h4>';
      html += '<p style="font-size: 14px; color: #666; margin-bottom: 16px;">';
      html += (lang === 'ar' ? 'ÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ±ŸÇŸÖ ÿßŸÑÿ∑ŸÑÿ® Ÿàÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ' : 'Check the order ID and try again');
      html += '</p>';
      html += '<div style="background: #fff3e0; padding: 12px; border-radius: 8px; font-size: 13px; color: #e65100;">';
      html += '<i data-lucide="info" style="width: 16px; height: 16px; display: inline-block; vertical-align: middle;"></i> ';
      html += (lang === 'ar' ? 'ÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ•ÿØÿÆÿßŸÑ ÿßŸÑÿ±ŸÇŸÖ ÿ®ÿ¥ŸÉŸÑ ÿµÿ≠Ÿäÿ≠' : 'Make sure to enter the number correctly');
      html += '</div>';
      html += '</div>';
    }
    
    result.innerHTML = html;
    
    // Reinitialize icons
    if (typeof lucide !== 'undefined') {
      lucide.createIcons();
    }
  }, 1500);
}

// ================================================================
// Toast Notification
// ================================================================
function showToast(title, description, type) {
  type = type || 'success';
  const toast = document.getElementById('toast');
  if (!toast) return;
  
  toast.className = 'toast ' + type;
  
  // Update icon
  const iconElement = toast.querySelector('.toast-icon i');
  if (iconElement) {
    const icon = type === 'success' ? 'check-circle-2' : 'x-circle';
    iconElement.setAttribute('data-lucide', icon);
    if (typeof lucide !== 'undefined') {
      lucide.createIcons();
    }
  }
  
  // Update text
  const titleElement = document.getElementById('toast-title');
  const descElement = document.getElementById('toast-description');
  
  if (titleElement) titleElement.textContent = title;
  if (descElement) descElement.textContent = description;
  
  toast.classList.add('show');
  
  setTimeout(function() {
    toast.classList.remove('show');
  }, 4000);
}

// ================================================================
// Close Modals with ESC Key
// ================================================================
document.addEventListener('keydown', function(event) {
  if (event.key === 'Escape') {
    const checkoutModal = document.getElementById('checkoutModal');
    const permissionModal = document.getElementById('permissionModal');
    const processingModal = document.getElementById('processingModal');
    const confirmedModal = document.getElementById('orderConfirmedModal');
    const trackingModal = document.getElementById('trackingModal');
    
    if (checkoutModal && checkoutModal.classList.contains('show')) {
      closeCheckoutModal();
    }
    if (permissionModal && permissionModal.classList.contains('show')) {
      closePermissionModal();
    }
    if (processingModal && !processingModal.classList.contains('hidden')) {
      return;
    }
    if (confirmedModal && !confirmedModal.classList.contains('hidden')) {
      confirmedModal.classList.add('hidden');
      document.body.style.overflow = '';
    }
    if (trackingModal && !trackingModal.classList.contains('hidden')) {
      trackingModal.classList.add('hidden');
    }
  }
});

// ================================================================
// Initialize on Page Load
// ================================================================
document.addEventListener('DOMContentLoaded', function() {
  // Initialize Lucide icons
  if (typeof lucide !== 'undefined') {
    lucide.createIcons();
  }
  
  // Setup modal click-outside handlers
  const checkoutModal = document.getElementById('checkoutModal');
  if (checkoutModal) {
    checkoutModal.addEventListener('click', closeCheckoutModal);
  }
  
  // Setup tracking input enter key
  const trackingInput = document.getElementById('trackingInput');
  if (trackingInput) {
    trackingInput.addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        checkOrderStatus();
      }
    });
  }
  
  // Setup phone number formatting
  const phoneInput = document.getElementById('customerPhone');
  if (phoneInput) {
    phoneInput.addEventListener('input', function(e) {
      var value = e.target.value.replace(/\D/g, '');
      if (value.length > 11) {
        value = value.substring(0, 11);
      }
      e.target.value = value;
    });
  }
  
  // Accessibility: trap focus in modals
  setupFocusTrap('checkoutModal');
  setupFocusTrap('permissionModal');
  setupFocusTrap('processingModal');
  setupFocusTrap('orderConfirmedModal');
  setupFocusTrap('trackingModal');
  
  // Auto-save form data
  var formFields = ['customerName', 'customerPhone', 'customerAddress', 'orderNotes'];
  formFields.forEach(function(id) {
    var element = document.getElementById(id);
    if (element) {
      element.addEventListener('input', saveFormData);
    }
  });
});

// ================================================================
// Setup Focus Trap for Accessibility
// ================================================================
function setupFocusTrap(modalId) {
  const modal = document.getElementById(modalId);
  if (!modal) return;
  
  modal.addEventListener('keydown', function(e) {
    if (e.key !== 'Tab') return;
    
    const focusableElements = modal.querySelectorAll(
      'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
    );
    
    if (focusableElements.length === 0) return;
    
    const firstElement = focusableElements[0];
    const lastElement = focusableElements[focusableElements.length - 1];
    
    if (e.shiftKey) {
      if (document.activeElement === firstElement) {
        lastElement.focus();
        e.preventDefault();
      }
    } else {
      if (document.activeElement === lastElement) {
        firstElement.focus();
        e.preventDefault();
      }
    }
  });
}

// ================================================================
// Auto-save Form Data
// ================================================================
function saveFormData() {
  var nameField = document.getElementById('customerName');
  var phoneField = document.getElementById('customerPhone');
  var addressField = document.getElementById('customerAddress');
  var notesField = document.getElementById('orderNotes');
  
  var formData = {
    name: nameField ? nameField.value : '',
    phone: phoneField ? phoneField.value : '',
    address: addressField ? addressField.value : '',
    notes: notesField ? notesField.value : ''
  };
  
  try {
    sessionStorage.setItem('checkoutFormData', JSON.stringify(formData));
  } catch (e) {
    console.warn('Could not save form data:', e);
  }
}

function restoreFormData() {
  try {
    const savedData = sessionStorage.getItem('checkoutFormData');
    if (!savedData) return;
    
    const formData = JSON.parse(savedData);
    
    var nameField = document.getElementById('customerName');
    var phoneField = document.getElementById('customerPhone');
    var addressField = document.getElementById('customerAddress');
    var notesField = document.getElementById('orderNotes');
    
    if (formData.name && nameField) nameField.value = formData.name;
    if (formData.phone && phoneField) phoneField.value = formData.phone;
    if (formData.address && addressField) addressField.value = formData.address;
    if (formData.notes && notesField) notesField.value = formData.notes;
  } catch (e) {
    console.warn('Error restoring form data:', e);
  }
}

// ================================================================
// Utility: Calculate Distance
// ================================================================
function calculateDistance(lat1, lon1, lat2, lon2) {
  var R = 6371;
  var dLat = (lat2 - lat1) * Math.PI / 180;
  var dLon = (lon2 - lon1) * Math.PI / 180;
  var a = Math.sin(dLat/2) * Math.sin(dLat/2) +
          Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
          Math.sin(dLon/2) * Math.sin(dLon/2);
  var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
  return R * c;
}

// ================================================================
// Update Branch Distances
// ================================================================
function updateBranchDistances() {
  if (!userLocation) return;
  
  var lang = typeof currentLang !== 'undefined' ? currentLang : 'ar';
  var branchIds = Object.keys(branches);
  
  branchIds.forEach(function(branchId) {
    var branch = branches[branchId];
    var distance = calculateDistance(
      userLocation.lat,
      userLocation.lng,
      branch.location.lat,
      branch.location.lng
    );
    
    var distanceEl = document.getElementById('branch-' + branchId + '-distance');
    if (distanceEl) {
      var distanceSpan = distanceEl.querySelector('span');
      if (distanceSpan) {
        distanceSpan.textContent = distance.toFixed(1) + ' ' + (lang === 'ar' ? 'ŸÉŸÖ' : 'km');
      }
    }
  });
}

// ================================================================
// Export functions
// ================================================================
if (typeof window !== 'undefined') {
  window.checkoutSystem = {
    initiateCheckout: initiateCheckout,
    selectDeliveryMethod: selectDeliveryMethod,
    selectBranch: selectBranch,
    confirmOrder: confirmOrder,
    requestLocation: requestLocation,
    allowLocation: allowLocation,
    closeCheckoutModal: closeCheckoutModal,
    closePermissionModal: closePermissionModal,
    showProcessingModal: showProcessingModal,
    showConfirmedModal: showConfirmedModal,
    copyOrderId: copyOrderId,
    shareOnWhatsApp: shareOnWhatsApp,
    openTrackingModal: openTrackingModal,
    checkOrderStatus: checkOrderStatus,
    updateBranchDistances: updateBranchDistances
  };
}

console.log('‚úÖ ŸÜÿ∏ÿßŸÖ ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ∑ŸÑÿ® ÿßŸÑŸÖÿ≠ÿ≥ŸëŸÜ ÿ¨ÿßŸáÿ≤ ŸÑŸÑÿßÿ≥ÿ™ÿÆÿØÿßŸÖ');

console.log('‚úÖ ŸÜÿ∏ÿßŸÖ ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ∑ŸÑÿ® ÿßŸÑŸÖÿ≠ÿ≥ŸëŸÜ ÿ¨ÿßŸáÿ≤ ŸÑŸÑÿßÿ≥ÿ™ÿÆÿØÿßŸÖ');
// ================================================================
// ===== Toast Notification =====
// ================================================================
/*
function showToast(title, description, type = 'success') {
  const toast = document.getElementById('toast');
  if (!toast) return;
  
  toast.className = `toast ${type}`;
  
  // Update icon
  const iconElement = toast.querySelector('.toast-icon i');
  if (iconElement) {
    const icon = type === 'success' ? 'check-circle-2' : 'x-circle';
    iconElement.setAttribute('data-lucide', icon);
    lucide.createIcons();
  }
  
  // Update text
  const titleElement = document.getElementById('toast-title');
  const descElement = document.getElementById('toast-description');
  
  if (titleElement) titleElement.textContent = title;
  if (descElement) descElement.textContent = description;
  
  toast.classList.add('show');
  
  setTimeout(() => {
    toast.classList.remove('show');
  }, 4000);
}*/

// ================================================================
// ===== ÿ•ÿ∫ŸÑÿßŸÇ ÿßŸÑŸÜŸàÿßŸÅÿ∞ ÿ®ŸÖŸÅÿ™ÿßÿ≠ ESC =====
// ================================================================
/*
document.addEventListener('keydown', function(event) {
  if (event.key === 'Escape') {
    closeProductModal();
    closeCartModal();
    closeCheckoutModal();
    closePermissionModal();
  }
});*/

// ================================================================
// ===== ÿ£ÿ≠ÿØÿßÿ´ ÿ•ÿ∂ÿßŸÅŸäÿ© ŸÑŸÑÿ¨ŸàÿßŸÑ =====
// ================================================================
document.addEventListener('touchstart', function() {}, { passive: true });

// ŸÖŸÜÿπ ÿßŸÑÿ≥ÿ≠ÿ® ŸàÿßŸÑÿ•ŸÅŸÑÿßÿ™ ŸÑŸÑÿµŸàÿ±
document.addEventListener('dragstart', function(e) {
  if (e.target.tagName === 'IMG') {
    e.preventDefault();
  }
});

// ================================================================
// ===== ÿ™ÿ≠ÿ≥ŸäŸÜÿßÿ™ ÿßŸÑÿ£ÿØÿßÿ° =====
// ================================================================

// Lazy loading ŸÑŸÑÿµŸàÿ±
if ('IntersectionObserver' in window) {
  const imageObserver = new IntersectionObserver((entries, observer) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const img = entry.target;
        if (img.dataset.src) {
          img.src = img.dataset.src;
          img.classList.remove('lazy');
          imageObserver.unobserve(img);
        }
      }
    });
  });
  
  // ÿ™ÿ∑ÿ®ŸäŸÇ lazy loading ÿπŸÜÿØ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™
  window.observeImages = function() {
    document.querySelectorAll('img[data-src]').forEach(img => {
      imageObserver.observe(img);
    });
  };
  
  // ÿßÿ≥ÿ™ÿØÿπÿßÿ° ÿπŸÜÿØ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿµŸÅÿ≠ÿ©
  setTimeout(window.observeImages, 100);
}

// ÿ™ÿ≠ÿ≥ŸäŸÜ ÿßÿ≥ÿ™ŸáŸÑÿßŸÉ ÿßŸÑÿ∞ÿßŸÉÿ±ÿ©
window.addEventListener('beforeunload', function() {
  // ÿ™ŸÜÿ∏ŸäŸÅ ÿßŸÑÿ∞ÿßŸÉÿ±ÿ©
  cart = [];
  products.length = 0;
  if (fuse) {
    fuse = null;
  }
});

// ================================================================
// ===== Scroll Handler (ŸÖŸàÿ≠ŸëÿØ ŸÖÿπ Categories Sticky) =====
// ================================================================
// ‚úÖ ÿØŸá ŸÖŸàÿ¨ŸàÿØ ÿ¨Ÿàÿß DOMContentLoaded - ŸÖÿ¥ ŸÖÿ≠ÿ™ÿßÿ¨ ÿ™ŸÉÿ±ÿßÿ±Ÿá ŸáŸÜÿß

console.log('üç¶ Soft Cream Menu App Loaded Successfully! üéâ');



  </script>
</body>
</html>

