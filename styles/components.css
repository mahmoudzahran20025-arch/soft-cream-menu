/*
 * ===================================================================
 * Soft Cream - Main Stylesheet (components.css)
 * ===================================================================
 * - ✅ محدث بنظام z-index hierarchy الجديد
 * - ✅ تم تنظيف أكواد الكارسول القديم
 * - ✅ تم إضافة تنسيقات كارسول Swiper الجديد
 * - ✅ يتم استيراده من React (react-app/src/styles/index.css)
 * ===================================================================
 */

/* ⚠️ لا تضف @import "tailwindcss" أو @config هنا - يتم استيراده من React */

/* ========================================
 * 2. BASE LAYER
 * ======================================== */
@layer base {
  :root {
    /* Layout Variables (فقط) */
    --sidebar-width: 320px;
    
    /* Z-Index Variables (للتوافق مع الكود القديم) */
    --z-base: 0;
    --z-content: 10;
    --z-carousel: 5;
    --z-carousel-controls: 10;
    --z-products: 2;
    --z-product-hover: 3;
    --z-sticky-categories: 90;
    --z-dropdown: 50;
    --z-header: 100;
    --z-header-elements: 101;
    --z-sidebar-overlay: 900;
    --z-sidebar: 1000;
    --z-modal-overlay: 1900;
    --z-modal-base: 2000;
    --z-modal-nested: 2100;
    --z-modal-processing: 2200;
    --z-modal-close-btn: 2300;
    --z-toast: 5000;
  }

  @media (max-width: 768px) {
    :root {
      --sidebar-width: 300px;
    }
  }

  @media (max-width: 480px) {
    :root {
      --sidebar-width: 280px;
    }
  }

  /* Body Base Styles - Font moved to HTML <body> tag */
  body {
    @apply bg-cream-50 dark:bg-gray-900 text-gray-800 dark:text-gray-100 overflow-x-hidden transition-colors duration-300;
  }

  /* ... (كل أكواد Accessibility و Scrollbars و Keyframes كما هي) ... */
  /* ========================================
   * ACCESSIBILITY ENHANCEMENTS
   * ======================================== */
  :focus-visible { @apply outline-none ring-4 ring-offset-2 ring-primary/50 rounded-md; }
  .form-input:focus-visible, .form-textarea:focus-visible { @apply ring-0; }
  @media (prefers-reduced-motion: reduce) { *, *::before, *::after { animation-duration: 1ms !important; animation-iteration-count: 1 !important; transition-duration: 1ms !important; scroll-behavior: auto !important; } }
  @media (prefers-contrast: high) { .btn-primary, .btn-secondary, .product-card, .form-input, .category-tab { border: 2px solid currentColor; } .gradient-text { background: none; -webkit-text-fill-color: currentColor; color: currentColor; } }
  /* ========================================
   * CUSTOM SCROLLBARS
   * ======================================== */
  ::-webkit-scrollbar { width: 8px; height: 8px; }
  ::-webkit-scrollbar-track { @apply bg-gray-100 dark:bg-gray-800; }
  ::-webkit-scrollbar-thumb { @apply bg-primary rounded; }
  ::-webkit-scrollbar-thumb:hover { @apply bg-primary-dark; }
  .sidebar-content::-webkit-scrollbar { width: 4px; }
  .sidebar-content::-webkit-scrollbar-track { background: transparent; }
  .sidebar-content::-webkit-scrollbar-thumb { @apply bg-primary rounded-full; }
  .sidebar-content::-webkit-scrollbar-thumb:hover { @apply bg-primary-dark; }
  .dark .sidebar-content::-webkit-scrollbar-thumb { @apply bg-secondary; }
  .dark .sidebar-content::-webkit-scrollbar-thumb:hover { @apply bg-purple-400; }
  #cartItemsMobile::-webkit-scrollbar, #cartItemsDesktop::-webkit-scrollbar { width: 6px; }
  #cartItemsMobile::-webkit-scrollbar-track, #cartItemsDesktop::-webkit-scrollbar-track { @apply bg-gray-50 rounded-lg dark:bg-gray-700; }
  #cartItemsMobile::-webkit-scrollbar-thumb, #cartItemsDesktop::-webkit-scrollbar-thumb { @apply rounded-lg bg-gradient-to-b from-pink-500 to-purple-500; }
  #cartItemsMobile::-webkit-scrollbar-thumb:hover, #cartItemsDesktop::-webkit-scrollbar-thumb:hover { @apply bg-gradient-to-b from-pink-600 to-purple-600; }
  /* ========================================
   * KEYFRAME ANIMATIONS
   * ======================================== */
  @keyframes float { 0%, 100% { transform: translateY(0px); } 50% { transform: translateY(-20px); } }
  @keyframes slideUp { 0% { transform: translateY(100%); opacity: 0; } 100% { transform: translateY(0); opacity: 1; } }
  @keyframes slideInRight { 0% { transform: translateX(50px); opacity: 0; } 100% { transform: translateX(0); opacity: 1; } }
  @keyframes fadeIn { 0% { opacity: 0; } 100% { opacity: 1; } }
  @keyframes scaleIn { 0% { transform: scale(0.9); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
  @keyframes pulseGlow { 0%, 100% { box-shadow: 0 0 15px rgba(255, 107, 157, 0.3); } 50% { box-shadow: 0 0 30px rgba(255, 107, 157, 0.6); } }
  @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
  @keyframes gentlePulse { 0%, 100% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.05); opacity: 0.8; } }
  @keyframes toast-progress { from { transform: scaleX(1); } to { transform: scaleX(0); } }
  @keyframes shimmer { 0% { transform: translateX(-100%); } 100% { transform: translateX(100%); } }
  @keyframes slideInRightSidebar { from { transform: translateX(100%); } to { transform: translateX(0); } }
  @keyframes slideInLeftSidebar { from { transform: translateX(-100%); } to { transform: translateX(0); } }
  @keyframes fadeInOverlay { from { opacity: 0; } to { opacity: 1; } }
  @keyframes scaleInModal { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }
  @keyframes slideHorizontal { 0% { transform: translateX(-100%); opacity: 0; } 100% { transform: translateX(0); opacity: 1; } }
  @keyframes skeleton-pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }

} /* End @layer base */

/* ========================================
 * 4. COMPONENTS LAYER
 * ======================================== */
@layer components {

  /* ========================================
   * 🎨 BACKGROUND SYSTEM
   * ======================================== */
  .animated-background { @apply fixed top-0 left-0 w-full h-full overflow-hidden pointer-events-none bg-cream-50; z-index: var(--z-base); background-image: radial-gradient(at 90% 10%, hsla(339, 100%, 71%, 0.1) 0px, transparent 50%), radial-gradient(at 10% 90%, hsla(271, 91%, 65%, 0.1) 0px, transparent 50%); }
  .animated-background::before { content: ''; @apply absolute inset-0; z-index: 1; background: linear-gradient(180deg, rgba(255, 249, 245, 0) 0%, rgba(255, 249, 245, 0.98) 100%); }
  .dark .animated-background { background-color: theme('colors.gray.900'); background-image: radial-gradient(at 90% 10%, hsla(339, 100%, 71%, 0.06) 0px, transparent 50%), radial-gradient(at 10% 90%, hsla(271, 91%, 65%, 0.06) 0px, transparent 50%); }
  .dark .animated-background::before { background: linear-gradient(180deg, rgba(26, 22, 37, 0) 0%, rgba(26, 22, 37, 0.98) 100%); }
  .page-content { position: relative; z-index: var(--z-content); @apply pr-0 pl-0; }

  /* ================================================================
 * 🎬 HERO SECTION - V4 (Preview Mode)
 * ================================================================
 * ✅ Mobile: 1.2 slides (شريحة + 20% preview)
 * ✅ Tablet: 2.2 slides (شريحتين + 20% preview)
 * ✅ Desktop: 3.2 slides (3 شرائح + 20% preview)
 * ✅ استغلال كامل عرض الشاشة (No empty spaces)
 * ✅ Fade effect على الـ preview slides
 * ================================================================ */
/* ================================================================
 * 🎬 HERO SECTION - ENHANCED V5 (Tailwind v4 Compatible)
 * ================================================================
 * ✅ يعمل مع npx tailwindcss --watch
 * ✅ تحميل صورتين في HTML للأداء
 * ✅ Preview أصغر وأكثر احترافية
 * ✅ إزالة المساحات الفارغة
 * ✅ أزرار شفافة على الموبايل
 * ================================================================ */
/* ================================================================
 * 🎬 HERO SECTION - V7 (CLS Score < 0.05)
 * ================================================================
 * ✅ Skeleton placeholders with shimmer animation
 * ✅ Fixed dimensions for Text Marquee & Trust Banner
 * ✅ Enhanced centered mode (3 clear images on Desktop)
 * ✅ Progressive fade for distant slides
 * ================================================================ */

/* ========================================
 * 📦 HERO SECTION CONTAINER (Fixed)
 * ======================================== */
#carousels-container {
  opacity: 1;
  display: block;
  contain: layout style;
  transition: opacity 0.3s ease;
  margin-bottom: 0;
  width: 100%;
  max-width: none;
}

/* ========================================
 * 🎬 FEATURED SWIPER WRAPPER
 * ======================================== */
#featured-swiper {
  position: relative;
  width: 100%;
  overflow: visible;
  margin-bottom: 1.5rem;
  padding-left: 0.5rem;
  padding-right: 0.5rem;
}

@media (min-width: 768px) {
  #featured-swiper {
    padding-left: 1rem;
    padding-right: 1rem;
    margin-bottom: 2rem;
  }
}

@media (min-width: 1024px) {
  #featured-swiper {
    padding-left: 1.5rem;
    padding-right: 1.5rem;
  }
}

@media (min-width: 1536px) {
  #featured-swiper {
    padding-left: 2rem;
    padding-right: 2rem;
  }
}

#featured-swiper .swiper {
  overflow: visible;
}

/* ========================================
 * 🖼️ SLIDE DIMENSIONS (Fixed)
 * ======================================== */
#featured-swiper .swiper-slide {
  aspect-ratio: 4 / 3;
  transition: 
    opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1),
    transform 0.4s cubic-bezier(0.4, 0, 0.2, 1),
    filter 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  border-radius: 0.875rem;
  overflow: hidden;
  opacity: 0.35;
}

@media (min-width: 768px) {
  #featured-swiper .swiper-slide {
    aspect-ratio: 16 / 9;
    border-radius: 1rem;
  }
}

@media (min-width: 1024px) {
  #featured-swiper .swiper-slide {
    border-radius: 1.25rem;
  }
}

/* ========================================
 * 🎨 SKELETON PLACEHOLDER (NEW)
 * ======================================== */
#featured-swiper .skeleton-slide {
  position: relative;
  background: linear-gradient(
    135deg,
    #FFF5F7 0%,
    #FFE4E9 50%,
    #FFF5F7 100%
  );
  opacity: 0.5;
}

.dark #featured-swiper .skeleton-slide {
  background: linear-gradient(
    135deg,
    #374151 0%,
    #1f2937 50%,
    #374151 100%
  );
}

/* Shimmer Animation */
.skeleton-shimmer {
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(255, 255, 255, 0.3) 50%,
    transparent 100%
  );
  animation: skeleton-shimmer 2s infinite;
}

.dark .skeleton-shimmer {
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(255, 255, 255, 0.1) 50%,
    transparent 100%
  );
}

@keyframes skeleton-shimmer {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(200%);
  }
}

/* ========================================
 * 🎨 SLIDE BACKGROUND
 * ======================================== */
#featured-swiper .swiper-slide .swiper-slide-bg {
  width: 100%;
  height: 100%;
  background-size: cover;
  background-position: center center;
  background-repeat: no-repeat;
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);
  transition: transform 0.4s ease;
}

.dark #featured-swiper .swiper-slide .swiper-slide-bg {
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.25);
}

/* ========================================
 * ✨ ACTIVE SLIDE
 * ======================================== */
#featured-swiper .swiper-slide-active {
  opacity: 1 !important;
  transform: scale(1);
  z-index: 10;
  filter: grayscale(0%) !important;
}

#featured-swiper .swiper-slide-active .swiper-slide-bg {
  box-shadow: 
    0 8px 32px rgba(255, 107, 157, 0.25),
    0 4px 16px rgba(0, 0, 0, 0.1);
}

.dark #featured-swiper .swiper-slide-active .swiper-slide-bg {
  box-shadow: 
    0 8px 32px rgba(255, 107, 157, 0.35),
    0 4px 16px rgba(0, 0, 0, 0.4);
}

/* ========================================
 * 👁️ PREVIEW SLIDES (Enhanced for Desktop)
 * ======================================== */
#featured-swiper .swiper-slide:not(.swiper-slide-active) {
  cursor: pointer;
  filter: grayscale(20%);
}

/* Desktop: 3 clear slides (active + prev + next) */
@media (min-width: 1024px) {
  #featured-swiper .swiper-slide-prev,
  #featured-swiper .swiper-slide-next {
    opacity: 0.75 !important; /* ✅ واضحة أكثر */
    filter: grayscale(0%) !important;
  }
}

#featured-swiper .swiper-slide:not(.swiper-slide-active):hover {
  opacity: 0.6 !important;
  transform: translateY(-2px);
  filter: grayscale(0%);
}

#featured-swiper .swiper-slide:not(.swiper-slide-active):hover .swiper-slide-bg {
  transform: scale(1.02);
}

/* ========================================
 * 🎯 PAGINATION
 * ======================================== */
#featured-swiper .swiper-pagination {
  position: static !important;
  margin-top: 1rem;
  display: flex !important;
  justify-content: center;
  gap: 0.5rem;
}

@media (min-width: 768px) {
  #featured-swiper .swiper-pagination {
    margin-top: 1.25rem;
  }
}

#featured-swiper .swiper-pagination-bullet {
  width: 8px !important;
  height: 8px !important;
  border-radius: 50%;
  @apply !bg-primary;
  opacity: 0.25 !important;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  cursor: pointer;
  border: none;
  margin: 0 !important;
}

#featured-swiper .swiper-pagination-bullet:hover {
  opacity: 0.5 !important;
  transform: scale(1.3);
}

#featured-swiper .swiper-pagination-bullet-active {
  width: 28px !important;
  height: 8px !important;
  opacity: 1 !important;
  @apply !bg-primary;
  border-radius: 4px;
}

/* ========================================
 * ⬅️➡️ NAVIGATION ARROWS (Enhanced Desktop)
 * ======================================== */
#featured-swiper .swiper-button-prev,
#featured-swiper .swiper-button-next {
  width: 40px !important;
  height: 40px !important;
  background: rgba(255, 255, 255, 0.15) !important;
  backdrop-filter: blur(8px);
  border-radius: 50%;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  color: white !important;
  border: 1px solid rgba(255, 255, 255, 0.2);
  display: flex !important;
  opacity: 0.5;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Tablet (768px+): أزرار أكثر وضوحاً */
@media (min-width: 768px) {
  #featured-swiper .swiper-button-prev,
  #featured-swiper .swiper-button-next {
    width: 52px !important;
    height: 52px !important;
    background: rgba(255, 255, 255, 0.95) !important;
    backdrop-filter: blur(12px);
    box-shadow: 
      0 4px 16px rgba(0, 0, 0, 0.12),
      0 0 0 1px rgba(255, 107, 157, 0.1);
    opacity: 0.9;
    border: 2px solid rgba(255, 107, 157, 0.15);
  }
}

/* Desktop (1024px+): تصميم premium */
@media (min-width: 1024px) {
  #featured-swiper .swiper-button-prev,
  #featured-swiper .swiper-button-next {
    width: 56px !important;
    height: 56px !important;
    background: linear-gradient(
      135deg,
      rgba(255, 255, 255, 0.98) 0%,
      rgba(255, 245, 250, 0.98) 100%
    ) !important;
    box-shadow: 
      0 6px 24px rgba(255, 107, 157, 0.15),
      0 2px 8px rgba(0, 0, 0, 0.08),
      inset 0 1px 0 rgba(255, 255, 255, 0.8);
    border: 2px solid rgba(255, 107, 157, 0.2);
    opacity: 1;
  }
}

/* Hover States */
#featured-swiper .swiper-button-prev:hover,
#featured-swiper .swiper-button-next:hover {
  background: linear-gradient(135deg, #FF6B9D, #E85589) !important;
  color: white !important;
  transform: scale(1.08);
  opacity: 1 !important;
  @apply border-primary;
  box-shadow: 
    0 8px 32px rgba(255, 107, 157, 0.35),
    0 4px 16px rgba(0, 0, 0, 0.15);
}

/* Active States */
#featured-swiper .swiper-button-prev:active,
#featured-swiper .swiper-button-next:active {
  transform: scale(0.95);
}

/* Icon Sizes */
#featured-swiper .swiper-button-prev:after,
#featured-swiper .swiper-button-next:after {
  font-size: 16px !important;
  font-weight: bold;
}

@media (min-width: 768px) {
  #featured-swiper .swiper-button-prev:after,
  #featured-swiper .swiper-button-next:after {
    font-size: 22px !important;
  }
}

@media (min-width: 1024px) {
  #featured-swiper .swiper-button-prev:after,
  #featured-swiper .swiper-button-next:after {
    font-size: 24px !important;
  }
}

/* Dark Mode */
.dark #featured-swiper .swiper-button-prev,
.dark #featured-swiper .swiper-button-next {
  background: rgba(0, 0, 0, 0.2) !important;
  backdrop-filter: blur(10px);
  color: white !important;
  border-color: rgba(255, 255, 255, 0.15);
}

@media (min-width: 768px) {
  .dark #featured-swiper .swiper-button-prev,
  .dark #featured-swiper .swiper-button-next {
    background: rgba(30, 30, 40, 0.9) !important;
    border-color: rgba(255, 107, 157, 0.25);
    box-shadow: 
      0 4px 16px rgba(0, 0, 0, 0.4),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
  }
}

@media (min-width: 1024px) {
  .dark #featured-swiper .swiper-button-prev,
  .dark #featured-swiper .swiper-button-next {
    background: linear-gradient(
      135deg,
      rgba(40, 40, 50, 0.95) 0%,
      rgba(30, 30, 40, 0.95) 100%
    ) !important;
  }
}

.dark #featured-swiper .swiper-button-prev:hover,
.dark #featured-swiper .swiper-button-next:hover {
  background: linear-gradient(135deg, #FF6B9D, #E85589) !important;
  @apply border-primary;
  box-shadow: 
    0 8px 32px rgba(255, 107, 157, 0.45),
    0 4px 16px rgba(0, 0, 0, 0.3);
}

/* ========================================
 * 📢 TEXT MARQUEE SWIPER (Fixed Height)
 * ======================================== */
#text-marquee-swiper {
  position: relative;
  width: 100%;
  height: 52px;
  min-height: 52px;
  max-height: 52px; /* ✅ منع Layout Shift */
  margin: 1.5rem 0;
  overflow: hidden;
  border-radius: 0.875rem;
  @apply bg-gradient-to-br from-primary via-primary-dark to-secondary;
  box-shadow: 
    0 4px 16px rgba(255, 107, 157, 0.25),
    inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

@media (min-width: 768px) {
  #text-marquee-swiper {
    height: 60px;
    min-height: 60px;
    max-height: 60px;
    border-radius: 1rem;
    margin: 2rem 0;
  }
}

#text-marquee-swiper::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.15),
    transparent
  );
  animation: shimmer 4s infinite;
  z-index: 1;
  pointer-events: none;
}

#text-marquee-swiper .swiper-wrapper {
  display: flex;
  align-items: center;
}

#text-marquee-swiper .swiper-slide {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0 2rem;
  color: white;
  font-weight: 600;
  font-size: 0.8125rem;
  line-height: 1.4;
  white-space: nowrap;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);
}

@media (min-width: 768px) {
  #text-marquee-swiper .swiper-slide {
    font-size: 0.9375rem;
  }
}

#text-marquee-swiper .marquee-icon {
  font-size: 1.125rem;
  margin-left: 0.75rem;
  filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.2));
}

#text-marquee-swiper .marquee-title {
  font-weight: 700;
  margin-left: 0.5rem;
}

/* ========================================
 * 🍃 TRUST BANNER (Fixed Height)
 * ======================================== */
.trust-banner {
  position: relative;
  width: 100%;
  min-height: 68px;
  max-height: 68px; /* ✅ منع Layout Shift */
  margin: 1.5rem 0 2rem 0;
  padding: 1rem 1.25rem;
  display: flex;
  align-items: center;
  gap: 1rem;
  border-radius: 0.875rem;
  background: linear-gradient(to left, #f0fdf4, #dcfce7);
  border: 2px solid #86efac;
  box-shadow: 0 2px 12px rgba(134, 239, 172, 0.2);
  overflow: hidden;
}

@media (min-width: 768px) {
  .trust-banner {
    min-height: 76px;
    max-height: 76px;
    padding: 1.25rem 1.5rem;
    gap: 1.25rem;
    border-radius: 1rem;
    margin: 2rem 0 2.5rem 0;
  }
}

.dark .trust-banner {
  background: linear-gradient(to left, #064e3b, #065f46);
  border-color: #059669;
  box-shadow: 0 2px 12px rgba(5, 150, 105, 0.3);
}

.trust-banner::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.1),
    transparent
  );
  animation: shimmer 6s infinite;
  pointer-events: none;
}

.trust-icon {
  position: relative;
  width: 44px;
  height: 44px;
  flex-shrink: 0;
  border-radius: 50%;
  background: linear-gradient(135deg, #059669, #047857);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.375rem;
  box-shadow: 0 4px 12px rgba(5, 150, 105, 0.3);
}

@media (min-width: 768px) {
  .trust-icon {
    width: 52px;
    height: 52px;
    font-size: 1.625rem;
  }
}

.trust-text {
  flex: 1;
  min-width: 0;
}

.trust-text h3 {
  font-size: 0.9375rem;
  font-weight: 700;
  color: #047857;
  margin: 0 0 0.25rem 0;
  line-height: 1.3;
}

@media (min-width: 768px) {
  .trust-text h3 {
    font-size: 1.0625rem;
  }
}

.dark .trust-text h3 {
  color: #6ee7b7;
}

.trust-text p {
  font-size: 0.8125rem;
  color: #065f46;
  margin: 0;
  line-height: 1.4;
}

@media (min-width: 768px) {
  .trust-text p {
    font-size: 0.875rem;
  }
}

.dark .trust-text p {
  color: #a7f3d0;
}

/* ========================================
 * 📱 RESPONSIVE ADJUSTMENTS
 * ======================================== */

/* Mobile (< 480px) */
@media (max-width: 479px) {
  #featured-swiper {
    padding-left: 0.25rem;
    padding-right: 0.25rem;
  }
  
  #featured-swiper .swiper-slide {
    border-radius: 0.75rem;
  }
  
  #featured-swiper .swiper-button-prev,
  #featured-swiper .swiper-button-next {
    width: 36px !important;
    height: 36px !important;
    opacity: 0.4 !important;
  }
  
  #featured-swiper .swiper-button-prev:after,
  #featured-swiper .swiper-button-next:after {
    font-size: 14px !important;
  }
}

/* ========================================
 * ♿ ACCESSIBILITY
 * ======================================== */
#featured-swiper .swiper-slide:focus-visible {
  @apply outline-primary;
  outline-offset: 4px;
  border-radius: 1rem;
}

#featured-swiper .swiper-pagination-bullet:focus-visible {
  @apply outline-2 outline-primary;
  outline-offset: 2px;
}

#featured-swiper .swiper-button-prev:focus-visible,
#featured-swiper .swiper-button-next:focus-visible {
  @apply outline-2 outline-primary;
  outline-offset: 2px;
}

/* Reduce motion */
@media (prefers-reduced-motion: reduce) {
  #featured-swiper .swiper-slide,
  #featured-swiper .swiper-slide .swiper-slide-bg,
  #featured-swiper .swiper-pagination-bullet,
  #featured-swiper .swiper-button-prev,
  #featured-swiper .swiper-button-next,
  .skeleton-shimmer {
    transition: none !important;
    animation: none !important;
  }
}

  /* ========================================
   * 📌 STICKY CATEGORIES
   * ======================================== */
  /* ... (كل الأكواد هنا كما هي) ... */
  .categories-section { position: sticky; top: 100px; z-index: var(--z-sticky-categories); opacity: 0; pointer-events: none; transform: translateY(-10px); transition: opacity 0.3s ease, transform 0.3s ease; }
  .categories-section.visible { opacity: 1; pointer-events: auto; transform: translateY(0); }
  .category-tab.active { @apply text-white border-transparent scale-105 bg-gradient-to-br from-primary to-secondary; box-shadow: 0 4px 20px rgba(255, 107, 157, 0.24); }

  /* ========================================
   * 🏠 HEADER
   * ======================================== */
  /* ... (كل الأكواد هنا كما هي) ... */
  header#header, .header { position: fixed; top: 0; left: 0; right: 0; z-index: var(--z-header); }
  .header-cart-badge, .header .icon-btn { position: relative; z-index: var(--z-header-elements); }

  /* ========================================
   * 🧾 SIDEBAR SYSTEM
   * ======================================== */
  /* ... (كل الأكواد هنا كما هي) ... */
  .sidebar-overlay { position: fixed; inset: 0; z-index: var(--z-sidebar-overlay); @apply bg-primary/50; opacity: 0; visibility: hidden; transition: opacity 0.3s ease, visibility 0.3s ease; animation: fadeInOverlay 0.3s ease; }
  .sidebar-overlay.show { opacity: 1; visibility: visible; }
  [dir="rtl"] .sidebar, [dir="rtl"] aside.sidebar { position: fixed; width: var(--sidebar-width); left: 0; right: auto; top: 0; height: 100vh; z-index: var(--z-sidebar); transform: translateX(-100%); transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1); will-change: transform; }
  [dir="rtl"] .sidebar.show, [dir="rtl"] aside.sidebar.show { transform: translateX(0); animation: slideInLeftSidebar 0.35s ease; }
  [dir="ltr"] .sidebar, [dir="ltr"] aside.sidebar { position: fixed; width: var(--sidebar-width); right: 0; left: auto; top: 0; height: 100vh; z-index: var(--z-sidebar); transform: translateX(100%); transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1); will-change: transform; }
  [dir="ltr"] .sidebar.show, [dir="ltr"] aside.sidebar.show { transform: translateX(0); animation: slideInRightSidebar 0.35s ease; }
  .sidebar-trigger .hamburger-icon span { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
  .sidebar-trigger.active .hamburger-icon span:nth-child(1) { transform: translateY(6.75px) rotate(45deg); }
  .sidebar-trigger.active .hamburger-icon span:nth-child(2) { opacity: 0; }
  .sidebar-trigger.active .hamburger-icon span:nth-child(3) { transform: translateY(-6.75px) rotate(-45deg); }
  .sidebar-nav-item.active { @apply text-white bg-gradient-to-br from-primary to-secondary; box-shadow: 0 4px 20px rgba(255, 107, 157, 0.24); }
  .sidebar-nav-item.active .sidebar-nav-icon { @apply bg-transparent text-white; }
  .sidebar-toggle input:checked + .sidebar-toggle-slider { @apply bg-primary; }
  .sidebar-toggle input:checked + .sidebar-toggle-slider:before { transform: translateX(20px); }
  body.sidebar-open { @apply overflow-hidden; }

  /* ========================================
   * 📲 MODALS SYSTEM
   * ======================================== */
  /* ... (كل الأكواد هنا كما هي) ... */
  .modal-overlay, .cart-modal-overlay, .checkout-modal-overlay, .permission-modal, .processing-modal, .confirmed-modal, .tracking-modal { position: fixed; inset: 0; z-index: var(--z-modal-overlay); @apply bg-gray-900/80; backdrop-filter: blur(8px); display: none; align-items: center; justify-content: center; }
  .modal-overlay.show, .modal-overlay.active, .cart-modal-overlay.show, .checkout-modal-overlay.show { display: flex; animation: fadeInOverlay 0.3s ease; }
  #productModal, #cartModal, #trackingModal, #orderConfirmedModal, #permissionModal { position: relative; z-index: var(--z-modal-base); }
  #checkoutModal { z-index: var(--z-modal-nested); }
  #processingModal { z-index: var(--z-modal-processing); }
  .modal-close, .checkout-close, .close-confirmed, .close-tracking, .close-permission { position: absolute; z-index: var(--z-modal-close-btn); }
  .modal-content, .checkout-content, .confirmed-content, .tracking-content, .permission-content, .processing-content { position: relative; max-height: 90vh; overflow-y: auto; animation: scaleInModal 0.3s ease; }
  .modal-content-card { @apply bg-white dark:bg-gray-800 rounded-3xl max-w-[850px] w-full max-h-[90vh] overflow-y-auto shadow-2xl; }
  .cart-modal-overlay { animation: fadeIn 0.3s ease; }
  .cart-modal-overlay.show > div { animation: slideUp 0.35s cubic-bezier(0.34, 1.56, 0.64, 1); }

  /* ========================================
   * 🔔 TOAST NOTIFICATIONS
   * ======================================== */
  /* ... (كل الأكواد هنا كما هي) ... */
  #toastContainer { position: fixed; z-index: var(--z-toast); pointer-events: none; }
  #toastContainer > * { pointer-events: auto; }
  .toast { @apply flex items-start gap-3 bg-white dark:bg-gray-800 rounded-xl p-4 shadow-lg pointer-events-auto relative overflow-hidden opacity-0 w-full; transform: translateY(-20px); transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1), transform 0.3s cubic-bezier(0.4, 0, 0.2, 1); user-select: none; -webkit-user-select: none; touch-action: pan-y; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15), 0 0 0 1px rgba(0, 0, 0, 0.05); }
  .dark .toast { box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.1); }
  @media (min-width: 768px) { .toast { width: auto; min-width: 320px; transform: translateX(20px); } }
  .toast.show { @apply opacity-100; transform: translateY(0); }
  @media (min-width: 768px) { .toast.show { transform: translateX(0); } }
  .toast.hide { @apply opacity-0; transform: translateY(-20px) scale(0.95); }
  @media (min-width: 768px) { .toast.hide { transform: translateX(20px) scale(0.95); } }
  .toast.success { border-right: 4px solid #10b981; } .toast.error { border-right: 4px solid #ef4444; } .toast.warning { border-right: 4px solid #f59e0b; } .toast.info { border-right: 4px solid #3b82f6; }
  [dir="rtl"] .toast.success { border-right: none; border-left: 4px solid #10b981; } [dir="rtl"] .toast.error { border-right: none; border-left: 4px solid #ef4444; } [dir="rtl"] .toast.warning { border-right: none; border-left: 4px solid #f59e0b; } [dir="rtl"] .toast.info { border-right: none; border-left: 4px solid #3b82f6; }
  .toast-icon { @apply text-xl flex-shrink-0 mt-0.5; } .toast.success .toast-icon { @apply text-green-500; } .toast.error .toast-icon { @apply text-red-500; } .toast.warning .toast-icon { @apply text-yellow-500; } .toast.info .toast-icon { @apply text-blue-500; }
  .toast-content { @apply flex-1 min-w-0; }
  .toast-title { @apply font-semibold text-sm text-gray-800 dark:text-gray-50 mb-0.5 leading-tight; }
  .toast-message { @apply text-sm text-gray-600 dark:text-gray-400 leading-normal mt-1; }
  .toast-close { @apply bg-transparent border-none text-gray-400 dark:text-gray-500 cursor-pointer p-1 flex-shrink-0 rounded-md transition-colors duration-200 text-base leading-none -mt-1 ml-1; }
  .toast-close:hover { @apply bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300; }
  .toast-close:active { transform: scale(0.95); }
  .toast-progress { @apply absolute bottom-0 right-0 h-1 w-full; transform-origin: right; animation: toast-progress linear forwards; }
  [dir="rtl"] .toast-progress { right: auto; left: 0; transform-origin: left; }
  .toast.success .toast-progress { background: linear-gradient(90deg, #10b981, #059669); } .toast.error .toast-progress { background: linear-gradient(90deg, #ef4444, #dc2626); } .toast.warning .toast-progress { background: linear-gradient(90deg, #f59e0b, #d97706); } .toast.info .toast-progress { background: linear-gradient(90deg, #3b82f6, #2563eb); }

  /* ========================================
   * 🎨 UI COMPONENTS
   * ======================================== */
  /* ... (كل الأكواد هنا كما هي) ... */
  .icon-sm { @apply w-4 h-4; } .icon-md { @apply w-5 h-5; } .icon-lg { @apply w-6 h-6; } .icon-xl { @apply w-8 h-8; }
  .icon-btn { @apply w-11 h-11 rounded-xl flex items-center justify-center transition-[transform,background-color] duration-200 active:scale-95; }
  .icon-btn-ghost { @apply w-11 h-11 rounded-xl flex items-center justify-center transition-[transform,background-color] duration-200 active:scale-95 bg-transparent hover:bg-pink-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300 hover:text-primary; }
  .btn-primary { @apply w-full py-4 bg-gradient-to-r from-primary to-secondary text-white rounded-2xl font-bold text-lg flex items-center justify-center gap-3 shadow-lg transition-all duration-300 hover:-translate-y-1 active:scale-95 relative overflow-hidden; }
  .btn-primary:hover { box-shadow: 0 10px 40px rgba(236, 72, 153, 0.4); }
  .btn-secondary { @apply flex-1 py-4 px-6 bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-100 rounded-2xl text-base font-bold hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-300 flex items-center justify-center gap-2.5; }
  .btn-ripple { @apply relative overflow-hidden; }
  .btn-ripple::before { content: ''; @apply absolute top-1/2 left-1/2 w-0 h-0 rounded-full bg-white/30 transform -translate-x-1/2 -translate-y-1/2 transition-[width,height]; transition-duration: 600ms; }
  .btn-ripple:active::before { width: 300px; height: 300px; }
  .form-label { @apply flex items-center gap-2 text-sm font-semibold text-gray-800 dark:text-gray-100 mb-2; }
  .form-input { @apply w-full py-3.5 px-4 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-base bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-100 placeholder:text-gray-400 focus:outline-none focus:border-green-500 focus:shadow-lg transition-all duration-300; }
  .form-textarea { @apply w-full py-3.5 px-4 border-2 border-gray-300 dark:border-gray-600 rounded-xl text-base bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-100 placeholder:text-gray-400 focus:outline-none focus:border-green-500 focus:shadow-lg transition-all duration-300 resize-y min-h-[80px]; }
  .gradient-text { @apply bg-gradient-to-br from-primary via-primary-light to-secondary bg-clip-text text-transparent; }
  .delivery-option.selected { @apply border-green-500 shadow-lg; background: linear-gradient(135deg, #f1f8f4, #e8f5e9); box-shadow: 0 4px 20px rgba(76, 175, 80, 0.25); }
  .delivery-option.selected .selection-indicator { @apply bg-green-500 border-green-500 text-white; }
  .branch-card.selected { @apply border-green-500; background: linear-gradient(135deg, #f1f8f4, #e8f5e9); box-shadow: 0 4px 16px rgba(76, 175, 80, 0.2); }
  .branch-card.selected .branch-check { @apply bg-green-500 border-green-500 text-white; }
  .tab-content { display: none; }
  .tab-content.active { display: block; animation: fadeInUp 0.4s ease; }
  .clear-search.show { display: flex; }
  .direction-ltr { direction: ltr; text-align: left; }
  .cart-empty-pulse { animation: gentlePulse 2s ease-in-out infinite; }
  .shadow-glow { box-shadow: 0 10px 40px rgba(236, 72, 153, 0.4); }
  .dark .shadow-glow { box-shadow: 0 10px 40px rgba(236, 72, 153, 0.3); }

  /* ========================================
   * 📦 PRODUCTS GRID
   * ======================================== */
  /* ... (كل الأكواد هنا كما هي) ... */
  .products-container { padding-top: 2rem; min-height: 500px; position: relative; z-index: var(--z-products); }
  .categories-section + .products-container { margin-top: 1rem; }
  .products-grid { @apply grid gap-6 mb-12; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); }
  @media (max-width: 640px) { .products-grid { grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); @apply gap-4; } }
  .product-card { position: relative; z-index: 1; @apply bg-white dark:bg-gray-800 rounded-3xl overflow-hidden cursor-pointer border-2 border-transparent; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08); transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.4s cubic-bezier(0.4, 0, 0.2, 1), border-color 0.4s cubic-bezier(0.4, 0, 0.2, 1); animation: fadeInUp 0.6s ease-out backwards; }
  .dark .product-card { box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3); }
  .product-card:hover { @apply -translate-y-2 border-primary; z-index: var(--z-product-hover); box-shadow: 0 12px 40px rgba(255, 107, 157, 0.2); }
  .product-image-container { @apply relative w-full overflow-hidden; padding-top: 100%; background: linear-gradient(135deg, #FFF5F7 0%, #FFE4E9 100%); }
  .dark .product-image-container { background: linear-gradient(135deg, #374151 0%, #1f2937 100%); }
  .product-image { @apply absolute top-0 left-0 w-full h-full object-cover; transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1); }
  .product-card:hover .product-image { transform: scale(1.1) rotate(2deg); }
  .product-badge { @apply absolute top-3 right-3 text-white px-3.5 py-1.5 rounded-full text-xs font-bold bg-gradient-to-br from-primary to-secondary; z-index: 10; box-shadow: 0 4px 12px rgba(255, 107, 157, 0.4); }
  .product-content { @apply p-5; }
  .product-name { @apply text-lg font-bold text-gray-800 dark:text-gray-50 mb-2 leading-snug overflow-hidden; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; line-clamp: 2; }
  .product-description { @apply text-sm text-gray-600 dark:text-gray-400 mb-4 leading-relaxed overflow-hidden; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; line-clamp: 2; }
  .product-footer { @apply flex justify-between items-center gap-4; }
  .product-price { @apply text-2xl font-black text-primary; direction: ltr; }
  .add-to-cart-btn { @apply w-11 h-11 rounded-full text-white border-none cursor-pointer flex items-center justify-center transition-[transform,box-shadow] duration-300 bg-gradient-to-br from-primary to-secondary; box-shadow: 0 4px 12px rgba(255, 107, 157, 0.3); }
  .add-to-cart-btn:hover { @apply scale-110; box-shadow: 0 6px 20px rgba(255, 107, 157, 0.5); }
  .add-to-cart-btn:active { @apply scale-95; }
  .category-header { @apply flex items-center gap-4 mb-6 pb-4 border-b border-cream-200; border-bottom-width: 3px; }
  .dark .category-header { @apply border-gray-700; }
  .category-icon { @apply w-12 h-12 rounded-2xl flex items-center justify-center text-white bg-gradient-to-br from-primary to-secondary; box-shadow: 0 4px 12px rgba(255, 107, 157, 0.3); }
  .category-name { @apply text-2xl font-black text-gray-800 dark:text-gray-50 m-0; }

} /* End @layer components */

/* ========================================
 * 5. UTILITIES LAYER
 * ======================================== */
@layer utilities {
  /* ... (كل الأكواد هنا كما هي) ... */
  .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
  .scrollbar-hide::-webkit-scrollbar { display: none; }
  .sr-only { @apply absolute w-px h-px p-0 -m-px overflow-hidden whitespace-nowrap border-0; clip: rect(0, 0, 0, 0); }
  .z-base { z-index: var(--z-base); }
  .z-content { z-index: var(--z-content); }
  .z-carousel { z-index: var(--z-carousel); }
  .z-carousel-ctrl { z-index: var(--z-carousel-controls); }
  .z-products { z-index: var(--z-products); }
  .z-product-hover { z-index: var(--z-product-hover); }
  .z-dropdown { z-index: var(--z-dropdown); }
  .z-header { z-index: var(--z-header); }
  .z-header-el { z-index: var(--z-header-elements); }
  .z-sticky-cat { z-index: var(--z-sticky-categories); }
  .z-sidebar-overlay { z-index: var(--z-sidebar-overlay); }
  .z-sidebar { z-index: var(--z-sidebar); }
  .z-modal-overlay { z-index: var(--z-modal-overlay); }
  .z-modal { z-index: var(--z-modal-base); }
  .z-modal-nested { z-index: var(--z-modal-nested); }
  .z-modal-processing { z-index: var(--z-modal-processing); }
  .z-modal-close { z-index: var(--z-modal-close-btn); }
  .z-toast { z-index: var(--z-toast); }
} /* End @layer utilities */

/* ========================================
 * 💡 PERFORMANCE OPTIMIZATIONS
 * ======================================== */

/* ✅ (تم الحذف) تم حذف .carousel-item و .carousel-container من هنا */

/* Only active elements get will-change */
.modal-overlay.active,
.sidebar.show,
.toast.show {
  will-change: transform, opacity;
}

/* Remove will-change after animation */
.modal-overlay:not(.active),
.sidebar:not(.show),
.toast:not(.show) {
  will-change: auto;
}

/* CSS Containment for better performance */
.product-card,
.modal-content {
  contain: layout style paint;
}

/* ... (كود DEBUG MODE كما هو) ... */
/* ========================================
 * 🕵️‍♂️ DEBUG MODE (Development Only)
 * ======================================== */
.debug-mode * { outline: 1px solid rgba(255, 0, 0, 0.2); }
.debug-mode [class*="z-"] { outline: 2px solid rgba(0, 255, 0, 0.5); position: relative; }
.debug-mode [class*="z-"]::after { content: attr(class); position: absolute; top: 0; right: 0; background: rgba(0, 0, 0, 0.8); color: white; padding: 2px 5px; font-size: 10px; z-index: 99999; pointer-events: none; }
/* ========================================
 * 🐛 DEBUG MODE (للتطوير فقط)
 * ======================================== */
.debug-swiper #featured-swiper {
  outline: 2px dashed red;
}

.debug-swiper #featured-swiper .swiper-slide {
  outline: 1px solid blue;
}

.debug-swiper #featured-swiper .swiper-slide-active {
  outline: 2px solid green;
}
/* ========================================
 * ✅ END OF STYLESHEET v4.1 (Cleaned)
 * ======================================== */